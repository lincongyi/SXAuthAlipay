webpackJsonp([2],{"0sGY":function(e,t,i){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new n.a(function(a,n){e=(i.port||d)+e,r.a.get(e,{params:t},i).then(function(e){!0===i.isGetHeaders?a(e):a(e.data)}).catch(function(e){n(e)})})},t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new n.a(function(a,n){e=(i.port||d)+e;var o=sessionStorage.getItem("login_token");o&&(t.token=o),r.a.post(e,t,i).then(function(e){!0===i.isGetHeaders?a(e):a(e.data)},function(e){n(e)})})};var a=i("//Fk"),n=i.n(a),o=i("mtWM"),r=i.n(o),s=i("w24O"),d=(i.n(s),s.baseUrl);function u(e){console.log("请求错误",e);var t="";return e&&e.response&&-1!=e.message.indexOf("code")?(t="（"+(t=e.message.split("code ")[1])+"）",e.message="网络错误，请稍后重试"+t):e.message="网络错误，请稍后重试",e}r.a.defaults.timeout=3e4,r.a.defaults.headers.post["Content-Type"]="application/json",r.a.interceptors.request.use(function(e){return e.headers={"Content-Type":"application/json"},e.retry=1,e.retryDelay=1e3,e},function(e){return n.a.reject(e)}),r.a.interceptors.response.use(void 0,function(e){var t=e.config;return console.log("errconfig",t),t&&t.retry?(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry?(console.log("err2"),e=u(e),n.a.reject(e)):(t.__retryCount+=1,new n.a(function(e){setTimeout(function(){e()},t.retryDelay||1e3)}).then(function(){return r()(t)}))):(console.log("err1"),e=u(e),n.a.reject(e))})},HBkd:function(e,t){},N4Rm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7+uW"),n=i("mvHQ"),o=i.n(n),r=i("//Fk"),s=i.n(r),d=i("1lyH"),u=i("vLmZ"),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],staticClass:"mask"},[t("div",{staticClass:"loading"},[this._m(0),this._v(" "),t("div",{staticClass:"text"},[this._v(this._s(this.msg))])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img"},[t("div",{staticClass:"loader"})])}]};var l={name:"App",data:function(){return{maskShow:!1,isLoading:!0,port:"https://sfrz.wsbs.shxga.gov.cn/authgzh",isNia:!1,isReadOnly:!1,infoIsReadonly:!1,isUnregistered:!1,loginToken:"",backUrl:"",name:"",idNum:"",idStartDate:"",idEndDate:"",niaName:"",idType:101,idTypeText:"第二代居民身份证",niaIdNum:"",nation:"CHN",gender:"1",birthDay:"",expiryDate:"",birthDayText:"",expiryDateText:"",userIdKey:"",certToken:"",authMode:66,configParam:{},checkAliveType:"2",agreement:!1,phoneNum:"",authTipsInfo:{clientId:"dabby_dev",beforeAuth:'<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head><body><p style="font-size:16px;color:#a5a5a5;">即将授权<b style="color:#333;"> 公安部“互联网+政务服务”平台 </b>获取身份信息，用于<b style="color:#333;"> 认证业务 </b>办理</p></body></html>',afterAuth:null,beforeProtocol:"您同意网上身份认证及服务提供者使用并传递相关数据用于身份核验。",protocols:null,protocolList:[{name:"《用户服务协议》",url:"https://sfrz.wsbs.shxga.gov.cn/shanxiauthagreement/sxauthuseragreement.html",active:1}]},showProtocol:!1,isShowNextBtn:!1}},mounted:function(){console.log("test0324-1");if(!this.alertByPhoneInfo())return!1;var e=location.href,t=Object(d.getUrlParams)(e);console.log("urlParams",t),t&&t.code&&t.state?(this.certToken=t.state,this.getJsApiConfig(t.code,t.state)):mui.alert("无相关参数(1)，请重试","温馨提示",function(){})},components:{Loading:i("VU/8")({name:"Loading",data:function(){return{msg:"请稍候",loading:!1}},methods:{showLoading:function(e){this.loading=!0,this.msg=e||"请稍候"},hideLoading:function(){this.loading=!1}}},c,!1,function(e){i("v7Tq")},"data-v-6202aac2",null).exports},methods:{closeProtocol:function(){this.showProtocol=!1},openProtocol:function(){this.showProtocol=!0},infoAuth:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this,a={};t.verify_result&&(a.identify_id=t.verify_result),i.isNia?(a.login_token=i.loginToken,a.cert_token=i.certToken,a.full_name=i.niaName,a.id_num=i.niaIdNum,a.reg_type="nia",a.nation=i.nation,a.id_type=i.idType,a.valid_end=i.expiryDate,a.birth_date=i.birthDay,a.sex=i.gender):(a.login_token=i.loginToken,a.cert_token=i.certToken,a.full_name=i.name,a.id_num=i.idNum,a.mode=this.authMode,a.id_start_date=i.idStartDate&&i.idStartDate.split("-").join(""),a.id_end_date=i.idEndDate&&i.idEndDate.split("-").join("")),this.showLoading(),this.$post("/simpapiauth",a,{port:i.port}).then(function(t){console.log("不需要刷脸认证结果",t),e.hideLoading(),t.data&&t.data.foreBackUrl?location.replace(t.data.foreBackUrl):0!=t.res_code?mui.alert(t.res_msg,"温馨提示",function(){i.backFn()}):mui.alert("系统故障(-1)，请稍后再试","温馨提示",function(){})}).catch(function(t){console.log("(11)"),e.hideLoading(),mui.alert(t.message||"发生异常(11)，请重试","温馨提示",function(){})})},startToAuth:function(){return this.agreement?(mui("#authpopup").popover("toggle"),16!=this.authMode&&64!=this.authMode&&144!=this.authMode||this.isUnregistered?void this.faceVerifyByWx():(this.infoAuth(),!1)):(mui.toast("请同意"+this.authTipsInfo.protocolList[0].name),!1)},closeAuthpopup:function(){var e=this;mui("#authpopup").popover("toggle"),mui.confirm("您已取消认证操作，是否重试","温馨提示",["否","是"],function(t){0==t.index?e.jumpToThirdParty():e.beforeAuthTips()})},openAuthPrompt:function(){document.getElementById("authpopup").style.display="block",document.getElementById("authpopup").className+=" mui-active",this.popoverEvent(),this.maskToggle("show")},maskToggle:function(e){"show"==e&&(this.maskShow=!0),"hide"==e&&(this.maskShow=!1)},alertByPhoneInfo:function(){var e=this;try{var t=Object(d.getPhoneInfo)();if(!t.isWeiXin)return mui.alert("请在微信客户端中打开链接","温馨提示",function(){e.backFn()}),!1;if(!t.isMobile)return mui.alert("请在手机微信客户端进行操作","温馨提示",function(){e.backFn()}),!1;if(!t.isHigherWx)return mui.alert("微信版本过低，请升级至6.7.2以上版本","温馨提示",function(){e.backFn()}),!1}catch(e){}return!0},backFn:function(e){console.log("调用返回方法"),"closeWindow"==e?WeixinJSBridge.invoke("closeWindow",{},function(e){}):"go"==e?window.history.go(-1):history.back()},setToastStyle:function(){document.querySelector(".mui-toast-container").style.top="436px"},startNextStep:function(){var e=this;if(document.querySelector(".mui-toast-container"))return!1;if(console.log("name",e.$refs.nameRef.value),this.isNia){if(!this.idType)return mui.toast("请选择证件类型"),this.setToastStyle(),!1;if(!this.niaName)return mui.toast("请输入姓名"),this.setToastStyle(),!1;if(!this.niaIdNum)return mui.toast("请输入证件号码"),this.setToastStyle(),!1;if(!this.birthDay)return mui.toast("请选择出生日期"),this.setToastStyle(),!1;if(!this.expiryDate)return mui.toast("请选择有效期至"),this.setToastStyle(),!1}else{if(!this.name)return mui.toast("请输入姓名"),!1;if(!this.idNum)return mui.toast("请输入证件号码"),!1;if([16,18].includes(this.authMode)&&!this.idStartDate)return mui.toast("请选择起始日期"),!1;if([16,18].includes(this.authMode)&&!this.idEndDate)return mui.toast("请选择截止日期"),!1;var t=Object(d.checkIdNum)(this.idNum,2);if(!t.pass)return mui.toast(t.tip),!1}this.checkIdentityInfo().then(function(t){console.log("未注册 用户填写的检验信息结果",t);t.data;0==t.res_code?e.getUserIdKey():4101==t.res_code?2==t.data.agency_stat?e.getUserIdKey():mui.alert(t.data.agency_stat_msg,"温馨提示",function(){}):4132==t.res_code?e.getUserIdKey():(console.log("检验信息有效性接口 温馨提示",t),mui.alert(t.res_msg,"温馨提示",function(){}))}).catch(function(t){console.log("(8)",t),e.hideLoading(),mui.alert(t.message||"发生异常(8)，请重试","温馨提示",function(){})})},checkSupportFace:function(){var e=this;return new s.a(function(t,i){wx.config({beta:!0,appId:e.configParam.appId,timestamp:e.configParam.timestamp,nonceStr:e.configParam.nonceStr,signature:e.configParam.signature,jsApiList:["checkIsSupportFaceDetect","requestWxFacePictureVerify"]}),wx.ready(function(){wx.invoke("checkIsSupportFaceDetect",{},function(e){if(console.log(e),0==e.err_code){e.lib_version_code;t(e)}else{e.err_msg;" errCode: "+e.err_code,e.message=e.ret,i(e)}})})})},jumpToThirdParty:function(){location.replace(this.backUrl)},getStrParamsForVerify:function(){var e,t={};t=this.userIdKey?{appId:"wx461428e96b0f4ed0",request_verify_pre_info:o()({user_id_key:"that.userIdKey",outer_verify_id:"certToken=that.certToken"}),check_alive_type:this.checkAliveType}:{appId:"wx461428e96b0f4ed0",request_verify_pre_info:o()({name:"that.name",id_card_number:"that.idNum",outer_verify_id:"certToken=that.certToken",testjson:o()({certToken:"that.certToken",id:"that.id"})}),check_alive_type:this.checkAliveType},e=o()(t),console.log(e);this.userIdKey,this.certToken,this.name,this.idNum,this.certToken,this.name,this.idNum,this.certToken,this.certToken,this.id},faceVerifyByWx:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this;console.log("that.configParam",e.configParam);var t={};t=0==e.checkAliveType?e.userIdKey?{appId:"wx461428e96b0f4ed0",request_verify_pre_info:'{"user_id_key":"'+e.userIdKey+'", "outer_verify_id":"certToken='+e.certToken+'"}',check_alive_type:"0"}:{appId:"wx461428e96b0f4ed0",request_verify_pre_info:'{"name":"'+e.name+'","id_card_number":"'+e.idNum+'", "outer_verify_id":"certToken='+e.certToken+'"}',check_alive_type:"0"}:1==e.checkAliveType?e.userIdKey?{appId:"wx461428e96b0f4ed0",request_verify_pre_info:'{"user_id_key":"'+e.userIdKey+'", "outer_verify_id":"certToken='+e.certToken+'"}',check_alive_type:"1"}:{appId:"wx461428e96b0f4ed0",request_verify_pre_info:'{"name":"'+e.name+'","id_card_number":"'+e.idNum+'", "outer_verify_id":"certToken='+e.certToken+'"}',check_alive_type:"1"}:e.userIdKey?{appId:"wx461428e96b0f4ed0",request_verify_pre_info:'{"user_id_key":"'+e.userIdKey+'", "outer_verify_id":"certToken='+e.certToken+'"}',check_alive_type:"2"}:{appId:"wx461428e96b0f4ed0",request_verify_pre_info:'{"name":"'+e.name+'","id_card_number":"'+e.idNum+'", "outer_verify_id":"certToken='+e.certToken+'"}',check_alive_type:"2"},console.log("requestData",t),wx.ready(function(){wx.invoke("requestWxFacePictureVerify",t,function(t){if(console.log("刷脸结果"),console.log(t),90100==t.err_code)mui.confirm("您已取消人脸识别，是否重试","温馨提示",["否","是"],function(t){0==t.index?e.jumpToThirdParty():e.beforeAuthTips()});else if(0==t.err_code||"人脸与身份证信息不匹配"==t.err_msg||t.verify_result){if(16==e.authMode||64==e.authMode||144==e.authMode)return e.infoAuth({verify_result:t.verify_result}),!1;e.simpAuth({verify_result:t.verify_result,err_code:t.err_code})}else{console.log("人脸识别失败",t);var i=t.err_code?"("+t.err_code+")":"";mui.confirm("人脸识别失败，是否重试"+i,"温馨提示",["否","是"],function(t){0==t.index?e.jumpToThirdParty():e.beforeAuthTips()})}})})},getJsApiConfig:function(e,t){var i=this,a=this,n={code:e,url:location.href};this.showLoading(),this.$post("/getjsapiconfig",n,{port:a.port}).then(function(e){if(i.hideLoading(),0!=e.res_code)return mui.alert(e.res_msg,"温馨提示",function(){40029==e.res_code&&a.backFn("closeWindow")}),!1;var t=e.data;return i.configParam=t,i.loginToken=e.login_token,i.authMode=e.data.mode,0==e.data.user_status?[16,18].includes(i.authMode)&&!e.data.id_start_date?(i.name=t.full_name,i.idNum=t.id_num,i.infoIsReadOnly=!0,i.isShowNextBtn=!0,void(i.idTypeText=Object(d.getIdTypeText)(101,e.data.id_num))):(a.userIdKey=e.data.user_id_key,i.checkIdentityInfo(t).then(function(e){console.log("已注册的校验信息user_status0",e);var i=e.data;if(0==e.res_code){if(a.isReadOnly=!0,"nia"==t.reg_type?(a.niaName=t.full_name,a.niaIdNum=t.id_num,a.nation=t.nation,a.idType=t.id_type,a.expiryDate=t.valid_end,a.birthDay=t.birth_date,a.gender=t.sex,a.isNia=!0,a.idTypeText=Object(d.getIdTypeText)(a.idType,a.niaIdNum),a.birthDayText=Object(d.dateFormat)(a.birthDay),a.expiryDateText=Object(d.dateFormat)(a.expiryDate)):(a.name=t.full_name,a.idNum=t.id_num,a.idStartDate=a.filterDate(t.id_start_date),a.idEndDate=a.filterDate(t.id_end_date),a.isNia=!1,a.idTypeText=Object(d.getIdTypeText)(101,a.idNum)),!a.idTypeText)return a.idTypeNotSupport(),!1;a.userIdKey?a.beforeAuthTips():a.getUserIdKey()}else if(4101==e.res_code)if(2==e.data.agency_stat){if(a.isReadOnly=!0,"nia"==i.reg_type?(a.niaName=i.full_name,a.niaIdNum=i.id_num,a.nation=i.nation,a.idType=i.id_type,a.expiryDate=i.valid_end,a.birthDay=i.birth_date,a.gender=i.sex,a.isNia=!0,a.idTypeText=Object(d.getIdTypeText)(a.idType,a.niaIdNum),a.birthDayText=Object(d.dateFormat)(a.birthDay),a.expiryDateText=Object(d.dateFormat)(a.expiryDate)):(a.name=i.full_name,a.idNum=i.id_num,a.idStartDate=a.filterDate(i.id_start_date),a.idEndDate=a.filterDate(i.id_end_date),a.isNia=!1,a.idTypeText=Object(d.getIdTypeText)(101,a.idNum)),!a.idTypeText)return a.idTypeNotSupport(),!1;a.getUserIdKey()}else mui.alert(e.data.agency_stat_msg,"温馨提示",function(){});else 4132==e.res_code?(a.isShowNextBtn=!0,"nia"==t.reg_type?a.isNia=!1:a.isNia=!0,a.isNia?(a.idType=414,a.idTypeText="普通护照",a.idTypePickerInit(u.idTypeArr2),a.birthDayPickerInit(),a.expiryDatePickerInit()):(a.idType=101,a.idTypeText="第二代居民身份证",a.idTypePickerInit(u.idTypeArr1))):mui.alert(e.res_msg,"温馨提示",function(){})}).catch(function(e){console.log("(4)",e),a.hideLoading(),mui.alert(e.message||"发生异常(4)，请重试","温馨提示",function(){})}),!1):1==e.data.user_status?(a.isReadOnly=!0,a.isUnregistered=!0,"nia"==t.reg_type?(a.niaName=t.full_name,a.niaIdNum=t.id_num,a.nation=t.nation,a.idType=t.id_type,a.expiryDate=t.valid_end,a.birthDay=t.birth_date,a.gender=t.sex,a.isNia=!0,a.idTypeText=Object(d.getIdTypeText)(a.idType,a.niaIdNum),a.birthDayText=Object(d.dateFormat)(a.birthDay),a.expiryDateText=Object(d.dateFormat)(a.expiryDate)):(a.name=t.full_name,a.idNum=t.id_num,a.idStartDate=i.filterDate(t.id_start_date),a.idEndDate=i.filterDate(t.id_end_date),a.isNia=!1,a.idTypeText=Object(d.getIdTypeText)(101,a.idNum)),a.idTypeText?(i.checkIdentityInfo().then(function(e){console.log("检验信息user_status1",e),0==e.res_code?a.getUserIdKey():mui.alert(e.res_msg,"温馨提示",function(){})}).catch(function(e){console.log("(12)",e),a.hideLoading(),mui.alert(e.message||"发生异常(12)，请重试","温馨提示",function(){})}),!1):(a.idTypeNotSupport(),!1)):2==e.data.user_status?(a.isShowNextBtn=!0,a.isUnregistered=!0,0==e.data.isNia?(a.isNia=!1,a.idType=101,a.idTypeText="第二代居民身份证",a.idTypePickerInit(u.idTypeArr1)):1==e.data.isNia?(a.isNia=!0,a.idType=414,a.idTypeText="普通护照",a.idTypePickerInit(u.idTypeArr2),a.birthDayPickerInit(),a.expiryDatePickerInit()):(a.isNia=!1,a.idType=101,a.idTypeText="第二代居民身份证",a.idTypePickerInit(u.idTypeArr),a.birthDayPickerInit(),a.expiryDatePickerInit()),!1):void 0}).catch(function(e){console.log("(1)",e),a.hideLoading(),mui.alert(e.message||"发生异常(1)，请重试","温馨提示",function(){})})},idTypeNotSupport:function(){this.idTypeText||mui.alert("不支持的证件类型","温馨提示",function(){})},getUserIdKey:function(){var e=this;if((16==this.authMode||64==this.authMode||144==this.authMode)&&!this.isUnregistered)return this.beforeAuthTips(),!1;var t={};this.isNia?(t.reg_type="nia",t.full_name=this.niaName,t.id_num=this.niaIdNum,t.nation=this.nation,t.id_type=this.idType,t.valid_end=this.expiryDate,t.birth_date=this.birthDay,t.sex=this.gender):(t.full_name=this.name,t.id_num=this.idNum),console.log("获取idkey请求参数"),console.log(t),this.showLoading(),this.$post("/getuseridkey",t,{port:this.port}).then(function(t){if(e.hideLoading(),0!=t.res_code)return console.log("获取idkey失败"),console.log(t),mui.alert(t.res_msg,"温馨提示",function(){}),!1;e.userIdKey=t.data.user_id_key,e.beforeAuthTips()}).catch(function(t){console.log("(3)",t),e.hideLoading(),mui.alert(t.message||"发生异常(3)，请重试","温馨提示",function(){})})},checkIdentityInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,i={};return i=this.isNia?{login_token:t.loginToken,cert_token:t.certToken,full_name:e.full_name||t.niaName,id_num:e.id_num||t.niaIdNum,nation:e.nation||t.nation,id_type:e.id_type||t.idType,valid_end:e.valid_end||t.expiryDate,birth_date:e.birth_date||t.birthDay,sex:e.sex||t.gender,reg_type:"nia"}:{login_token:t.loginToken,cert_token:t.certToken,full_name:e.full_name||t.name,id_num:e.id_num||t.idNum,id_start_date:t.idStartDate&&t.idStartDate.split("-").join(""),id_end_date:t.idEndDate&&t.idEndDate.split("-").join("")},console.log("身份信息校验 请求参数"),console.log(i),this.showLoading(),new s.a(function(e,a){t.$post("/checkidentityinfo",i,{port:t.port}).then(function(i){t.hideLoading(),i.data&&i.data.foreBackUrl&&(t.backUrl=i.data.foreBackUrl,4101!=i.res_code&&4132!=i.res_code||(t.backUrl=t.backUrlParamsReset(t.backUrl))),i.mode&&(t.authMode=i.mode,16!=t.authMode&&18!=t.authMode&&66!=t.authMode&&64!=t.authMode&&(i.message="不支持的认证模式",a(i))),e(i)}).catch(function(e){console.log("(2)",e),t.hideLoading(),a(e)})})},simpAuth:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this,a={};i.isNia?(a.login_token=i.loginToken,a.identify_id=t.verify_result,a.cert_token=i.certToken,a.full_name=i.niaName,a.id_num=i.niaIdNum,a.reg_type="nia",a.nation=i.nation,a.id_type=i.idType,a.valid_end=i.expiryDate,a.birth_date=i.birthDay,a.sex=i.gender):(a.login_token=i.loginToken,a.identify_id=t.verify_result,a.cert_token=i.certToken,a.full_name=i.name,a.id_num=i.idNum,a.id_start_date=i.idStartDate&&i.idStartDate.split("-").join(""),a.id_end_date=i.idEndDate&&i.idEndDate.split("-").join(""),a.mode=i.authMode),this.showLoading(),this.$post("/simpauth",a,{port:i.port}).then(function(t){console.log("推送刷脸的结果",t),e.hideLoading(),t.data&&t.data.foreBackUrl?location.replace(t.data.foreBackUrl):0!=t.res_code?mui.alert(t.res_msg,"温馨提示",function(){i.backFn()}):mui.alert("系统故障(-1)，请稍后再试","温馨提示",function(){})}).catch(function(t){console.log("(6)"),e.hideLoading(),mui.alert(t.message||"发生异常(6)，请重试","温馨提示",function(){})})},register:function(){var e=this;this.showLoading(),this.$post("/register",{},{port:this.port}).then(function(t){if(e.hideLoading(),0!=t.res_code)return mui.alert(t.res_msg,"温馨提示",function(){}),!1}).catch(function(t){console.log("(7)",t),e.hideLoading(),mui.alert(t.message||"发生异常(7)，请重试","温馨提示",function(){})})},beforeAuthTips:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this;if(!this.certToken)return mui.alert("无相关参数(2)，请重试","温馨提示",function(){}),!1;console.log("检查设备是否支持人脸检测"),e.checkSupportFace().then(function(t){var i={certToken:e.certToken};e.showLoading(),e.$post("/mq/auth/tips",i,{port:e.port}).then(function(t){if(e.hideLoading(),0!=t.res_code)return mui.alert(t.res_msg,"温馨提示",function(){}),!1;e.authTipsInfo=t.authTipsInfo,e.openAuthPrompt()}).catch(function(t){console.log("(5)",t),e.hideLoading(),mui.alert(t.message||"发生异常(5)，请重试","温馨提示",function(){})})}).catch(function(e){console.log("(13)",e),mui.alert(e.message||"您的设备不支持人像识别校验",function(){})})},showLoading:function(){this.isLoading=!0,this.$refs.loadingRef.showLoading()},hideLoading:function(){this.isLoading=!1,this.$refs.loadingRef.hideLoading()},popoverEvent:function(){var e=this;mui.init({swipeBack:!0}),mui("body").on("shown",".mui-popover",function(t){e.maskToggle("show")}),mui("body").on("hidden",".mui-popover",function(t){e.maskToggle("hide")})},handleIdNumInput:function(e){var t=e.target.value;this.idNum=t.replace(/[^Xx0-9]/g,""),this.idNum=this.idNum.toUpperCase()},handleNameInput:function(e){var t=e.target.value;this.name=t.replace(/\s+/g,"")},handleNiaIdNumInput:function(e){var t=e.target.value;this.niaIdNum=t.replace(/[^A-Za-z0-9]/g,""),this.niaIdNum=this.niaIdNum.toUpperCase()},handleNiaNameInput:function(e){var t=e.target.value;this.niaName=t.replace(/\s+/g,"")},idTypePickerInit:function(e){return!1},birthDayPickerInit:function(){var e,t=this;(e=mui).init(),e(".birthday-picker")[0].addEventListener("tap",function(){var i=(new Date).getFullYear(),a={type:"date",beginYear:i-140,endYear:i},n=new e.DtPicker(a);n.show(function(e){console.log(e),t.birthDay=e.y.text+e.m.text+e.d.text,console.log("birthDay",t.birthDay),t.birthDayText=e.y.text+"年"+e.m.text+"月"+e.d.text+"日",n.dispose()})},!1)},expiryDatePickerInit:function(){var e,t=this;(e=mui).init(),e(".expirydate-picker")[0].addEventListener("tap",function(){var i=(new Date).getFullYear(),a={type:"date",beginYear:i,endYear:i+200},n=new e.DtPicker(a);n.show(function(e){console.log(e),t.expiryDate=e.y.text+e.m.text+e.d.text,console.log("expiryDate",t.expiryDate),t.expiryDateText=e.y.text+"年"+e.m.text+"月"+e.d.text+"日",n.dispose()})},!1)},backUrlParamsReset:function(e){console.log("backUrlParamsReset");var t="",i="";return e&&-1!=e.indexOf("?")&&(t="?certToken="+this.certToken+"&retCode=5204&errorMsg=用户取消认证",i=e.split("?")[0]+t),console.log(i),i},showStartTimePicker:function(){var e=this,t=new mui.DtPicker({type:"date",beginYear:(new Date).getFullYear()-50,endYear:(new Date).getFullYear()+50});t.ui.y.picker.setSelectedValue(this.idStartDate.split("-")[0]),t.ui.m.picker.setSelectedValue(this.idStartDate.split("-")[1]),t.ui.d.picker.setSelectedValue(this.idStartDate.split("-")[2]),t.show(function(t){e.idStartDate=t.y.value+"-"+t.m.value+"-"+t.d.value})},showEndTimePicker:function(){var e=this,t=new mui.DtPicker({type:"date",beginYear:(new Date).getFullYear()-50,endYear:(new Date).getFullYear()+50});t.ui.y.picker.setSelectedValue(this.idEndDate.split("-")[0]),t.ui.m.picker.setSelectedValue(this.idEndDate.split("-")[1]),t.ui.d.picker.setSelectedValue(this.idEndDate.split("-")[2]),t.show(function(t){e.idEndDate=t.y.value+"-"+t.m.value+"-"+t.d.value})},filterDate:function(e){return e?e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8):e}},filters:{filterName:function(e){return Object(d.hideCode)(e,0,e.length-1)},filterIdNumber:function(e){return Object(d.hideCode)(e,3,2)},filterPhone:function(e){return Object(d.hideCode)(e,3,4)},filterNiaIdNumber:function(e){return Object(d.hideCode)(e,3,2)}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[e.isReadOnly?i("div",[e._m(0),e._v(" "),i("form",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"mui-input-group"},[i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"name"}},[e._v("姓名")]),e._v(" "),i("div",{staticClass:"text-info"},[e._v(e._s(e._f("filterName")(e.name)))])]),e._v(" "),i("div",{staticClass:"mui-input-row bottomline-hide"},[i("label",{attrs:{for:"idnum"}},[e._v("证件号码")]),e._v(" "),i("div",{staticClass:"text-info"},[e._v(e._s(e._f("filterIdNumber")(e.idNum)))])]),e._v(" "),[16,18].includes(e.authMode)?i("div",{staticClass:"mui-input-row"},[i("label",[e._v("起始日期")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.idStartDate,expression:"idStartDate"}],attrs:{type:"text",readonly:"",placeholder:"请选择身份证有效期起始日期"},domProps:{value:e.idStartDate},on:{input:function(t){t.target.composing||(e.idStartDate=t.target.value)}}})]):e._e(),e._v(" "),[16,18].includes(e.authMode)?i("div",{staticClass:"mui-input-row"},[i("label",[e._v("截止日期")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.idEndDate,expression:"idEndDate"}],attrs:{type:"text",readonly:"",placeholder:"请选择身份证有效期截止日期"},domProps:{value:e.idEndDate},on:{input:function(t){t.target.composing||(e.idEndDate=t.target.value)}}})]):e._e()]),e._v(" "),i("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"mui-input-group"},[i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"nianame"}},[e._v("姓名")]),e._v(" "),i("div",{staticClass:"text-info"},[e._v(e._s(e._f("filterName")(e.niaName)))])]),e._v(" "),i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"niaidnum"}},[e._v("证件号码")]),e._v(" "),i("div",{staticClass:"text-info"},[e._v(e._s(e._f("filterNiaIdNumber")(e.niaIdNum)))])]),e._v(" "),i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"gender"}},[e._v("性别")]),e._v(" "),i("div",{staticClass:"text-info"},[e._v(e._s(1==e.gender?"男":"女"))])]),e._v(" "),i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"birthday"}},[e._v("出生日期")]),e._v(" "),i("div",{staticClass:"text-info"},[e._v(e._s(e.birthDayText))])]),e._v(" "),i("div",{staticClass:"mui-input-row bottomline-hide"},[i("label",{attrs:{for:"expirydate"}},[e._v("有效期至")]),e._v(" "),i("div",{staticClass:"text-info"},[e._v(e._s(e.expiryDateText))])])])]):e._e(),e._v(" "),e.isShowNextBtn?i("div",[e._m(1),e._v(" "),i("form",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"mui-input-group"},[i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"name"}},[e._v("姓名")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name,expression:"name",modifiers:{trim:!0}}],ref:"nameRef",staticClass:"mui-input-clear",attrs:{readonly:e.infoIsReadOnly,id:"name",type:"text",maxlength:"65",placeholder:"请输入姓名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"idnum"}},[e._v("证件号码")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.idNum,expression:"idNum"}],staticClass:"mui-input-clear",attrs:{readonly:e.infoIsReadOnly,id:"idnum",type:"text",maxlength:"18",placeholder:"请输入证件号码"},domProps:{value:e.idNum},on:{input:[function(t){t.target.composing||(e.idNum=t.target.value)},e.handleIdNumInput]}})]),e._v(" "),[16,18].includes(e.authMode)?i("div",{staticClass:"mui-input-row",on:{click:e.showStartTimePicker}},[i("label",[e._v("起始日期")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.idStartDate,expression:"idStartDate"}],attrs:{type:"text",readonly:"",placeholder:"请选择身份证有效期起始日期"},domProps:{value:e.idStartDate},on:{input:function(t){t.target.composing||(e.idStartDate=t.target.value)}}})]):e._e(),e._v(" "),[16,18].includes(e.authMode)?i("div",{staticClass:"mui-input-row",on:{click:e.showEndTimePicker}},[i("label",[e._v("截止日期")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.idEndDate,expression:"idEndDate"}],attrs:{type:"text",readonly:"",placeholder:"请选择身份证有效期截止日期"},domProps:{value:e.idEndDate},on:{input:function(t){t.target.composing||(e.idEndDate=t.target.value)}}})]):e._e()]),e._v(" "),i("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"mui-input-group"},[i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"nianame"}},[e._v("姓名")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.niaName,expression:"niaName",modifiers:{trim:!0}}],staticClass:"mui-input-clear",attrs:{id:"nianame",type:"text",maxlength:"65",placeholder:"请输入姓名"},domProps:{value:e.niaName},on:{input:function(t){t.target.composing||(e.niaName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"niaidnum"}},[e._v("证件号码")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.niaIdNum,expression:"niaIdNum"}],staticClass:"mui-input-clear",attrs:{id:"niaidnum",type:"text",maxlength:"18",placeholder:"请输入证件号码"},domProps:{value:e.niaIdNum},on:{input:[function(t){t.target.composing||(e.niaIdNum=t.target.value)},e.handleNiaIdNumInput]}})]),e._v(" "),i("div",{staticClass:"mui-input-row"},[i("label",{attrs:{for:"gender"}},[e._v("性别")]),e._v(" "),i("div",{staticClass:"gender-radio"},[i("div",{staticClass:"mui-radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{value:"1",name:"radio1",type:"radio",checked:""},domProps:{checked:e._q(e.gender,"1")},on:{change:function(t){e.gender="1"}}}),e._v(" "),i("label",[e._v("男")])]),e._v(" "),i("div",{staticClass:"mui-radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{value:"2",name:"radio1",type:"radio"},domProps:{checked:e._q(e.gender,"2")},on:{change:function(t){e.gender="2"}}}),e._v(" "),i("label",[e._v("女")])])])]),e._v(" "),i("div",{staticClass:"mui-input-row birthday-picker"},[i("label",{attrs:{for:"birthday"}},[e._v("出生日期")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.birthDayText,expression:"birthDayText"}],attrs:{id:"birthday",type:"text",placeholder:"请选择您的出生日期",readonly:""},domProps:{value:e.birthDayText},on:{input:function(t){t.target.composing||(e.birthDayText=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"mui-input-row expirydate-picker bottomline-hide"},[i("label",{attrs:{for:"expirydate"}},[e._v("有效期至")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.expiryDateText,expression:"expiryDateText"}],attrs:{id:"expirydate",type:"text",placeholder:"请选择证件有效期限至",readonly:""},domProps:{value:e.expiryDateText},on:{input:function(t){t.target.composing||(e.expiryDateText=t.target.value)}}})])]),e._v(" "),e.isShowNextBtn?i("div",{staticClass:"buttons"},[i("button",{staticClass:"mui-btn mui-btn-primary mui-btn-block",attrs:{type:"button"},on:{click:e.startNextStep}},[e._v("下一步")])]):e._e()]):e._e(),e._v(" "),e._m(2),e._v(" "),i("loading",{ref:"loadingRef"}),e._v(" "),i("div",{staticClass:"mui-popover mui-popover-action mui-popover-bottom",attrs:{id:"authpopup"}},[i("div",{staticClass:"authpopup-close",on:{click:e.closeAuthpopup}},[i("span",{staticClass:"mui-icon mui-icon-closeempty"})]),e._v(" "),i("div",{staticClass:"authpopup-title"},[e._v("认证授权")]),e._v(" "),i("div",{staticClass:"authpopup-info",domProps:{innerHTML:e._s(e.authTipsInfo.beforeAuth)}}),e._v(" "),64!=e.authMode&&144!=e.authMode||e.isUnregistered?i("div",{staticClass:"hinttext"},[e._v("\n      本次认证需要通过人脸识别验证身份信息\n    ")]):e._e(),e._v(" "),e.authTipsInfo.beforeProtocol?i("div",{staticClass:"authpopup-agreement"},[i("div",{staticClass:"mui-checkbox mui-left"},[i("label",[e._v(e._s(e.authTipsInfo.beforeProtocol)+"查看")]),e._v(" "),e.authTipsInfo.protocolList?i("a",{attrs:{href:e.authTipsInfo.protocolList[0].url}},[e._v(e._s(e.authTipsInfo.protocolList[0].name))]):e._e(),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.agreement,expression:"agreement"}],attrs:{name:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(e.agreement)?e._i(e.agreement,null)>-1:e.agreement},on:{change:function(t){var i=e.agreement,a=t.target,n=!!a.checked;if(Array.isArray(i)){var o=e._i(i,null);a.checked?o<0&&(e.agreement=i.concat([null])):o>-1&&(e.agreement=i.slice(0,o).concat(i.slice(o+1)))}else e.agreement=n}}})])]):e._e(),e._v(" "),i("div",{staticClass:"authpopup-btn"},[i("button",{staticClass:"mui-btn mui-btn-primary mui-btn-block",attrs:{type:"button"},on:{click:e.startToAuth}},[e._v("\n        确认授权\n      ")])])]),e._v(" "),e.authTipsInfo.protocolList&&e.authTipsInfo.protocolList[0].url&&e.showProtocol?i("div",{staticClass:"protocol-close",on:{click:e.closeProtocol}},[i("span",{staticClass:"mui-icon mui-icon-close"}),e._v("\n    关闭\n  ")]):e._e(),e._v(" "),e.authTipsInfo.protocolList&&e.authTipsInfo.protocolList[0].url&&e.showProtocol?i("iframe",{attrs:{scrolling:"auto",id:"iframe",src:e.authTipsInfo.protocolList[0].url,frameborder:"0"}}):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.maskShow,expression:"maskShow"}],staticClass:"mui-backdrop mui-backdrop-action mui-active"})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("form",{staticClass:"mui-input-group"},[t("div",{staticClass:"mui-input-row"},[t("label",{attrs:{for:"name"}},[this._v("证件类型")]),this._v(" "),t("div",{staticClass:"text-info"},[this._v("第二代居民身份证")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("form",{staticClass:"mui-input-group"},[t("div",{staticClass:"mui-input-row"},[t("label",{attrs:{for:"name"}},[this._v("证件类型")]),this._v(" "),t("div",{staticClass:"text-info"},[this._v("第二代居民身份证")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"index-logo"},[t("img",{attrs:{src:i("SSWp"),alt:""}})])}]};var p=i("VU/8")(l,m,!1,function(e){i("HBkd")},null,null).exports,h=i("0sGY");a.a.prototype.$post=h.b,a.a.prototype.$fetch=h.a,a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:p},template:"<App/>"})},SSWp:function(e,t,i){e.exports=i.p+"static/img/logo-index.png"},v7Tq:function(e,t){},w24O:function(e,t,i){e.exports={baseUrl:"https://sfrz.wsbs.shxga.gov.cn"}}},["N4Rm"]);