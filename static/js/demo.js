webpackJsonp([3,6],{"0sGY":function(e,t,a){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new r.a(function(i,r){e=(a.port||u)+e,o.a.get(e,{params:t},a).then(function(e){!0===a.isGetHeaders?i(e):i(e.data)}).catch(function(e){r(e)})})},t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new r.a(function(i,r){e=(a.port||u)+e;var n=sessionStorage.getItem("login_token");n&&(t.token=n),o.a.post(e,t,a).then(function(e){!0===a.isGetHeaders?i(e):i(e.data)},function(e){r(e)})})};var i=a("//Fk"),r=a.n(i),n=a("mtWM"),o=a.n(n),s=a("w24O"),u=(a.n(s),s.baseUrl);function l(e){console.log("请求错误",e);var t="";return e&&e.response&&-1!=e.message.indexOf("code")?(t="（"+(t=e.message.split("code ")[1])+"）",e.message="网络错误，请稍后重试"+t):e.message="网络错误，请稍后重试",e}o.a.defaults.timeout=3e4,o.a.defaults.headers.post["Content-Type"]="application/json",o.a.interceptors.request.use(function(e){return e.headers={"Content-Type":"application/json"},e.retry=1,e.retryDelay=1e3,e},function(e){return r.a.reject(e)}),o.a.interceptors.response.use(void 0,function(e){var t=e.config;return console.log("errconfig",t),t&&t.retry?(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry?(console.log("err2"),e=l(e),r.a.reject(e)):(t.__retryCount+=1,new r.a(function(e){setTimeout(function(){e()},t.retryDelay||1e3)}).then(function(){return o()(t)}))):(console.log("err1"),e=l(e),r.a.reject(e))})},"1lyH":function(e,t,a){var i=a("vLmZ").idTypeArr;e.exports={getIdTypeText:function(e,t){for(var a=i,r="",n=0;n<a.length;n++)if(a[n].value==e){r=a[n].text;break}if(101==e&&t){var o=t.substring(0,6);-1!=t.indexOf("*")&&(o=t.substring(0,3)),-1!=["810000","820000","830000"].indexOf(o)?r="港澳台居民居住证":-1!=["810","820","830"].indexOf(o)&&(r="港澳台居民居住证")}return r},getPhoneInfo:function(){var e={isWeiXin:!0,wxVersion:"",isHigherWx:!0,platform:"",isMobile:!0},t=navigator.userAgent;if(e.ua=t,e.mic=t.toLowerCase().match(/MicroMessenger/i),e.micArr=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i),"micromessenger"!=e.mic)e.isWeiXin=!1;else if(e.micArr&&2==e.micArr.length){e.wxVersion=e.micArr[1];try{e.isHigherWx=function(e,t){t=String(t),console.log("baseVersion",t);var a=[],i=t.split(".");if(e&&-1!=e.indexOf(".")){if((a=e.split("."))[0]){if(console.log("test1"),Number(a[0])<Number(i[0]))return!1;if(Number(a[0])>Number(i[0]))return!0}if(a[1]){if(console.log("test2"),Number(a[1])<Number(i[1]))return!1;if(Number(a[1])>Number(i[1]))return!0}if(a[2]){if(console.log("test3"),Number(a[2])<Number(i[2]))return!1;if(Number(a[2])>Number(i[2]))return!0}}return!0}(e.wxVersion,"6.7.2")}catch(e){console.log("error")}}return navigator.platform&&(e.platform=navigator.platform,-1==navigator.platform.indexOf("Mac")&&-1==navigator.platform.indexOf("Win")||(e.isMobile=!1)),console.log(e),e},getUrlParams:function(e){var t=new Object;if(e=String(e),-1!=(e=decodeURIComponent(e)).indexOf("?"))for(var a=e.substring(e.indexOf("?")+1).split("&"),i=0;i<a.length;i++)t[a[i].split("=")[0]]=unescape(a[i].split("=")[1]);return console.log("theRequest",t),t},checkIdNum:function(e,t){var a={pass:!0,tip:"校验通过"},i=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;if(18!=e.length)return a.pass=!1,a.tip="身份证号格式错误",a;if(2==t){if(!i.test(e))return a.pass=!1,a.tip="身份证号格式错误",a;for(var r=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,o=0;o<r.length;o++)n+=parseInt(e.charAt(o))*r[o];var s=["1","0","X","9","8","7","6","5","4","3","2"][n%11],u=e.charAt(17);return u="x"==u?"X":u,a.pass=u==s,a.pass?a.tip="校验通过":a.tip="身份证号校验码错误",a}return a.pass=i.test(e),a.pass?a.tip="校验通过":a.tip="身份证号格式错误",a},hideCode:function(e,t,a){if(!e)return"";for(var i=e.length-t-a,r="",n=0;n<i;n++)r+="*";return e.substring(0,t)+r+e.substring(e.length-a)},dateFormat:function(e,t){var a="(\\d{4})(\\d{1,2})(\\d{1,2})";t&&(a="(\\d{4})\\"+t+"(\\d{1,2})\\"+t+"(\\d{1,2})");var i=new RegExp(a,"i");return e="00000000"==(e=String(e))?"长期":e.replace(i,"$1年$2月$3日")}}},"5/fG":function(e,t){},"5qRC":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),r=a("1lyH"),n={name:"App",data:function(){return{port:"https://sfrz.wsbs.shxga.gov.cn/apiauth",jumpUrl:"https://sfrz.wsbs.shxga.gov.cn/authgzh/auth",backUrl:"https://sfrz.wsbs.shxga.gov.cn/shanxiauthweb/transfer.html",account:"dabby_dev",password:"dabby_dev_scrt",isNia:!1,name:"",idNum:"",niaName:"",idType:"",niaIdNum:"",idStartDate:"",idEndDate:"",nation:"CHN",gender:"",birthDay:"",expiryDate:"",authMode:66}},mounted:function(){},components:{},methods:{alertByPhoneInfo:function(){var e=Object(r.getPhoneInfo)();return e.isWeiXin?e.isHigherWx?void 0:(mui.alert("微信版本过低，请升级至6.7.2以上版本","温馨提示",function(){}),!1):(mui.alert("请在微信客户端中打开链接","温馨提示",function(){}),!1)},toggleAuthType:function(){this.isNia=!this.isNia},jumpToAuth:function(){this.getAccessToken()},getAccessToken:function(){var e=this,t={clientId:this.account,clientSecret:this.password};this.$fetch("/getaccesstoken",t,{port:this.port}).then(function(t){if(0!=t.retCode)return mui.alert(t.retMessage,"温馨提示",function(){}),!1;e.authReq({accessToken:t.accessToken})}).catch(function(e){mui.alert("发生异常，请重试","温馨提示",function(){})})},authReq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(console.log("test1"),!e.accessToken)return!1;var t=this,a={};this.isNia?(console.log("test2"),a={accessToken:e.accessToken,authType:"GzhRegular",niaMode:t.authMode,niaIdInfo:{idType:t.idType,nation:t.nation,idNumber:t.niaIdNum,name:t.niaName,sex:t.gender,birthDate:t.birthDay,expiryDate:t.expiryDate},extraParams:{fore_back_url:t.backUrl}}):a={accessToken:e.accessToken,authType:"GzhRegular",mode:t.authMode,idInfo:{idNum:t.idNum,fullName:t.name,idStartDate:this.idStartDate.split("-").join(""),idEndDate:this.idEndDate.split("-").join("")},extraParams:{fore_back_url:t.backUrl}},this.$post("/authreq",a,{port:t.port}).then(function(e){0==e.retCode?window.location.href=t.jumpUrl+"?certToken="+e.tokenInfo.certToken:mui.alert(e.retMessage,"温馨提示",function(){})}).catch(function(e){mui.alert("发生异常，请重试","温馨提示",function(){})})},showStartTimePicker:function(){var e=this,t=new mui.DtPicker({type:"date",beginYear:(new Date).getFullYear()-50,endYear:(new Date).getFullYear()+50});t.ui.y.picker.setSelectedValue(this.idStartDate.split("-")[0]),t.ui.m.picker.setSelectedValue(this.idStartDate.split("-")[1]),t.ui.d.picker.setSelectedValue(this.idStartDate.split("-")[2]),t.show(function(t){e.idStartDate=t.y.value+"-"+t.m.value+"-"+t.d.value})},showEndTimePicker:function(){var e=this,t=new mui.DtPicker({type:"date",beginYear:(new Date).getFullYear()-50,endYear:(new Date).getFullYear()+50});t.ui.y.picker.setSelectedValue(this.idEndDate.split("-")[0]),t.ui.m.picker.setSelectedValue(this.idEndDate.split("-")[1]),t.ui.d.picker.setSelectedValue(this.idEndDate.split("-")[2]),t.show(function(t){e.idEndDate=t.y.value+"-"+t.m.value+"-"+t.d.value})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("form",{directives:[{name:"show",rawName:"v-show",value:!e.isNia,expression:"!isNia"}],staticClass:"mui-input-group"},[a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"account"}},[e._v("账号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"mui-input-clear",attrs:{id:"account",type:"text",placeholder:"账号"},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row mui-password"},[a("label",{attrs:{for:"password"}},[e._v("密码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row mui-password"},[a("label",{attrs:{for:"mode"}},[e._v("认证模式")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.authMode,expression:"authMode"}],attrs:{id:"mode",type:"text",placeholder:"请输入认证模式（如66）"},domProps:{value:e.authMode},on:{input:function(t){t.target.composing||(e.authMode=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"name"}},[e._v("姓名")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"mui-input-clear",attrs:{id:"name",type:"text",placeholder:"姓名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"idnum"}},[e._v("证件号码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.idNum,expression:"idNum"}],staticClass:"mui-input-clear",attrs:{id:"idnum",type:"text",maxlength:"18",placeholder:"证件号码"},domProps:{value:e.idNum},on:{input:function(t){t.target.composing||(e.idNum=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row",on:{click:e.showStartTimePicker}},[a("label",[e._v("身份证有效期起始日期")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.idStartDate,expression:"idStartDate"}],attrs:{type:"text",readonly:"",placeholder:"请选择起始日期"},domProps:{value:e.idStartDate},on:{input:function(t){t.target.composing||(e.idStartDate=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row",on:{click:e.showEndTimePicker}},[a("label",[e._v("身份证有效期起始日期")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.idEndDate,expression:"idEndDate"}],attrs:{type:"text",readonly:"",placeholder:"请选择起始日期"},domProps:{value:e.idEndDate},on:{input:function(t){t.target.composing||(e.idEndDate=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"backurl"}},[e._v("认证结束后返回地址")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.backUrl,expression:"backUrl"}],attrs:{id:"backurl",rows:"3",placeholder:"请输入认证结束后返回地址"},domProps:{value:e.backUrl},on:{input:function(t){t.target.composing||(e.backUrl=t.target.value)}}})])]),e._v(" "),a("form",{directives:[{name:"show",rawName:"v-show",value:e.isNia,expression:"isNia"}],staticClass:"mui-input-group"},[a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"niaaccount"}},[e._v("账号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"mui-input-clear",attrs:{id:"niaaccount",type:"text",placeholder:"账号"},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row mui-password"},[a("label",{attrs:{for:"niapassword"}},[e._v("密码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"mui-input-password",attrs:{id:"niapassword",type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row mui-password"},[a("label",{attrs:{for:"mode"}},[e._v("认证模式")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.authMode,expression:"authMode"}],attrs:{id:"mode",placeholder:"请输入认证模式（如146）"},domProps:{value:e.authMode},on:{input:function(t){t.target.composing||(e.authMode=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"nianame"}},[e._v("姓名")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.niaName,expression:"niaName"}],staticClass:"mui-input-clear",attrs:{id:"nianame",type:"text",placeholder:"姓名"},domProps:{value:e.niaName},on:{input:function(t){t.target.composing||(e.niaName=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"idType"}},[e._v("证件类型")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.idType,expression:"idType"}],staticClass:"mui-input-clear",attrs:{id:"idType",type:"text",maxlength:"18",placeholder:"请输入证件类型（如414）"},domProps:{value:e.idType},on:{input:function(t){t.target.composing||(e.idType=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"niaidnum"}},[e._v("证件号码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.niaIdNum,expression:"niaIdNum"}],staticClass:"mui-input-clear",attrs:{id:"niaidnum",type:"text",placeholder:"证件号码"},domProps:{value:e.niaIdNum},on:{input:function(t){t.target.composing||(e.niaIdNum=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"native"}},[e._v("国家地区编码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nation,expression:"nation"}],staticClass:"mui-input-clear",attrs:{id:"native",type:"text",placeholder:"国家地区编码",value:"CHN"},domProps:{value:e.nation},on:{input:function(t){t.target.composing||(e.nation=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"gender"}},[e._v("性别")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],staticClass:"mui-input-clear",attrs:{id:"gender",type:"text",placeholder:"请输入性别（男1女2）"},domProps:{value:e.gender},on:{input:function(t){t.target.composing||(e.gender=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"birthday"}},[e._v("出生日期")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.birthDay,expression:"birthDay"}],staticClass:"mui-input-clear",attrs:{id:"birthday",type:"text",maxlength:"8",placeholder:"请输入出生日期（如19940612）"},domProps:{value:e.birthDay},on:{input:function(t){t.target.composing||(e.birthDay=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"expirydate"}},[e._v("有效期至")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.expiryDate,expression:"expiryDate"}],staticClass:"mui-input-clear",attrs:{id:"expirydate",type:"text",maxlength:"8",placeholder:"请输入有效期至（如20280606）"},domProps:{value:e.expiryDate},on:{input:function(t){t.target.composing||(e.expiryDate=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"mui-input-row"},[a("label",{attrs:{for:"backurl2"}},[e._v("认证结束后返回地址")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.backUrl,expression:"backUrl"}],attrs:{id:"backurl2",rows:"3",placeholder:"请输入认证结束后返回地址"},domProps:{value:e.backUrl},on:{input:function(t){t.target.composing||(e.backUrl=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"buttons"},[a("button",{staticClass:"mui-btn mui-btn-primary mui-btn-block",attrs:{type:"button"},on:{click:e.jumpToAuth}},[e._v("跳转认证")])])])},staticRenderFns:[]};var s=a("VU/8")(n,o,!1,function(e){a("5/fG")},null,null).exports,u=a("0sGY");i.a.prototype.$post=u.b,i.a.prototype.$fetch=u.a,i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:s},template:"<App/>"})},vLmZ:function(e,t){e.exports={idTypeArr:[{text:"第二代居民身份证",value:101},{value:101,text:"港澳台居民居住证"},{text:"普通护照",value:414},{text:"港澳居民来往内地通行证",value:516}],idTypeArr1:[{value:101,text:"第二代居民身份证"},{value:101,text:"港澳台居民居住证"}],idTypeArr2:[{value:414,text:"普通护照"},{value:516,text:"港澳居民来往内地通行证"}]}},w24O:function(e,t,a){e.exports={baseUrl:"https://sfrz.wsbs.shxga.gov.cn"}}},["5qRC"]);