import{d as M,r as n,i as y,f as i,o as N,c as $,g as o,w as t,a as B,e as c,h as L,B as S}from"./normalize.c5bfbc35.js";import{s as A,T}from"./index.e5dbe87c.js";import{l as f}from"./index.2d62ddaa.js";import"./index.e7feee8b.js";import{F as O,a as P,C as q}from"./index.9de7c726.js";import{R as z,a as G}from"./index.0049d9a1.js";import"./auth-task-logo.8dfd73fa.js";import"./certification-successful.526fe7c8.js";import"./logo.9e2f423b.js";const{VITE_DEMO_BASE_URL:k}=f();function H(_){return A({baseURL:k,url:"/getaccesstoken",method:"get",params:_})}function j(_){return A({baseURL:k,url:"/authreq",method:"post",data:_})}const X={class:"form-wrap"},Y=B("div",{class:"radio-title"},"\u76F4\u63A5\u8DF3\u8F6C",-1),J=c("\u751F\u6D3B\u53F7"),K=B("div",{class:"radio-title"},"\u8DF3\u8F6C\u7A7A\u767D\u9875\u9762\u540E\u91CD\u5B9A\u5411",-1),Q=c("\u751F\u6D3B\u53F7"),W=c("MINI PROGRAM"),Z={style:{margin:"16px"}},ee=c("\u63D0\u4EA4"),ue=B("br",null,null,-1),oe=c("v3 token"),ae=M({setup(_){const{VITE_CLIENT_ID:D,VITE_CLIENT_SECRET:I}=f(),h=n(D),F=n(I),g=n(66),C=n(""),V=n(""),U=["H5","MINI"],b=n("2"),p=n(""),x=async()=>{let{accessToken:l}=await H({clientId:h.value,clientSecret:F.value}),e=location.href.indexOf("?")===-1?location.href:location.href.substring(0,location.href.indexOf("?")),a={accessToken:l,authType:"GzhRegular",mode:g.value,extraParams:{foreBackUrl:e},businessInfo:{subject:"\u8EAB\u4EFD\u9A8C\u8BC1"},idInfo:{fullName:C.value,idNum:V.value}},{tokenInfo:s}=await j(a),{certToken:r}=s,v=Number(b.value),d;if(v){let m=U[v-1];const{MODE:u,VITE_DEMO_BASE_URL:E}=f();d=`${`${u==="production"?E:"https://sfrz.wsbs.shxga.gov.cn"}`}/authgzh/auth?certToken=${r}&env=${m}`}else{const{MODE:m,VITE_AUTH_BASE_URL:u,VITE_PROXY_AUTH_BASE_URL:E}=f();d=`${`${m==="production"?u:E}`}/auth?certToken=${r}`}window.location.replace(d)},R=()=>{if(!p.value)return T({message:"\u8BF7\u8F93\u5165token",forbidClick:!0});let l="https://sfrz.wsbs.shxga.gov.cn/authlife";return window.location.href=`${l}/authgzh/auth?certToken=${p.value}`};return y(()=>{let l=decodeURIComponent(window.location.href),e=l.substring(l.indexOf("?")+1);const s=new URLSearchParams(e).get("errorMsg");if(s)return T({message:`\u8BA4\u8BC1${s}`,forbidClick:!0})}),(l,e)=>{const a=i("van-field"),s=i("van-cell-group"),r=i("van-radio"),v=i("van-radio-group"),d=i("van-button"),m=i("van-form");return N(),$("div",X,[o(m,{onSubmit:x},{default:t(()=>[o(s,{inset:""},{default:t(()=>[o(a,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=u=>h.value=u),name:"\u8D26\u53F7",label:"\u8D26\u53F7",placeholder:"\u8D26\u53F7",clearable:"",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8D26\u53F7"}]},null,8,["modelValue"]),o(a,{modelValue:F.value,"onUpdate:modelValue":e[1]||(e[1]=u=>F.value=u),name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",clearable:"",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"]),o(a,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=u=>g.value=u),name:"\u8BA4\u8BC1\u6A21\u5F0F",label:"\u8BA4\u8BC1\u6A21\u5F0F",placeholder:"\u8BA4\u8BC1\u6A21\u5F0F",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BA4\u8BC1\u6A21\u5F0F"}]},null,8,["modelValue"]),o(a,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=u=>C.value=u),name:"\u59D3\u540D",label:"\u59D3\u540D",maxlength:"18",placeholder:"\u59D3\u540D"},null,8,["modelValue"]),o(a,{modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=u=>V.value=u),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"]),o(a,{modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=u=>p.value=u),name:"v3Token",label:"v3 Token",maxlength:"18",placeholder:"v3 Token"},null,8,["modelValue"])]),_:1}),o(v,{class:"radio-box",modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=u=>b.value=u)},{default:t(()=>[Y,o(r,{name:"0"},{default:t(()=>[J]),_:1}),K,o(r,{name:"1"},{default:t(()=>[Q]),_:1}),o(r,{name:"2"},{default:t(()=>[W]),_:1})]),_:1},8,["modelValue"]),B("div",Z,[o(d,{round:"",block:"",type:"primary","native-type":"submit"},{default:t(()=>[ee]),_:1}),ue,o(d,{round:"",block:"",type:"primary",onClick:R},{default:t(()=>[oe]),_:1})])]),_:1})])}}});L(ae).use(S).use(O).use(P).use(q).use(z).use(G).mount("#app");
