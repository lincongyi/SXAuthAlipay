var Q=Object.defineProperty,W=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var R=(t,s,l)=>s in t?Q(t,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[s]=l,S=(t,s)=>{for(var l in s||(s={}))Y.call(s,l)&&R(t,l,s[l]);if(N)for(var l of N(s))j.call(s,l)&&R(t,l,s[l]);return t},M=(t,s)=>W(t,X(s));import{d as K,r as B,s as L,H as Z,N as ee,ab as se,f as v,o as te,c as le,a as e,g as o,T as i,w as E,F as ce,e as p,t as n,h as oe,L as ue,B as ae,Y as ie}from"./normalize.729e6abb.js";import{s as U,T as ne,D as de}from"./index.9781687f.js";import{O as re}from"./index.c469097b.js";import{a as ve}from"./auth-task-logo.8dfd73fa.js";import{I as _e}from"./index.1d1dac34.js";import{a as Fe,R as he}from"./index.900a30b5.js";const O="https://sfrz.wsbs.shxga.gov.cn";function me(t){return U({baseURL:O,url:"/fama/demo/getcerttoken",method:"post",data:t})}function Be(t){return U({baseURL:O,url:"/fama/demo/getcerttokenimg",method:"post",data:t})}const Ee=navigator.userAgent,pe=/(msie\s|trident.*rv:)([\w.]+)/,Ae=/(firefox)\/([\w.]+)/,fe=/(opera).+version\/([\w.]+)/,ge=/(chrome)\/([\w.]+)/,Ce=/version\/([\w.]+).*(safari)/;function we(){return xe(Ee.toLowerCase())}function xe(t){let s=pe.exec(t);return s!==null?{browser:"IE",version:s[2]||"0"}:(s=Ae.exec(t),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=fe.exec(t),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=ge.exec(t),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=Ce.exec(t),s!==null?{browser:s[2]||"",version:s[1]||"0"}:{browser:"",version:"0"}))))}const De={class:"container"},be={class:"title"},ye=p(" \u9655\u897F\u5B9E\u4EBA\u8BA4\u8BC1 "),ke={class:"content"},Te=p(" \u5237\u65B0or\u751F\u6210\u4E8C\u7EF4\u7801 "),Ie=p("\u5B9E\u540D"),Ne=p("\u5B9E\u540D+\u5B9E\u4EBA"),Re=e("div",{class:"tips"},"\u8BF7\u4F7F\u7528\u9655\u897F\u516C\u6C11\u5B9E\u4EBA\u8BA4\u8BC1\u5C0F\u7A0B\u5E8F\u626B\u7801\u8BA4\u8BC1",-1),Se={class:"overlay-content"},Me={class:"overlay-container"},Le={class:"section"},Ue={class:"card"},Oe=e("div",{class:"card-title"},"\u8EAB\u4EFD\u4FE1\u606F",-1),$e={class:"cell mgt10"},Ve=e("div",{class:"cell-title"},"\u7167\u7247\uFF1A",-1),ze={class:"cell-value"},He={class:"cell"},Je=e("div",{class:"cell-title"},"\u59D3\u540D\uFF1A",-1),Ge={class:"cell-value"},Pe={class:"cell"},qe=e("div",{class:"cell-title"},"\u8EAB\u4EFD\u53F7\u7801\uFF1A",-1),Qe={class:"cell-value"},We=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8B66\u53F7/\u5DE5\u53F7\uFF1A"),e("div",{class:"cell-value"})],-1),Xe=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u5355\u4F4D\uFF1A"),e("div",{class:"cell-value"})],-1),Ye={class:"cell"},je=e("div",{class:"cell-title"},"\u624B\u673A\u53F7\uFF1A",-1),Ke={class:"cell-value"},Ze=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7F51\u8BC1\u6807\u8BC6\uFF1A"),e("div",{class:"cell-value"})],-1),es={class:"section"},ss={class:"card"},ts=e("div",{class:"card-title"},"\u8BA4\u8BC1\u4FE1\u606F",-1),ls=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BA4\u8BC1\u5E73\u53F0\uFF1A"),e("div",{class:"cell-value"},"\u9655\u897F\u7701\u5B9E\u4EBA\u8BA4\u8BC1\u5E73\u53F0")],-1),cs={class:"cell"},os=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u6A21\u5F0F\uFF1A",-1),us={class:"cell-value"},as={class:"cell"},is=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u7C7B\u578B\uFF1A",-1),ns={class:"cell-value"},ds={class:"cell"},rs=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u7B49\u7EA7\uFF1A",-1),vs={class:"cell-value"},_s={class:"card"},Fs=e("div",{class:"card-title"},"\u7EC8\u7AEF\u4FE1\u606F",-1),hs={class:"cell"},ms=e("div",{class:"cell-title"},"\u7EC8\u7AEF\u7CFB\u7EDF/\u7248\u672C\uFF1A",-1),Bs={class:"cell-value"},Es=e("div",{class:"cell-title"},"\u7EC8\u7AEF\u5355\u4F4D\uFF1A",-1),ps=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7EC8\u7AEFMac\u5730\u5740\uFF1A"),e("div",{class:"cell-value"})],-1),As=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7EC8\u7AEFip\u5730\u5740\uFF1A"),e("div",{class:"cell-value"})],-1),fs=e("div",{class:"card"},[e("div",{class:"card-title"},"\u624B\u673A\u4FE1\u606F"),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BBE\u5907ID(IMEI/UUID)\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u624B\u673A\u5382\u5BB6/\u578B\u53F7\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7CFB\u7EDF\u7C7B\u522B/\u7248\u672C\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u4E0A\u7F51\u65B9\u5F0F\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BA4\u8BC1\u8F6F\u4EF6/\u7248\u672C\uFF1A"),e("div",{class:"cell-value"})])],-1),gs={class:"card"},Cs=e("div",{class:"card-title"},"\u65F6\u7A7A\u4FE1\u606F",-1),ws={class:"cell"},xs=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u65F6\u95F4\uFF1A",-1),Ds={class:"cell-value"},bs=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u5730\u7406\u4F4D\u7F6E\uFF1A"),e("div",{class:"cell-value"})],-1),ys={class:"btn-wrap"},ks=p("\u5173\u95ED"),Ts=K({setup(t){const l=B(!1),$=B(""),w=B(""),g=B(!1),x=B(""),D="\u5927\u767D\u4E92\u8054\u7F51\u79D1\u6280\u6709\u9650\u516C\u53F8";let u=L({}),A=L({certAnnexType:0,mode:"66"});const V=[{mode:64,level:"D"},{mode:66,level:"C"}],z=Z(()=>{let r=Number(A.mode),a=V.find(c=>c.mode===r);return a==null?void 0:a.level});let{browser:b,version:y}=we();const k=async r=>{let a=await me(M(S({},A),{businessExtraInfo:JSON.stringify({terminalUnit:D,system:`${b}/${y}`})})),{img:c,cert_token:_}=a.data;$.value=_,w.value=`data:image/png;base64,${c}`,G(_),r&&r()};let C,d;const H="wss://sfrz.wsbs.shxga.gov.cn/socket/conn",J=30,G=r=>{d=new WebSocket(H),d.onopen=()=>{d.send(JSON.stringify({flag:"getCertCode",cert_token:r})),C=setInterval(()=>{d.send("{}")},J*1e3)},d.onmessage=async({data:a})=>{let c=JSON.parse(a);u.name=c.full_name,u.idNum=c.id_no,u.mode=c.mode,u.time=c.createdTime;let _=c.cert_token,f=await Be({certToken:_}),{authInfo:h,img:F,userInfo:m}=f;u.authType=h==null?void 0:h.authType,u.phoneNum=m==null?void 0:m.phoneNum,x.value=`data:image/png;base64,${F}`,g.value=!0},d.onclose=()=>{clearInterval(C),C=null}},T=()=>{l.value=!0,k(()=>{setTimeout(()=>{l.value=!1},3*1e3)})},P=()=>{if(l.value)return ne({message:"\u8BF7\u52FF\u9891\u7E41\u5237\u65B0\u4E8C\u7EF4\u7801",forbidClick:!0});T()};return ee(()=>{k()}),se(()=>{d.close()}),(r,a)=>{const c=v("van-image"),_=v("van-icon"),f=v("van-radio"),h=v("van-radio-group"),F=v("van-divider"),m=v("van-button"),q=v("van-overlay");return te(),le(ce,null,[e("div",De,[e("div",be,[o(c,{class:"logo",width:"40px",height:"40px",fit:"contain",src:i(ve)},null,8,["src"]),ye]),e("div",ke,[o(c,{width:"280px",height:"280px",fit:"contain",src:w.value},null,8,["src"]),e("div",{class:"refresh",onClick:P},[o(_,{name:"replay"}),Te]),o(h,{modelValue:i(A).mode,"onUpdate:modelValue":a[0]||(a[0]=I=>i(A).mode=I),direction:"horizontal",onChange:T},{default:E(()=>[o(f,{name:"64"},{default:E(()=>[Ie]),_:1}),o(f,{name:"66"},{default:E(()=>[Ne]),_:1})]),_:1},8,["modelValue"]),Re])]),o(q,{show:g.value},{default:E(()=>[e("div",Se,[e("div",Me,[e("div",Le,[e("div",Ue,[Oe,e("div",$e,[Ve,e("div",ze,[o(c,{width:"120px",height:"160px",fit:"contain",src:x.value},null,8,["src"])])]),e("div",He,[Je,e("div",Ge,n(i(u).name),1)]),e("div",Pe,[qe,e("div",Qe,n(i(u).idNum),1)]),We,Xe,e("div",Ye,[je,e("div",Ke,n(i(u).phoneNum),1)]),Ze])]),e("div",es,[e("div",ss,[ts,ls,e("div",cs,[os,e("div",us,n(i(u).mode),1)]),e("div",as,[is,e("div",ns,n(i(u).authType),1)]),e("div",ds,[rs,e("div",vs,n(i(z)),1)])]),o(F),e("div",_s,[Fs,e("div",hs,[ms,e("div",Bs,n(`${i(b)}/${i(y)}`),1)]),e("div",{class:"cell"},[Es,e("div",{class:"cell-value"},n(D))]),ps,As]),o(F),fs,o(F),e("div",gs,[Cs,e("div",ws,[xs,e("div",Ds,n(i(u).time),1)]),bs])])]),o(F),e("div",ys,[o(m,{type:"primary",block:"",plain:"",onClick:a[1]||(a[1]=I=>g.value=!1)},{default:E(()=>[ks]),_:1})])])]),_:1},8,["show"])],64)}}});oe(Ts).use(ue).use(_e).use(ae).use(ie).use(Fe).use(he).use(re).use(de).mount("#app");
