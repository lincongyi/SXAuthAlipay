import{j as E,s as B,m as P,aj as se,P as T,k as z,f as o,X as L,ab as W,Z as Y,Y as Ae,ag as ie,Q as ce,q as G,I as U,S as re,ak as Ne,C as I,al as Le,D as K,M as ue,af as de,a2 as Ue,r as g,v as fe,am as Ee,A as N,a6 as R,H as Me,N as De,an as Fe,l as qe,ao as ve,z as Ge,e as O,o as D,c as He,a as w,w as $,F as je,ap as j,u as oe,aq as Re,ar as Ke,d as H,g as Je,B as Xe}from"./normalize.5e74b651.js";import{p as Ye,b as Qe,P as me,m as Ze,u as We,c as he,s as ee,D as en,F as nn,a as an,C as tn,N as on}from"./index.0152b24d.js";import{_ as ln}from"./logo.7b697e1d.js";const[sn,_]=E("action-sheet"),cn=B({},Ye,{title:String,round:P,actions:se(),closeIcon:T("cross"),closeable:P,cancelText:String,description:String,closeOnPopstate:P,closeOnClickAction:Boolean,safeAreaInsetBottom:P}),rn=[...Qe,"round","closeOnPopstate","safeAreaInsetBottom"];var un=z({name:sn,props:cn,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:a}){const i=s=>a("update:show",s),r=()=>{i(!1),a("cancel")},l=()=>{if(e.title)return o("div",{class:_("header")},[e.title,e.closeable&&o(Y,{name:e.closeIcon,class:[_("close"),Ae],onClick:r},null)])},m=()=>{if(n.cancel||e.cancelText)return[o("div",{class:_("gap")},null),o("button",{type:"button",class:_("cancel"),onClick:r},[n.cancel?n.cancel():e.cancelText])]},c=(s,t)=>s.loading?o(ie,{class:_("loading-icon")},null):n.action?n.action({action:s,index:t}):[o("span",{class:_("name")},[s.name]),s.subname&&o("div",{class:_("subname")},[s.subname])],v=(s,t)=>{const{color:f,loading:b,callback:k,disabled:d,className:S}=s,V=()=>{d||b||(k&&k(s),e.closeOnClickAction&&i(!1),ce(()=>a("select",s,t)))};return o("button",{type:"button",style:{color:f},class:[_("item",{loading:b,disabled:d}),S],onClick:V},[c(s,t)])},u=()=>{if(e.description||n.description){const s=n.description?n.description():e.description;return o("div",{class:_("description")},[s])}};return()=>o(me,L({class:_(),position:"bottom","onUpdate:show":i},W(e,rn)),{default:()=>{var s;return[l(),u(),o("div",{class:_("content")},[e.actions.map(v),(s=n.default)==null?void 0:s.call(n)]),m()]}})}});const dn=G(un);let F=0;function fn(e){e?(F||document.body.classList.add("van-toast--unclickable"),F++):F&&(F--,F||document.body.classList.remove("van-toast--unclickable"))}const[vn,q]=E("toast"),mn=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],hn={icon:String,show:Boolean,type:T("text"),overlay:Boolean,message:I,iconSize:I,duration:Le(2e3),position:T("middle"),teleport:[String,Object],className:K,iconPrefix:String,transition:T("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:K,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ge=z({name:vn,props:hn,emits:["update:show"],setup(e,{emit:n}){let a,i=!1;const r=()=>{const s=e.show&&e.forbidClick;i!==s&&(i=s,fn(i))},l=s=>n("update:show",s),m=()=>{e.closeOnClick&&l(!1)},c=()=>clearTimeout(a),v=()=>{const{icon:s,type:t,iconSize:f,iconPrefix:b,loadingType:k}=e;if(s||t==="success"||t==="fail")return o(Y,{name:s||t,size:f,class:q("icon"),classPrefix:b},null);if(t==="loading")return o(ie,{class:q("loading"),size:f,type:k},null)},u=()=>{const{type:s,message:t}=e;if(ue(t)&&t!=="")return s==="html"?o("div",{key:0,class:q("text"),innerHTML:String(t)},null):o("div",{class:q("text")},[t])};return U(()=>[e.show,e.forbidClick],r),U(()=>[e.show,e.type,e.message,e.duration],()=>{c(),e.show&&e.duration>0&&(a=setTimeout(()=>{l(!1)},e.duration))}),re(r),Ne(r),()=>o(me,L({class:[q([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:m,onClosed:c,"onUpdate:show":l},W(e,mn)),{default:()=>[v(),u()]})}});const be={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let C=[],Q=!1,J=B({},be);const X=new Map;function ke(e){return Ue(e)?e:{message:e}}function gn(){const{instance:e,unmount:n}=Ze({setup(){const a=g(""),{open:i,state:r,close:l,toggle:m}=We(),c=()=>{Q&&(C=C.filter(u=>u!==e),n())},v=()=>o(ge,L(r,{onClosed:c,"onUpdate:show":m}),null);return U(a,u=>{r.message=u}),fe().render=v,{open:i,clear:l,message:a}}});return e}function bn(){if(!C.length||Q){const e=gn();C.push(e)}return C[C.length-1]}function y(e={}){if(!de)return{};const n=bn(),a=ke(e);return n.open(B({},J,X.get(a.type||J.type),a)),n}const ne=e=>n=>y(B({type:e},ke(n)));y.loading=ne("loading");y.success=ne("success");y.fail=ne("fail");y.clear=e=>{var n;C.length&&(e?(C.forEach(a=>{a.clear()}),C=[]):Q?(n=C.shift())==null||n.clear():C[0].clear())};function kn(e,n){typeof e=="string"?X.set(e,n):B(J,e)}y.setDefaultOptions=kn;y.resetDefaultOptions=e=>{typeof e=="string"?X.delete(e):(J=B({},be),X.clear())};y.allowMultiple=(e=!0)=>{Q=e};y.install=e=>{e.use(G(ge)),e.config.globalProperties.$toast=y};const pe={name:K,shape:T("round"),disabled:Boolean,iconSize:I,modelValue:K,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var pn=z({props:B({},pe,{bem:Ee(Function),role:String,parent:Object,checked:Boolean,bindGroup:P}),emits:["click","toggle"],setup(e,{emit:n,slots:a}){const i=g(),r=t=>{if(e.parent&&e.bindGroup)return e.parent.props[t]},l=N(()=>r("disabled")||e.disabled),m=N(()=>r("direction")),c=N(()=>{const t=e.checkedColor||r("checkedColor");if(t&&e.checked&&!l.value)return{borderColor:t,backgroundColor:t}}),v=t=>{const{target:f}=t,b=i.value,k=b===f||(b==null?void 0:b.contains(f));!l.value&&(k||!e.labelDisabled)&&n("toggle"),n("click",t)},u=()=>{const{bem:t,shape:f,checked:b}=e,k=e.iconSize||r("iconSize");return o("div",{ref:i,class:t("icon",[f,{disabled:l.value,checked:b}]),style:{fontSize:R(k)}},[a.icon?a.icon({checked:b,disabled:l.value}):o(Y,{name:"success",style:c.value},null)])},s=()=>{if(a.default)return o("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[a.default()])};return()=>{const t=e.labelPosition==="left"?[s(),u()]:[u(),s()];return o("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},m.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:v},[t])}}});const[yn,A]=E("image"),_n={src:String,alt:String,fit:String,position:String,round:Boolean,width:I,height:I,radius:I,lazyLoad:Boolean,iconSize:I,showError:P,errorIcon:T("photo-fail"),iconPrefix:String,showLoading:P,loadingIcon:T("photo")};var Cn=z({name:yn,props:_n,emits:["load","error"],setup(e,{emit:n,slots:a}){const i=g(!1),r=g(!0),l=g(),{$Lazyload:m}=fe().proxy,c=N(()=>{const d={width:R(e.width),height:R(e.height)};return ue(e.radius)&&(d.overflow="hidden",d.borderRadius=R(e.radius)),d});U(()=>e.src,()=>{i.value=!1,r.value=!0});const v=d=>{r.value=!1,n("load",d)},u=d=>{i.value=!0,r.value=!1,n("error",d)},s=(d,S,V)=>V?V():o(Y,{name:d,size:e.iconSize,class:S,classPrefix:e.iconPrefix},null),t=()=>{if(r.value&&e.showLoading)return o("div",{class:A("loading")},[s(e.loadingIcon,A("loading-icon"),a.loading)]);if(i.value&&e.showError)return o("div",{class:A("error")},[s(e.errorIcon,A("error-icon"),a.error)])},f=()=>{if(i.value||!e.src)return;const d={alt:e.alt,class:A("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?De(o("img",L({ref:l},d),null),[[Fe("lazy"),e.src]]):o("img",L({src:e.src,onLoad:v,onError:u},d),null)},b=({el:d})=>{const S=()=>{d===l.value&&r.value&&v()};l.value?S():ce(S)},k=({el:d})=>{d===l.value&&!i.value&&u()};return m&&de&&(m.$on("loaded",b),m.$on("error",k),Me(()=>{m.$off("loaded",b),m.$off("error",k)})),()=>{var d;return o("div",{class:A({round:e.round}),style:c.value},[f(),t(),(d=a.default)==null?void 0:d.call(a)])}}});const wn=G(Cn),[ye,Sn]=E("checkbox-group"),xn={max:I,disabled:Boolean,iconSize:I,direction:String,modelValue:se(),checkedColor:String},_e=Symbol(ye);z({name:ye,props:xn,emits:["change","update:modelValue"],setup(e,{emit:n,slots:a}){const{children:i,linkChildren:r}=qe(_e),l=c=>n("update:modelValue",c),m=(c={})=>{typeof c=="boolean"&&(c={checked:c});const{checked:v,skipDisabled:u}=c,t=i.filter(f=>f.props.bindGroup?f.props.disabled&&u?f.checked.value:v!=null?v:!f.checked.value:!1).map(f=>f.name);l(t)};return U(()=>e.modelValue,c=>n("change",c)),he({toggleAll:m}),ve(()=>e.modelValue),r({props:e,updateValue:l}),()=>{var c;return o("div",{class:Sn([e.direction])},[(c=a.default)==null?void 0:c.call(a)])}}});const[Pn,In]=E("checkbox"),Vn=B({},pe,{bindGroup:P});var On=z({name:Pn,props:Vn,emits:["change","update:modelValue"],setup(e,{emit:n,slots:a}){const{parent:i}=Ge(_e),r=c=>{const{name:v}=e,{max:u,modelValue:s}=i.props,t=s.slice();if(c)!(u&&t.length>=u)&&!t.includes(v)&&(t.push(v),e.bindGroup&&i.updateValue(t));else{const f=t.indexOf(v);f!==-1&&(t.splice(f,1),e.bindGroup&&i.updateValue(t))}},l=N(()=>i&&e.bindGroup?i.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),m=(c=!l.value)=>{i&&e.bindGroup?r(c):n("update:modelValue",c)};return U(()=>e.modelValue,c=>n("change",c)),he({toggle:m,props:e,checked:l}),ve(()=>e.modelValue),()=>o(pn,L({bem:In,role:"checkbox",parent:i,checked:l.value,onToggle:m},e),W(a,["default","icon"]))}});const Tn=G(On),[Bn,$n]=E("divider"),zn={dashed:Boolean,hairline:P,contentPosition:T("center")};var An=z({name:Bn,props:zn,setup(e,{slots:n}){return()=>{var a;return o("div",{role:"separator",class:$n({dashed:e.dashed,hairline:e.hairline,[`content-${e.contentPosition}`]:!!n.default})},[(a=n.default)==null?void 0:a.call(n)])}}});const Nn=G(An);function Ln(e){return ee({url:"/checkIdentityInfo",method:"post",data:e})}function Un(e){return ee({url:"/getBeforeAuthTips",method:"post",data:e})}function En(e){return ee({url:"/alipayAuthInit",method:"post",data:e})}var Mn="./assets/auth-logo.cdd60c32.png";function le(e,n,a){if(!e)return"";for(var i=e.length-n-a,r="",l=0;l<i;l++)r+="*";return e.substring(0,n)+r+e.substring(e.length-a)}function Dn(e){return new URL({"/src/assets/auth-logo.png":Mn,"/src/assets/logo.png":ln}[`/src/assets/${e}.png`],self.location).href}const Fn={class:"form-wrap"},qn={style:{margin:"16px"}},Gn=H("\u63D0\u4EA4"),Hn={class:"auth-logo"},jn=H("\u52A0\u8F7D\u5931\u8D25"),Rn={class:"content"},Kn=["innerHTML"],Jn={class:"lower-tips"},Xn=["innerHTML"],Yn=H(" \u67E5\u770B "),Qn=["onClick","innerHTML"],Zn={class:"btn-group"},Wn=H("\u53D6\u6D88\u6388\u6743"),ea=H("\u786E\u8BA4\u6388\u6743"),na={setup(e){const n=g(""),a=g(""),i=g(""),r=g(!1),l=g(""),m=g(!1),c=g(""),v=g(!1),u=g(!1),s=N(()=>a.value&&l.value),t=window.location.href.substring(window.location.href.indexOf("?")+1);t.includes("&")||(en.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const f=t.split("&"),b=f[0].replace(/loginToken=/g,""),k=f[1].replace(/certToken=/g,""),d=g(""),S=g(""),V=g({}),ae=g(""),te=g("");re(async()=>{let{data:x}=await Ln({loginToken:b,certToken:k});n.value=x.foreBackUrl,x.userStatus!==2&&(a.value=x.fullName,i.value=le(a.value,0,a.value.length-1),l.value=x.idNum,c.value=le(l.value,3,2),r.value=m.value=!0,a.value&&l.value&&(v.value=!0));let{data:h}=await Un({certToken:k});d.value=h.beforeAuth,S.value=h.beforeProtocol,V.value=JSON.parse(h.protocols)[0]});const Ce={}.VITE_SERVICE_AGREEMENT,we=()=>{window.location.href=V.value.url||Ce},Se=()=>{u.value=!1,y("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(n.value)},1e3)},xe=()=>{v.value=!0},Pe=async()=>{if(!u.value)return y("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");let{data:x}=await En({certToken:k,fullName:a.value,idNum:l.value});te.value=x.certifyId,ae.value=x.certifyUrl,v.value=!1,u.value=!1,Ie(te.value,ae.value)},Ie=(x,h)=>{console.log(window.AlipayJSBridge)};return(x,h)=>{const M=O("van-field"),Ve=O("van-cell-group"),Z=O("van-button"),Oe=O("van-image"),Te=O("van-form"),Be=O("van-divider"),$e=O("van-checkbox"),ze=O("van-action-sheet");return D(),He(je,null,[w("div",Fn,[o(Te,{onSubmit:xe},{default:$(()=>[o(Ve,{inset:""},{default:$(()=>[o(M,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),r.value?(D(),j(M,{key:0,modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=p=>i.value=p),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])):(D(),j(M,{key:1,modelValue:a.value,"onUpdate:modelValue":h[1]||(h[1]=p=>a.value=p),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),m.value?(D(),j(M,{key:2,modelValue:c.value,"onUpdate:modelValue":h[2]||(h[2]=p=>c.value=p),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(D(),j(M,{key:3,modelValue:l.value,"onUpdate:modelValue":h[3]||(h[3]=p=>l.value=p),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"]))]),_:1}),w("div",qn,[o(Z,{square:"",block:"",type:"primary",disabled:!oe(s),"native-type":"submit"},{default:$(()=>[Gn]),_:1},8,["disabled"])]),w("div",Hn,[o(Oe,{src:oe(Dn)("auth-logo")},{error:$(()=>[jn]),_:1},8,["src"])])]),_:1})]),o(ze,{show:v.value,"onUpdate:show":h[6]||(h[6]=p=>v.value=p),title:"\u8BA4\u8BC1\u6388\u6743111"},{default:$(()=>[w("div",Rn,[w("div",{class:"upper-tips",innerHTML:d.value},null,8,Kn),o(Be),w("div",Jn,[o($e,{modelValue:u.value,"onUpdate:modelValue":h[4]||(h[4]=p=>u.value=p),shape:"square"},null,8,["modelValue"]),w("p",{class:"text",onClick:h[5]||(h[5]=p=>u.value=!u.value)},[w("span",{innerHTML:S.value},null,8,Xn),Yn,w("a",{class:"service-link",onClick:Re(we,["stop"]),innerHTML:V.value.name},null,8,Qn)])]),w("div",Zn,[o(Z,{square:"",plain:"",type:"primary",class:"authorize-btn to-cancel-authorize-btn",onClick:Se},{default:$(()=>[Wn]),_:1}),o(Z,{square:"",type:"primary",class:Ke(["to-authorize-btn","authorize-btn",{active:u.value}]),onClick:Pe},{default:$(()=>[ea]),_:1},8,["class"])])])]),_:1},8,["show"])],64)}}};Je(na).use(Xe).use(nn).use(an).use(tn).use(on).use(dn).use(Nn).use(Tn).use(wn).mount("#app");
