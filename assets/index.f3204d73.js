import{i as $,n as d,z as L,M as z,d as b,r as u,Q as k,m as B,G as D,O as j,ah as C,g as a,k as f,E as N,al as R,aw as U,J as P,a6 as _,I as F,l as G}from"./normalize.4c5ed6a5.js";const[J,o]=$("image"),M={src:String,alt:String,fit:String,position:String,round:Boolean,width:d,height:d,radius:d,lazyLoad:Boolean,iconSize:d,showError:L,errorIcon:z("photo-fail"),iconPrefix:String,showLoading:L,loadingIcon:z("photo")};var O=b({name:J,props:M,emits:["load","error"],setup(e,{emit:g,slots:s}){const n=u(!1),i=u(!0),l=u(),{$Lazyload:t}=k().proxy,S=B(()=>{const r={width:f(e.width),height:f(e.height)};return N(e.radius)&&(r.overflow="hidden",r.borderRadius=f(e.radius)),r});D(()=>e.src,()=>{n.value=!1,i.value=!0});const v=r=>{i.value=!1,g("load",r)},h=r=>{n.value=!0,i.value=!1,g("error",r)},m=(r,c,y)=>y?y():a(F,{name:r,size:e.iconSize,class:c,classPrefix:e.iconPrefix},null),x=()=>{if(i.value&&e.showLoading)return a("div",{class:o("loading")},[m(e.loadingIcon,o("loading-icon"),s.loading)]);if(n.value&&e.showError)return a("div",{class:o("error")},[m(e.errorIcon,o("error-icon"),s.error)])},E=()=>{if(n.value||!e.src)return;const r={alt:e.alt,class:o("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?R(a("img",P({ref:l},r),null),[[U("lazy"),e.src]]):a("img",P({src:e.src,onLoad:v,onError:h},r),null)},w=({el:r})=>{const c=()=>{r===l.value&&i.value&&v()};l.value?c():_(c)},I=({el:r})=>{r===l.value&&!n.value&&h()};return t&&j&&(t.$on("loaded",w),t.$on("error",I),C(()=>{t.$off("loaded",w),t.$off("error",I)})),()=>{var r;return a("div",{class:o({round:e.round}),style:S.value},[E(),x(),(r=s.default)==null?void 0:r.call(s)])}}});const T=G(O);export{T as I};
