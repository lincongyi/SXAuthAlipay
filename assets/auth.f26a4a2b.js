import{q,J as ge,I as A,z as ye,K as le,d as H,g as t,a2 as Be,a7 as Ce,T as Le,O as ke,M as xe,_ as Ge,Q as ne,L as qe,D as ue,aa as be,y as W,C as Re,i as O,r as f,E as Je,H as je,as as Qe,ak as We,al as Xe,aj as Ye,at as Ze,ai as et,ao as tt,j as at,f as _,o as F,c as L,a as E,w as N,F as J,au as j,u as U,k as fe,l as he,av as lt,e as X,h as nt,B as ut}from"./normalize.c453d6e5.js";import{c as ot,a as st,s as Y,T as te,D as it}from"./index.f8023e9b.js";import{p as rt,e as ct,P as De,a as we,u as dt,D as mt}from"./certification-successful.d2eaa402.js";import{h as pe,g as vt,f as Q,l as ft}from"./index.dd9fe55f.js";import{F as ht,a as pt,C as gt,D as yt}from"./index.8c89d61b.js";import{I as Bt}from"./index.e76d96c5.js";import"./logo.9e2f423b.js";const[Ct,b]=q("action-sheet"),kt=ge({},rt,{title:String,round:A,actions:ye(),closeIcon:le("cross"),closeable:A,cancelText:String,description:String,closeOnPopstate:A,closeOnClickAction:Boolean,safeAreaInsetBottom:A}),xt=[...ct,"round","closeOnPopstate","safeAreaInsetBottom"];var bt=H({name:Ct,props:kt,emits:["select","cancel","update:show"],setup(e,{slots:l,emit:u}){const s=d=>u("update:show",d),B=()=>{s(!1),u("cancel")},h=()=>{if(e.title)return t("div",{class:b("header")},[e.title,e.closeable&&t(Le,{name:e.closeIcon,class:[b("close"),ke],onClick:B},null)])},k=()=>{if(l.cancel||e.cancelText)return[t("div",{class:b("gap")},null),t("button",{type:"button",class:b("cancel"),onClick:B},[l.cancel?l.cancel():e.cancelText])]},i=(d,m)=>d.loading?t(xe,{class:b("loading-icon")},null):l.action?l.action({action:d,index:m}):[t("span",{class:b("name")},[d.name]),d.subname&&t("div",{class:b("subname")},[d.subname])],p=(d,m)=>{const{color:y,loading:D,callback:w,disabled:n,className:r}=d,v=()=>{n||D||(w&&w(d),e.closeOnClickAction&&s(!1),Ge(()=>u("select",d,m)))};return t("button",{type:"button",style:{color:y},class:[b("item",{loading:D,disabled:n}),r],onClick:v},[i(d,m)])},g=()=>{if(e.description||l.description){const d=l.description?l.description():e.description;return t("div",{class:b("description")},[d])}};return()=>t(De,Be({class:b(),position:"bottom","onUpdate:show":s},Ce(e,xt)),{default:()=>{var d;return[h(),g(),t("div",{class:b("content")},[e.actions.map(p),(d=l.default)==null?void 0:d.call(l)]),k()]}})}});const Dt=ne(bt),[Ve,wt]=q("checkbox-group"),Vt={max:W,disabled:Boolean,iconSize:W,direction:String,modelValue:ye(),checkedColor:String},_e=Symbol(Ve);H({name:Ve,props:Vt,emits:["change","update:modelValue"],setup(e,{emit:l,slots:u}){const{children:s,linkChildren:B}=qe(_e),h=i=>l("update:modelValue",i),k=(i={})=>{typeof i=="boolean"&&(i={checked:i});const{checked:p,skipDisabled:g}=i,m=s.filter(y=>y.props.bindGroup?y.props.disabled&&g?y.checked.value:p!=null?p:!y.checked.value:!1).map(y=>y.name);h(m)};return ue(()=>e.modelValue,i=>l("change",i)),we({toggleAll:k}),be(()=>e.modelValue),B({props:e,updateValue:h}),()=>{var i;return t("div",{class:wt([e.direction])},[(i=u.default)==null?void 0:i.call(u)])}}});const[_t,Et]=q("checkbox"),At=ge({},ot,{bindGroup:A});var Ft=H({name:_t,props:At,emits:["change","update:modelValue"],setup(e,{emit:l,slots:u}){const{parent:s}=Re(_e),B=i=>{const{name:p}=e,{max:g,modelValue:d}=s.props,m=d.slice();if(i)!(g&&m.length>=g)&&!m.includes(p)&&(m.push(p),e.bindGroup&&s.updateValue(m));else{const y=m.indexOf(p);y!==-1&&(m.splice(y,1),e.bindGroup&&s.updateValue(m))}},h=O(()=>s&&e.bindGroup?s.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),k=(i=!h.value)=>{s&&e.bindGroup?B(i):l("update:modelValue",i)};return ue(()=>e.modelValue,i=>l("change",i)),we({toggle:k,props:e,checked:h}),be(()=>e.modelValue),()=>t(st,Be({bem:Et,role:"checkbox",parent:s,checked:h.value,onToggle:k},e),Ce(u,["default","icon"]))}});const Tt=ne(Ft),[St,G]=q("key"),Pt=t("svg",{class:G("collapse-icon"),viewBox:"0 0 30 24"},[t("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),It=t("svg",{class:G("delete-icon"),viewBox:"0 0 32 22"},[t("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var ae=H({name:St,props:{type:String,text:W,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:l,slots:u}){const s=f(!1),B=dt(),h=g=>{B.start(g),s.value=!0},k=g=>{B.move(g),B.direction.value&&(s.value=!1)},i=g=>{s.value&&(u.default||Je(g),s.value=!1,l("press",e.text,e.type))},p=()=>{if(e.loading)return t(xe,{class:G("loading-icon")},null);const g=u.default?u.default():e.text;switch(e.type){case"delete":return g||It;case"extra":return g||Pt;default:return g}};return()=>t("div",{class:G("wrapper",{wider:e.wider}),onTouchstart:h,onTouchmove:k,onTouchend:i,onTouchcancel:i},[t("div",{role:"button",tabindex:0,class:G([e.color,{large:e.large,active:s.value,delete:e.type==="delete"}])},[p()])])}});const[zt,T]=q("number-keyboard"),Nt={show:Boolean,title:String,theme:le("default"),zIndex:W,teleport:[String,Object],maxlength:je(1/0),modelValue:le(""),transition:A,blurOnClose:A,showDeleteKey:A,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:A,safeAreaInsetBottom:A,extraKey:{type:[String,Array],default:""}};function Kt(e){for(let l=e.length-1;l>0;l--){const u=Math.floor(Math.random()*(l+1)),s=e[l];e[l]=e[u],e[u]=s}return e}var Ut=H({name:zt,props:Nt,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:l,slots:u}){const s=f(),B=()=>{const n=Array(9).fill("").map((r,v)=>({text:v+1}));return e.randomKeyOrder&&Kt(n),n},h=()=>[...B(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],k=()=>{const n=B(),{extraKey:r}=e,v=Array.isArray(r)?r:[r];return v.length===1?n.push({text:0,wider:!0},{text:v[0],type:"extra"}):v.length===2&&n.push({text:v[0],type:"extra"},{text:0},{text:v[1],type:"extra"}),n},i=O(()=>e.theme==="custom"?k():h()),p=()=>{e.show&&l("blur")},g=()=>{l("close"),e.blurOnClose&&p()},d=()=>l(e.show?"show":"hide"),m=(n,r)=>{if(n===""){r==="extra"&&p();return}const v=e.modelValue;r==="delete"?(l("delete"),l("update:modelValue",v.slice(0,v.length-1))):r==="close"?g():v.length<e.maxlength&&(l("input",n),l("update:modelValue",v+n))},y=()=>{const{title:n,theme:r,closeButtonText:v}=e,S=u["title-left"],K=v&&r==="default";if(!!(n||K||S))return t("div",{class:T("header")},[S&&t("span",{class:T("title-left")},[S()]),n&&t("h2",{class:T("title")},[n]),K&&t("button",{type:"button",class:[T("close"),ke],onClick:g},[v])])},D=()=>i.value.map(n=>{const r={};return n.type==="delete"&&(r.default=u.delete),n.type==="extra"&&(r.default=u["extra-key"]),t(ae,{key:n.text,text:n.text,type:n.type,wider:n.wider,color:n.color,onPress:m},r)}),w=()=>{if(e.theme==="custom")return t("div",{class:T("sidebar")},[e.showDeleteKey&&t(ae,{large:!0,text:e.deleteButtonText,type:"delete",onPress:m},{delete:u.delete}),t(ae,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:m},null)])};return ue(()=>e.show,n=>{e.transition||l(n?"show":"hide")}),e.hideOnClickOutside&&Qe(s,p,{eventName:"touchstart"}),()=>{const n=y(),r=t(et,{name:e.transition?"van-slide-up":""},{default:()=>[We(t("div",{ref:s,style:Ye(e.zIndex),class:T({unfit:!e.safeAreaInsetBottom,"with-title":!!n}),onTouchstart:Ze,onAnimationend:d,onWebkitAnimationEnd:d},[n,t("div",{class:T("body")},[t("div",{class:T("keys")},[D()]),w()])]),[[Xe,e.show]])]});return e.teleport?t(tt,{to:e.teleport},{default:()=>[r]}):r}}});const Ot=ne(Ut);function Ht(e){return Y({url:"/checkIdentityInfo",method:"post",data:e})}function Mt(e){return Y({url:"/getBeforeAuthTips",method:"post",data:e})}function $t(e){return Y({url:"/alipayAuthInit",method:"post",data:e})}function Lt(e){return Y({url:"/alipayAuthQuery",method:"post",data:e})}const Gt={class:"form-wrap"},qt={style:{margin:"16px"}},Rt=X("\u63D0\u4EA4"),Jt={class:"auth-logo"},jt=X("\u52A0\u8F7D\u5931\u8D25"),Qt={class:"content"},Wt=["innerHTML"],Xt={key:0,class:"center-tips"},Yt={class:"lower-tips"},Zt=["innerHTML"],ea=X(" \u67E5\u770B "),ta=["onClick","innerHTML"],aa={class:"btn-group"},la=X("\u786E\u8BA4\u6388\u6743"),na=H({setup(e){const l=f(""),u=f(""),s=f(""),B=f(!1),h=f(""),k=f(""),i=f(!1),p=f(!1),g=[new Date(2e3,0,1),new Date],d=[new Date,new Date(2050,11,31)],m=[16,18],y=f(0),D=f(!1),w=f(""),n=f(""),r=f(new Date(2e3,0,1)),v=f(new Date(2030,0,1)),S=O(()=>r.value.toLocaleDateString()),K=O(()=>v.value.toLocaleDateString()),P=f(!1),I=f(!1),oe=O(()=>[g,d][y.value]),Ee=O(()=>u.value&&h.value);let Z=window.location.href;Z.includes("&")||(mt.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const Ae=Z.substring(Z.indexOf("?")+1),se=new URLSearchParams(Ae),R=se.get("loginToken")||"",M=se.get("certToken")||"",V=f(0),ie=f(""),re=f(""),ee=f({url:"",name:""}),ce=f(""),de=f("");at(async()=>{let{data:o}=await Ht({loginToken:R,certToken:M});if(V.value=o.mode,l.value=o.foreBackUrl,o.userStatus!==2){if(u.value=o.fullName,s.value=pe(u.value,0,u.value.length-1),h.value=o.idNum,k.value=pe(h.value,3,2),m.includes(V.value)){let{idStartDate:C,idEndDate:z}=o;C&&z&&(w.value=o.idStartDate,n.value=o.idEndDate,p.value=!0)}if(B.value=i.value=!0,u.value&&h.value){let{idStartDate:C,idEndDate:z}=o;m.includes(V.value)&&(!C||!z)?P.value=!1:P.value=!0}}let{data:a}=await Mt({certToken:M});ie.value=a.beforeAuth,re.value=a.beforeProtocol,ee.value=JSON.parse(a.protocols)[0]});const Fe=o=>{y.value?v.value=o:r.value=o,D.value=!1},{VITE_SERVICE_AGREEMENT:Te}=ft(),Se=()=>{window.location.href=ee.value.url||Te},Pe=()=>{I.value=!1,te("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(l.value)},1e3)},Ie=()=>{P.value=!0},ze=async()=>{if(!I.value)return te("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");if([16,64].includes(V.value)){let o={loginToken:R,certToken:M,fullName:u.value,idNum:h.value,mode:V.value};m.includes(V.value)&&(o.idStartDate=p.value?w.value:Q(r.value),o.idEndDate=p.value?n.value:Q(v.value)),me(o)}else{let o={loginToken:R,certToken:M,fullName:u.value,idNum:h.value};m.includes(V.value)&&(o.idStartDate=p.value?w.value:Q(r.value),o.idEndDate=p.value?n.value:Q(v.value));let{data:a}=await $t(o);de.value=a.certifyId||"",ce.value=a.certifyUrl||"",P.value=!1,I.value=!1,Ne(de.value,ce.value)}},Ne=(o,a)=>{function C(x){window.AlipayJSBridge?x&&x():document.addEventListener("AlipayJSBridgeReady",x,!1)}function z(x,$){window.AlipayJSBridge.call("startBizService",{name:"open-certify",param:JSON.stringify(x)},$)}C(function(){z({certifyId:o,url:a},async x=>{if(!x.result)Pe();else{te(x.resultStatus==="9000"?"\u8BA4\u8BC1\u901A\u8FC7":"\u8BA4\u8BC1\u5931\u8D25");let $={loginToken:R,certToken:M,fullName:u.value,idNum:h.value,mode:V.value,certifyId:x.result.certifyId};me($)}})})},me=async o=>{let{data:a}=await Lt(o);setTimeout(()=>{window.location.replace(a.foreBackUrl)},1e3)},Ke=(o,a)=>o==="year"?`${a}\u5E74`:o==="month"?`${a}\u6708`:o==="day"?`${a}\u65E5`:a;return(o,a)=>{const C=_("van-field"),z=_("van-cell-group"),x=_("van-datetime-picker"),$=_("van-popup"),ve=_("van-button"),Ue=_("van-image"),Oe=_("van-form"),He=_("van-divider"),Me=_("van-checkbox"),$e=_("van-action-sheet");return F(),L(J,null,[E("div",Gt,[t(Oe,null,{default:N(()=>[t(z,{inset:""},{default:N(()=>[t(C,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),B.value?(F(),j(C,{key:0,modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=c=>s.value=c),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",maxlength:"18"},null,8,["modelValue"])):(F(),j(C,{key:1,modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=c=>u.value=c),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),i.value?(F(),j(C,{key:2,modelValue:k.value,"onUpdate:modelValue":a[2]||(a[2]=c=>k.value=c),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(F(),j(C,{key:3,modelValue:h.value,"onUpdate:modelValue":a[3]||(a[3]=c=>h.value=c),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"])),m.includes(V.value)?(F(),L(J,{key:4},[p.value?(F(),L(J,{key:0},[t(C,{modelValue:w.value,"onUpdate:modelValue":a[4]||(a[4]=c=>w.value=c),name:"\u8D77\u59CB\u65E5\u671F",label:"\u8D77\u59CB\u65E5\u671F",placeholder:"\u8D77\u59CB\u65E5\u671F",readonly:"",maxlength:"18"},null,8,["modelValue"]),t(C,{modelValue:n.value,"onUpdate:modelValue":a[5]||(a[5]=c=>n.value=c),name:"\u8D77\u59CB\u65E5\u671F",label:"\u8D77\u59CB\u65E5\u671F",placeholder:"\u8D77\u59CB\u65E5\u671F",readonly:"",maxlength:"18"},null,8,["modelValue"])],64)):(F(),L(J,{key:1},[t(C,{modelValue:U(S),"onUpdate:modelValue":a[6]||(a[6]=c=>fe(S)?S.value=c:null),readonly:"","is-link":"",name:"\u8D77\u59CB\u65E5\u671F",label:"\u8D77\u59CB\u65E5\u671F",onClick:a[7]||(a[7]=c=>{y.value=0,D.value=!0})},null,8,["modelValue"]),t(C,{modelValue:U(K),"onUpdate:modelValue":a[8]||(a[8]=c=>fe(K)?K.value=c:null),readonly:"","is-link":"",name:"\u622A\u6B62\u65E5\u671F",label:"\u622A\u6B62\u65E5\u671F",onClick:a[9]||(a[9]=c=>{y.value=1,D.value=!0})},null,8,["modelValue"])],64))],64)):he("",!0)]),_:1}),t($,{show:D.value,"onUpdate:show":a[11]||(a[11]=c=>D.value=c),round:"",position:"bottom"},{default:N(()=>[t(x,{modelValue:[r.value,v.value][y.value],"onUpdate:modelValue":a[10]||(a[10]=c=>[r.value,v.value][y.value]=c),title:"\u9009\u62E9\u65E5\u671F",type:"date","min-date":U(oe)[0],"max-date":U(oe)[1],formatter:Ke,onConfirm:Fe},null,8,["modelValue","min-date","max-date"])]),_:1},8,["show"]),E("div",qt,[t(ve,{square:"",block:"",type:"primary",disabled:!U(Ee),onClick:Ie},{default:N(()=>[Rt]),_:1},8,["disabled"])]),E("div",Jt,[t(Ue,{src:U(vt)("auth-logo")},{error:N(()=>[jt]),_:1},8,["src"])])]),_:1})]),t($e,{show:P.value,"onUpdate:show":a[14]||(a[14]=c=>P.value=c),title:"\u8BA4\u8BC1\u6388\u6743"},{default:N(()=>[E("div",Qt,[E("div",{class:"upper-tips",innerHTML:ie.value},null,8,Wt),[16,64].includes(V.value)?he("",!0):(F(),L("div",Xt,"\u672C\u6B21\u8BA4\u8BC1\u9700\u8981\u901A\u8FC7\u4EBA\u8138\u8BC6\u522B\u9A8C\u8BC1\u8EAB\u4EFD\u4FE1\u606F")),t(He),E("div",Yt,[t(Me,{modelValue:I.value,"onUpdate:modelValue":a[12]||(a[12]=c=>I.value=c),shape:"square"},null,8,["modelValue"]),E("p",{class:"text",onClick:a[13]||(a[13]=c=>I.value=!I.value)},[E("span",{innerHTML:re.value},null,8,Zt),ea,E("a",{class:"service-link",onClick:lt(Se,["stop"]),innerHTML:ee.value.name},null,8,ta)])]),E("div",aa,[t(ve,{block:"",square:"",type:"primary",onClick:ze},{default:N(()=>[la]),_:1})])])]),_:1},8,["show"])],64)}}});nt(na).use(ut).use(ht).use(pt).use(gt).use(Ot).use(Dt).use(it).use(Tt).use(Bt).use(De).use(yt).mount("#app");
