var q=Object.defineProperty,Q=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var N=(t,s,l)=>s in t?q(t,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[s]=l,M=(t,s)=>{for(var l in s||(s={}))X.call(s,l)&&N(t,l,s[l]);if(I)for(var l of I(s))K.call(s,l)&&N(t,l,s[l]);return t},S=(t,s)=>Q(t,W(s));import{d as Y,r as B,A as R,i as Z,j as ee,ab as se,f as v,o as te,c as le,a as e,g as o,u as i,w as E,F as ce,e as p,t as n,h as oe,M as ue,B as ae,T as ie}from"./normalize.c453d6e5.js";import{s as O,T as ne,D as de}from"./index.f8023e9b.js";import{l as re,a as ve}from"./index.dd9fe55f.js";import{O as _e}from"./certification-successful.d2eaa402.js";import{I as Fe}from"./index.e76d96c5.js";import{a as he,R as me}from"./index.6022a6d6.js";import"./logo.9e2f423b.js";const{VITE_DEMO_BASE_URL:U}=re();function Be(t){const s=`${U}/fama/demo/getcerttoken`;return O.post(s,t)}function Ee(t){const s=`${U}/fama/demo/getcerttokenimg`;return O.post(s,t)}const pe=navigator.userAgent,Ae=/(msie\s|trident.*rv:)([\w.]+)/,fe=/(firefox)\/([\w.]+)/,Ce=/(opera).+version\/([\w.]+)/,ge=/(chrome)\/([\w.]+)/,we=/version\/([\w.]+).*(safari)/;function De(){return xe(pe.toLowerCase())}function xe(t){let s=Ae.exec(t);return s!==null?{browser:"IE",version:s[2]||"0"}:(s=fe.exec(t),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=Ce.exec(t),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=ge.exec(t),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=we.exec(t),s!==null?{browser:s[2]||"",version:s[1]||"0"}:{browser:"",version:"0"}))))}const ye={class:"container"},Te={class:"title"},be=p(" \u9655\u897F\u516C\u6C11\u5B9E\u4EBA\u8BA4\u8BC1\u6F14\u793Ademo "),ke={class:"content"},Ie=p(" \u5237\u65B0or\u751F\u6210\u4E8C\u7EF4\u7801 "),Ne=p("\u5B9E\u540D"),Me=p("\u5B9E\u540D+\u5B9E\u4EBA"),Se=e("div",{class:"tips"},"\u8BF7\u4F7F\u7528\u9655\u897F\u516C\u6C11\u5B9E\u4EBA\u8BA4\u8BC1\u5C0F\u7A0B\u5E8F\u626B\u7801\u8BA4\u8BC1",-1),Re={class:"overlay-content"},Oe={class:"overlay-container"},Ue={class:"section"},$e={class:"card"},Le=e("div",{class:"card-title"},"\u8EAB\u4EFD\u4FE1\u606F",-1),Ve={class:"cell mgt10"},Je=e("div",{class:"cell-title"},"\u7167\u7247\uFF1A",-1),ze={class:"cell-value"},Ge={class:"cell"},He=e("div",{class:"cell-title"},"\u59D3\u540D\uFF1A",-1),Pe={class:"cell-value"},je={class:"cell"},qe=e("div",{class:"cell-title"},"\u8EAB\u4EFD\u53F7\u7801\uFF1A",-1),Qe={class:"cell-value"},We=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8B66\u53F7/\u5DE5\u53F7\uFF1A"),e("div",{class:"cell-value"})],-1),Xe=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u5355\u4F4D\uFF1A"),e("div",{class:"cell-value"})],-1),Ke={class:"cell"},Ye=e("div",{class:"cell-title"},"\u624B\u673A\u53F7\uFF1A",-1),Ze={class:"cell-value"},es=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7F51\u8BC1\u6807\u8BC6\uFF1A"),e("div",{class:"cell-value"})],-1),ss={class:"section"},ts={class:"card"},ls=e("div",{class:"card-title"},"\u8BA4\u8BC1\u4FE1\u606F",-1),cs=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BA4\u8BC1\u5E73\u53F0\uFF1A"),e("div",{class:"cell-value"},"\u9655\u897F\u7701\u5B9E\u4EBA\u8BA4\u8BC1\u5E73\u53F0")],-1),os={class:"cell"},us=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u6A21\u5F0F\uFF1A",-1),as={class:"cell-value"},is={class:"cell"},ns=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u7C7B\u578B\uFF1A",-1),ds={class:"cell-value"},rs={class:"cell"},vs=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u7B49\u7EA7\uFF1A",-1),_s={class:"cell-value"},Fs={class:"card"},hs=e("div",{class:"card-title"},"\u7EC8\u7AEF\u4FE1\u606F",-1),ms={class:"cell"},Bs=e("div",{class:"cell-title"},"\u7EC8\u7AEF\u7CFB\u7EDF/\u7248\u672C\uFF1A",-1),Es={class:"cell-value"},ps=e("div",{class:"cell-title"},"\u7EC8\u7AEF\u5355\u4F4D\uFF1A",-1),As=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7EC8\u7AEFMac\u5730\u5740\uFF1A"),e("div",{class:"cell-value"})],-1),fs=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7EC8\u7AEFip\u5730\u5740\uFF1A"),e("div",{class:"cell-value"})],-1),Cs=e("div",{class:"card"},[e("div",{class:"card-title"},"\u624B\u673A\u4FE1\u606F"),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BBE\u5907ID(IMEI/UUID)\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u624B\u673A\u5382\u5BB6/\u578B\u53F7\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7CFB\u7EDF\u7C7B\u522B/\u7248\u672C\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u4E0A\u7F51\u65B9\u5F0F\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BA4\u8BC1\u8F6F\u4EF6/\u7248\u672C\uFF1A"),e("div",{class:"cell-value"})])],-1),gs={class:"card"},ws=e("div",{class:"card-title"},"\u65F6\u7A7A\u4FE1\u606F",-1),Ds={class:"cell"},xs=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u65F6\u95F4\uFF1A",-1),ys={class:"cell-value"},Ts=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u5730\u7406\u4F4D\u7F6E\uFF1A"),e("div",{class:"cell-value"})],-1),bs={class:"btn-wrap"},ks=p("\u5173\u95ED"),Is=Y({setup(t){const l=B(!1),$=B(""),D=B(""),g=B(!1),x=B(""),y="\u5927\u767D\u4E92\u8054\u7F51\u79D1\u6280\u6709\u9650\u516C\u53F8";let u=R({}),A=R({certAnnexType:0,mode:"66"});const L=[{mode:64,level:"D"},{mode:66,level:"C"}],V=Z(()=>{let r=Number(A.mode),a=L.find(c=>c.mode===r);return a==null?void 0:a.level});let{browser:T,version:b}=De();const w=async r=>{let a=await Be(S(M({},A),{businessExtraInfo:JSON.stringify({terminalUnit:y,system:`${T}/${b}`})})),{img:c,cert_token:_}=a.data;$.value=_,D.value=`data:image/png;base64,${c}`,G(_),r&&r()};let f,d;const J="wss://sfrz.wsbs.shxga.gov.cn/socket/conn",z=30,G=r=>{d=new WebSocket(J),d.onopen=()=>{d.send(JSON.stringify({flag:"getCertCode",cert_token:r})),f=setInterval(()=>{d.send("{}")},z*1e3)},d.onmessage=async({data:a})=>{let c=JSON.parse(a);u.name=c.full_name,u.idNum=c.id_no,u.mode=c.mode,u.time=c.createdTime;let _=c.cert_token,C=await Ee({certToken:_}),{authInfo:h,img:F,userInfo:m}=C;u.authType=h==null?void 0:h.authType,u.phoneNum=m==null?void 0:m.phoneNum,x.value=`data:image/png;base64,${F}`,g.value=!0},d.onclose=()=>{f&&(clearInterval(f),f=null)}},k=()=>{l.value=!0,w(()=>{setTimeout(()=>{l.value=!1},3*1e3)})},H=()=>{if(l.value)return ne({message:"\u8BF7\u52FF\u9891\u7E41\u5237\u65B0\u4E8C\u7EF4\u7801",forbidClick:!0});k()};return ee(()=>{w()}),se(()=>{d.close()}),(r,a)=>{const c=v("van-image"),_=v("van-icon"),C=v("van-radio"),h=v("van-radio-group"),F=v("van-divider"),m=v("van-button"),P=v("van-overlay");return te(),le(ce,null,[e("div",ye,[e("div",Te,[o(c,{class:"logo",width:"40px",height:"40px",fit:"contain",src:i(ve)},null,8,["src"]),be]),e("div",ke,[o(c,{width:"280px",height:"280px",fit:"contain",src:D.value},null,8,["src"]),e("div",{class:"refresh",onClick:H},[o(_,{name:"replay"}),Ie]),o(h,{modelValue:i(A).mode,"onUpdate:modelValue":a[0]||(a[0]=j=>i(A).mode=j),direction:"horizontal",onChange:k},{default:E(()=>[o(C,{name:"64"},{default:E(()=>[Ne]),_:1}),o(C,{name:"66"},{default:E(()=>[Me]),_:1})]),_:1},8,["modelValue"]),Se])]),o(P,{show:g.value},{default:E(()=>[e("div",Re,[e("div",Oe,[e("div",Ue,[e("div",$e,[Le,e("div",Ve,[Je,e("div",ze,[o(c,{width:"120px",height:"160px",fit:"contain",src:x.value},null,8,["src"])])]),e("div",Ge,[He,e("div",Pe,n(i(u).name),1)]),e("div",je,[qe,e("div",Qe,n(i(u).idNum),1)]),We,Xe,e("div",Ke,[Ye,e("div",Ze,n(i(u).phoneNum),1)]),es])]),e("div",ss,[e("div",ts,[ls,cs,e("div",os,[us,e("div",as,n(i(u).mode),1)]),e("div",is,[ns,e("div",ds,n(i(u).authType),1)]),e("div",rs,[vs,e("div",_s,n(i(V)),1)])]),o(F),e("div",Fs,[hs,e("div",ms,[Bs,e("div",Es,n(`${i(T)}/${i(b)}`),1)]),e("div",{class:"cell"},[ps,e("div",{class:"cell-value"},n(y))]),As,fs]),o(F),Cs,o(F),e("div",gs,[ws,e("div",Ds,[xs,e("div",ys,n(i(u).time),1)]),Ts])])]),o(F),e("div",bs,[o(m,{type:"primary",block:"",plain:"",onClick:a[1]||(a[1]=()=>{g.value=!1,w()})},{default:E(()=>[ks]),_:1})])])]),_:1},8,["show"])],64)}}});oe(Is).use(ue).use(Fe).use(ae).use(ie).use(he).use(me).use(_e).use(de).mount("#app");
