import{d as k,r as s,i as x,f as r,o as M,c as w,g as o,w as t,a as V,e as v,h as N,B as L}from"./normalize.c5bfbc35.js";import{s as A,T as S}from"./index.019c7cd7.js";import{l as p}from"./index.2a7a8f05.js";import"./certification-successful.95381c7d.js";import{F as y,a as O,C as $}from"./index.1817b26e.js";import{R as P,a as q}from"./index.b3fc8db0.js";import"./logo.9e2f423b.js";const{VITE_DEMO_BASE_URL:b}=p();function G(c){return A({baseURL:b,url:"/getaccesstoken",method:"get",params:c})}function z(c){return A({baseURL:b,url:"/authreq",method:"post",data:c})}const H={class:"form-wrap"},j=V("div",{class:"radio-title"},"\u76F4\u63A5\u8DF3\u8F6C",-1),X=v("\u751F\u6D3B\u53F7"),Y=V("div",{class:"radio-title"},"\u8DF3\u8F6C\u7A7A\u767D\u9875\u9762\u540E\u91CD\u5B9A\u5411",-1),J=v("\u751F\u6D3B\u53F7"),K=v("MINI PROGRAM"),Q={style:{margin:"16px"}},W=v("\u63D0\u4EA4"),Z=k({setup(c){const{VITE_CLIENT_ID:D,VITE_CLIENT_SECRET:T}=p(),f=s(D),B=s(T),F=s(66),C=s(""),h=s(""),I=["H5","MINI"],g=s("2"),U=async()=>{let{accessToken:d}=await G({clientId:f.value,clientSecret:B.value}),e=location.href.indexOf("?")===-1?location.href:location.href.substring(0,location.href.indexOf("?")),a={accessToken:d,authType:"GzhRegular",mode:F.value,extraParams:{foreBackUrl:e},businessInfo:{subject:"\u8EAB\u4EFD\u9A8C\u8BC1"},idInfo:{fullName:C.value,idNum:h.value}},{tokenInfo:l}=await z(a),{certToken:n}=l,_=Number(g.value),i;if(_){let m=I[_-1];const{MODE:u,VITE_DEMO_BASE_URL:E}=p();i=`${`${u==="production"?E:"https://sfrz.wsbs.shxga.gov.cn"}`}/authgzh/auth?certToken=${n}&env=${m}`}else{const{MODE:m,VITE_AUTH_BASE_URL:u,VITE_PROXY_AUTH_BASE_URL:E}=p();i=`${`${m==="production"?u:E}`}/auth?certToken=${n}`}window.location.replace(i)};return x(()=>{let d=decodeURIComponent(window.location.href),e=d.substring(d.indexOf("?")+1);const l=new URLSearchParams(e).get("errorMsg");if(l)return S({message:`\u8BA4\u8BC1${l}`,forbidClick:!0})}),(d,e)=>{const a=r("van-field"),l=r("van-cell-group"),n=r("van-radio"),_=r("van-radio-group"),i=r("van-button"),m=r("van-form");return M(),w("div",H,[o(m,{onSubmit:U},{default:t(()=>[o(l,{inset:""},{default:t(()=>[o(a,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=u=>f.value=u),name:"\u8D26\u53F7",label:"\u8D26\u53F7",placeholder:"\u8D26\u53F7",clearable:"",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8D26\u53F7"}]},null,8,["modelValue"]),o(a,{modelValue:B.value,"onUpdate:modelValue":e[1]||(e[1]=u=>B.value=u),name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",clearable:"",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"]),o(a,{modelValue:F.value,"onUpdate:modelValue":e[2]||(e[2]=u=>F.value=u),name:"\u8BA4\u8BC1\u6A21\u5F0F",label:"\u8BA4\u8BC1\u6A21\u5F0F",placeholder:"\u8BA4\u8BC1\u6A21\u5F0F",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BA4\u8BC1\u6A21\u5F0F"}]},null,8,["modelValue"]),o(a,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=u=>C.value=u),name:"\u59D3\u540D",label:"\u59D3\u540D",maxlength:"18",placeholder:"\u59D3\u540D"},null,8,["modelValue"]),o(a,{modelValue:h.value,"onUpdate:modelValue":e[4]||(e[4]=u=>h.value=u),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])]),_:1}),o(_,{class:"radio-box",modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=u=>g.value=u)},{default:t(()=>[j,o(n,{name:"0"},{default:t(()=>[X]),_:1}),Y,o(n,{name:"1"},{default:t(()=>[J]),_:1}),o(n,{name:"2"},{default:t(()=>[K]),_:1})]),_:1},8,["modelValue"]),V("div",Q,[o(i,{round:"",block:"",type:"primary","native-type":"submit"},{default:t(()=>[W]),_:1})])]),_:1})])}}});N(Z).use(L).use(y).use(O).use($).use(P).use(q).mount("#app");
