var X=Object.defineProperty,j=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var S=(l,s,c)=>s in l?X(l,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[s]=c,M=(l,s)=>{for(var c in s||(s={}))Y.call(s,c)&&S(l,c,s[c]);if($)for(var c of $(s))Z.call(s,c)&&S(l,c,s[c]);return l},R=(l,s)=>j(l,K(s));import{d as ee,r as A,U,m as se,q as le,H as te,f as n,o as oe,c as ue,a as e,g as o,s as u,w as _,F as ce,e as D,t as d,h as ie,L as ae,B as ne,I as de}from"./normalize.4c5ed6a5.js";import{s as L,T as re,C as ve,a as _e,D as Fe}from"./index.a5b6f4c2.js";import{l as me,a as he}from"./index.744d72b7.js";import{O as Ee}from"./certification-successful.68958ccd.js";import{I as pe}from"./index.f3204d73.js";import{a as Be,R as Ae}from"./index.cc7d206e.js";import"./logo.9e2f423b.js";const{VITE_DEMO_BASE_URL:O}=me();function Ce(l){const s=`${O}/fama/demo/getcerttoken`;return L.post(s,l)}function ge(l){const s=`${O}/fama/demo/getcerttokenimg`;return L.post(s,l)}const fe=navigator.userAgent,we=/(msie\s|trident.*rv:)([\w.]+)/,ke=/(firefox)\/([\w.]+)/,De=/(opera).+version\/([\w.]+)/,be=/(chrome)\/([\w.]+)/,xe=/version\/([\w.]+).*(safari)/;function ye(){return Te(fe.toLowerCase())}function Te(l){let s=we.exec(l);return s!==null?{browser:"IE",version:s[2]||"0"}:(s=ke.exec(l),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=De.exec(l),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=be.exec(l),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=xe.exec(l),s!==null?{browser:s[2]||"",version:s[1]||"0"}:{browser:"",version:"0"}))))}const Ie={class:"container"},Ne={class:"title"},$e=D(" \u9655\u897F\u516C\u6C11\u5B9E\u4EBA\u8BA4\u8BC1\u6F14\u793Ademo "),Se={class:"content"},Me=D(" \u5237\u65B0or\u751F\u6210\u4E8C\u7EF4\u7801 "),Re={class:"overlay-content"},Ue={class:"overlay-container"},Le={class:"section"},Oe={class:"card"},Ve=e("div",{class:"card-title"},"\u8EAB\u4EFD\u4FE1\u606F",-1),Ge={class:"cell mgt10"},He=e("div",{class:"cell-title"},"\u7167\u7247\uFF1A",-1),Je={class:"cell-value"},qe={class:"cell"},Pe=e("div",{class:"cell-title"},"\u59D3\u540D\uFF1A",-1),ze={class:"cell-value"},Qe={class:"cell"},We=e("div",{class:"cell-title"},"\u8EAB\u4EFD\u53F7\u7801\uFF1A",-1),Xe={class:"cell-value"},je=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8B66\u53F7/\u5DE5\u53F7\uFF1A"),e("div",{class:"cell-value"})],-1),Ke=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u5355\u4F4D\uFF1A"),e("div",{class:"cell-value"})],-1),Ye={class:"cell"},Ze=e("div",{class:"cell-title"},"\u624B\u673A\u53F7\uFF1A",-1),es={class:"cell-value"},ss=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7F51\u8BC1\u6807\u8BC6\uFF1A"),e("div",{class:"cell-value"})],-1),ls={class:"section"},ts={class:"card"},os=e("div",{class:"card-title"},"\u8BA4\u8BC1\u4FE1\u606F",-1),us=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BA4\u8BC1\u5E73\u53F0\uFF1A"),e("div",{class:"cell-value"},"\u9655\u897F\u7701\u5B9E\u4EBA\u8BA4\u8BC1\u5E73\u53F0")],-1),cs={class:"cell"},is=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u6A21\u5F0F\uFF1A",-1),as={class:"cell-value"},ns={class:"cell"},ds=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u7C7B\u578B\uFF1A",-1),rs={class:"cell-value"},vs={class:"cell"},_s=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u7B49\u7EA7\uFF1A",-1),Fs={class:"cell-value"},ms={class:"card"},hs=e("div",{class:"card-title"},"\u7EC8\u7AEF\u4FE1\u606F",-1),Es={class:"cell"},ps=e("div",{class:"cell-title"},"\u7EC8\u7AEF\u7CFB\u7EDF/\u7248\u672C\uFF1A",-1),Bs={class:"cell-value"},As=e("div",{class:"cell-title"},"\u7EC8\u7AEF\u5355\u4F4D\uFF1A",-1),Cs=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7EC8\u7AEFMac\u5730\u5740\uFF1A"),e("div",{class:"cell-value"})],-1),gs=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7EC8\u7AEFip\u5730\u5740\uFF1A"),e("div",{class:"cell-value"})],-1),fs=e("div",{class:"card"},[e("div",{class:"card-title"},"\u624B\u673A\u4FE1\u606F"),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BBE\u5907ID(IMEI/UUID)\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u624B\u673A\u5382\u5BB6/\u578B\u53F7\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7CFB\u7EDF\u7C7B\u522B/\u7248\u672C\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u4E0A\u7F51\u65B9\u5F0F\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BA4\u8BC1\u8F6F\u4EF6/\u7248\u672C\uFF1A"),e("div",{class:"cell-value"})])],-1),ws={class:"card"},ks=e("div",{class:"card-title"},"\u65F6\u7A7A\u4FE1\u606F",-1),Ds={class:"cell"},bs=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u65F6\u95F4\uFF1A",-1),xs={class:"cell-value"},ys=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u5730\u7406\u4F4D\u7F6E\uFF1A"),e("div",{class:"cell-value"})],-1),Ts={class:"btn-wrap"},Is=D("\u5173\u95ED"),Ns=ee({setup(l){const c=A(!1),V=A(""),b=A(""),f=A(!1),x=A(""),y="\u5927\u767D\u4E92\u8054\u7F51\u79D1\u6280\u6709\u9650\u516C\u53F8";let a=U({}),r=U({certAnnexType:0,mode:"66"});const G=[{mode:64,level:"D"},{mode:66,level:"C"},{mode:16,level:"A"},{mode:18,level:"B"}],H=se(()=>{let m=Number(r.mode),t=G.find(i=>i.mode===m);return t==null?void 0:t.level});let{browser:T,version:I}=ye();const w=async m=>{let t=await Ce(R(M({},r),{businessExtraInfo:JSON.stringify({terminalUnit:y,system:`${T}/${I}`})})),{img:i,cert_token:h}=t.data;V.value=h,b.value=`data:image/png;base64,${i}`,P(h),m&&m()};let C,F;const J="wss://sfrz.wsbs.shxga.gov.cn/socket/conn",q=30,P=m=>{F=new WebSocket(J),F.onopen=()=>{F.send(JSON.stringify({flag:"getCertCode",cert_token:m})),C=setInterval(()=>{F.send("{}")},q*1e3)},F.onmessage=async({data:t})=>{let i=JSON.parse(t);a.name=i.full_name,a.idNum=i.id_no,a.mode=i.mode,a.time=i.createdTime;let h=i.cert_token,E=await ge({certToken:h}),{authInfo:v,img:k,userInfo:p}=E;a.authType=v==null?void 0:v.authType,a.phoneNum=p==null?void 0:p.phoneNum,x.value=`data:image/png;base64,${k}`,f.value=!0},F.onclose=()=>{C&&(clearInterval(C),C=null)}},N=()=>{c.value=!0,w(()=>{setTimeout(()=>{c.value=!1},3*1e3)})},z=()=>{if(c.value)return re({message:"\u8BF7\u52FF\u9891\u7E41\u5237\u65B0\u4E8C\u7EF4\u7801",forbidClick:!0});N()};return le(()=>{w()}),te(()=>{F.close()}),(m,t)=>{const i=n("van-image"),h=n("van-icon"),E=n("van-radio"),v=n("van-cell"),k=n("van-cell-group"),p=n("van-radio-group"),g=n("van-divider"),Q=n("van-button"),W=n("van-overlay");return oe(),ue(ce,null,[e("div",Ie,[e("div",Ne,[o(i,{class:"logo",width:"40px",height:"40px",fit:"contain",src:u(he)},null,8,["src"]),$e]),e("div",Se,[o(i,{width:"280px",height:"280px",fit:"contain",src:b.value},null,8,["src"]),e("div",{class:"refresh",onClick:z},[o(h,{name:"replay"}),Me]),o(p,{modelValue:u(r).mode,"onUpdate:modelValue":t[4]||(t[4]=B=>u(r).mode=B),onChange:N},{default:_(()=>[o(k,{inset:"",class:"mg0"},{default:_(()=>[o(v,{title:"64\u6A21\u5F0F\uFF08\u5B9E\u540D\uFF09",clickable:"",onClick:t[0]||(t[0]=B=>u(r).mode="64")},{"right-icon":_(()=>[o(E,{name:"64"})]),_:1}),o(v,{title:"66\u6A21\u5F0F\uFF08\u5B9E\u540D+\u5B9E\u4EBA\uFF09",clickable:"",onClick:t[1]||(t[1]=B=>u(r).mode="66")},{"right-icon":_(()=>[o(E,{name:"66"})]),_:1}),o(v,{title:"16\u6A21\u5F0F\uFF08\u5B9E\u540D+\u8BC1\u4EF6\u6709\u6548\u671F\uFF09",clickable:"",onClick:t[2]||(t[2]=B=>u(r).mode="16")},{"right-icon":_(()=>[o(E,{name:"16"})]),_:1}),o(v,{title:"18\u6A21\u5F0F\uFF08\u5B9E\u540D+\u5B9E\u4EBA+\u8BC1\u4EF6\u6709\u6548\u671F\uFF09",clickable:"",onClick:t[3]||(t[3]=B=>u(r).mode="18")},{"right-icon":_(()=>[o(E,{name:"18"})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),o(W,{show:f.value},{default:_(()=>[e("div",Re,[e("div",Ue,[e("div",Le,[e("div",Oe,[Ve,e("div",Ge,[He,e("div",Je,[o(i,{width:"120px",height:"160px",fit:"contain",src:x.value},null,8,["src"])])]),e("div",qe,[Pe,e("div",ze,d(u(a).name),1)]),e("div",Qe,[We,e("div",Xe,d(u(a).idNum),1)]),je,Ke,e("div",Ye,[Ze,e("div",es,d(u(a).phoneNum),1)]),ss])]),e("div",ls,[e("div",ts,[os,us,e("div",cs,[is,e("div",as,d(u(a).mode),1)]),e("div",ns,[ds,e("div",rs,d(u(a).authType),1)]),e("div",vs,[_s,e("div",Fs,d(u(H)),1)])]),o(g),e("div",ms,[hs,e("div",Es,[ps,e("div",Bs,d(`${u(T)}/${u(I)}`),1)]),e("div",{class:"cell"},[As,e("div",{class:"cell-value"},d(y))]),Cs,gs]),o(g),fs,o(g),e("div",ws,[ks,e("div",Ds,[bs,e("div",xs,d(u(a).time),1)]),ys])])]),o(g),e("div",Ts,[o(Q,{type:"primary",block:"",plain:"",onClick:t[5]||(t[5]=()=>{f.value=!1,w()})},{default:_(()=>[Is]),_:1})])])]),_:1},8,["show"])],64)}}});ie(Ns).use(ae).use(pe).use(ne).use(de).use(Be).use(ve).use(_e).use(Ae).use(Ee).use(Fe).mount("#app");
