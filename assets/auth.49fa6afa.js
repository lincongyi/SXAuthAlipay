import{j as D,s as T,m as I,aj as re,P as O,k as N,f as o,X as E,ab as ae,Z,Y as $e,ag as ue,Q as de,q as j,I as M,S as fe,ak as Ne,C as V,al as Le,D as Q,M as me,af as ve,a2 as Ue,r as g,v as he,am as Ee,A as U,a6 as K,H as Me,N as De,an as Fe,l as qe,ao as ge,z as Ge,e as A,o as q,c as He,a as P,w as $,F as je,ap as J,u as ie,aq as Re,ar as Je,d as R,g as Ke,B as Qe}from"./normalize.5e74b651.js";import{p as Xe,b as Ye,P as be,m as Ze,u as We,c as ye,s as W,D as en,F as nn,a as an,C as tn,N as on}from"./index.3f379514.js";import{_ as ln}from"./logo.7b697e1d.js";const[sn,C]=D("action-sheet"),cn=T({},Xe,{title:String,round:I,actions:re(),closeIcon:O("cross"),closeable:I,cancelText:String,description:String,closeOnPopstate:I,closeOnClickAction:Boolean,safeAreaInsetBottom:I}),rn=[...Ye,"round","closeOnPopstate","safeAreaInsetBottom"];var un=N({name:sn,props:cn,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:a}){const i=s=>a("update:show",s),r=()=>{i(!1),a("cancel")},l=()=>{if(e.title)return o("div",{class:C("header")},[e.title,e.closeable&&o(Z,{name:e.closeIcon,class:[C("close"),$e],onClick:r},null)])},v=()=>{if(n.cancel||e.cancelText)return[o("div",{class:C("gap")},null),o("button",{type:"button",class:C("cancel"),onClick:r},[n.cancel?n.cancel():e.cancelText])]},c=(s,t)=>s.loading?o(ue,{class:C("loading-icon")},null):n.action?n.action({action:s,index:t}):[o("span",{class:C("name")},[s.name]),s.subname&&o("div",{class:C("subname")},[s.subname])],m=(s,t)=>{const{color:f,loading:b,callback:y,disabled:d,className:x}=s,B=()=>{d||b||(y&&y(s),e.closeOnClickAction&&i(!1),de(()=>a("select",s,t)))};return o("button",{type:"button",style:{color:f},class:[C("item",{loading:b,disabled:d}),x],onClick:B},[c(s,t)])},u=()=>{if(e.description||n.description){const s=n.description?n.description():e.description;return o("div",{class:C("description")},[s])}};return()=>o(be,E({class:C(),position:"bottom","onUpdate:show":i},ae(e,rn)),{default:()=>{var s;return[l(),u(),o("div",{class:C("content")},[e.actions.map(m),(s=n.default)==null?void 0:s.call(n)]),v()]}})}});const dn=j(un);let G=0;function fn(e){e?(G||document.body.classList.add("van-toast--unclickable"),G++):G&&(G--,G||document.body.classList.remove("van-toast--unclickable"))}const[mn,H]=D("toast"),vn=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],hn={icon:String,show:Boolean,type:O("text"),overlay:Boolean,message:V,iconSize:V,duration:Le(2e3),position:O("middle"),teleport:[String,Object],className:Q,iconPrefix:String,transition:O("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:Q,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var pe=N({name:mn,props:hn,emits:["update:show"],setup(e,{emit:n}){let a,i=!1;const r=()=>{const s=e.show&&e.forbidClick;i!==s&&(i=s,fn(i))},l=s=>n("update:show",s),v=()=>{e.closeOnClick&&l(!1)},c=()=>clearTimeout(a),m=()=>{const{icon:s,type:t,iconSize:f,iconPrefix:b,loadingType:y}=e;if(s||t==="success"||t==="fail")return o(Z,{name:s||t,size:f,class:H("icon"),classPrefix:b},null);if(t==="loading")return o(ue,{class:H("loading"),size:f,type:y},null)},u=()=>{const{type:s,message:t}=e;if(me(t)&&t!=="")return s==="html"?o("div",{key:0,class:H("text"),innerHTML:String(t)},null):o("div",{class:H("text")},[t])};return M(()=>[e.show,e.forbidClick],r),M(()=>[e.show,e.type,e.message,e.duration],()=>{c(),e.show&&e.duration>0&&(a=setTimeout(()=>{l(!1)},e.duration))}),fe(r),Ne(r),()=>o(be,E({class:[H([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:v,onClosed:c,"onUpdate:show":l},ae(e,vn)),{default:()=>[m(),u()]})}});const ke={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let w=[],ee=!1,X=T({},ke);const Y=new Map;function _e(e){return Ue(e)?e:{message:e}}function gn(){const{instance:e,unmount:n}=Ze({setup(){const a=g(""),{open:i,state:r,close:l,toggle:v}=We(),c=()=>{ee&&(w=w.filter(u=>u!==e),n())},m=()=>o(pe,E(r,{onClosed:c,"onUpdate:show":v}),null);return M(a,u=>{r.message=u}),he().render=m,{open:i,clear:l,message:a}}});return e}function bn(){if(!w.length||ee){const e=gn();w.push(e)}return w[w.length-1]}function k(e={}){if(!ve)return{};const n=bn(),a=_e(e);return n.open(T({},X,Y.get(a.type||X.type),a)),n}const te=e=>n=>k(T({type:e},_e(n)));k.loading=te("loading");k.success=te("success");k.fail=te("fail");k.clear=e=>{var n;w.length&&(e?(w.forEach(a=>{a.clear()}),w=[]):ee?(n=w.shift())==null||n.clear():w[0].clear())};function yn(e,n){typeof e=="string"?Y.set(e,n):T(X,e)}k.setDefaultOptions=yn;k.resetDefaultOptions=e=>{typeof e=="string"?Y.delete(e):(X=T({},ke),Y.clear())};k.allowMultiple=(e=!0)=>{ee=e};k.install=e=>{e.use(j(pe)),e.config.globalProperties.$toast=k};const Ce={name:Q,shape:O("round"),disabled:Boolean,iconSize:V,modelValue:Q,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var pn=N({props:T({},Ce,{bem:Ee(Function),role:String,parent:Object,checked:Boolean,bindGroup:I}),emits:["click","toggle"],setup(e,{emit:n,slots:a}){const i=g(),r=t=>{if(e.parent&&e.bindGroup)return e.parent.props[t]},l=U(()=>r("disabled")||e.disabled),v=U(()=>r("direction")),c=U(()=>{const t=e.checkedColor||r("checkedColor");if(t&&e.checked&&!l.value)return{borderColor:t,backgroundColor:t}}),m=t=>{const{target:f}=t,b=i.value,y=b===f||(b==null?void 0:b.contains(f));!l.value&&(y||!e.labelDisabled)&&n("toggle"),n("click",t)},u=()=>{const{bem:t,shape:f,checked:b}=e,y=e.iconSize||r("iconSize");return o("div",{ref:i,class:t("icon",[f,{disabled:l.value,checked:b}]),style:{fontSize:K(y)}},[a.icon?a.icon({checked:b,disabled:l.value}):o(Z,{name:"success",style:c.value},null)])},s=()=>{if(a.default)return o("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[a.default()])};return()=>{const t=e.labelPosition==="left"?[s(),u()]:[u(),s()];return o("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},v.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:m},[t])}}});const[kn,L]=D("image"),_n={src:String,alt:String,fit:String,position:String,round:Boolean,width:V,height:V,radius:V,lazyLoad:Boolean,iconSize:V,showError:I,errorIcon:O("photo-fail"),iconPrefix:String,showLoading:I,loadingIcon:O("photo")};var Cn=N({name:kn,props:_n,emits:["load","error"],setup(e,{emit:n,slots:a}){const i=g(!1),r=g(!0),l=g(),{$Lazyload:v}=he().proxy,c=U(()=>{const d={width:K(e.width),height:K(e.height)};return me(e.radius)&&(d.overflow="hidden",d.borderRadius=K(e.radius)),d});M(()=>e.src,()=>{i.value=!1,r.value=!0});const m=d=>{r.value=!1,n("load",d)},u=d=>{i.value=!0,r.value=!1,n("error",d)},s=(d,x,B)=>B?B():o(Z,{name:d,size:e.iconSize,class:x,classPrefix:e.iconPrefix},null),t=()=>{if(r.value&&e.showLoading)return o("div",{class:L("loading")},[s(e.loadingIcon,L("loading-icon"),a.loading)]);if(i.value&&e.showError)return o("div",{class:L("error")},[s(e.errorIcon,L("error-icon"),a.error)])},f=()=>{if(i.value||!e.src)return;const d={alt:e.alt,class:L("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?De(o("img",E({ref:l},d),null),[[Fe("lazy"),e.src]]):o("img",E({src:e.src,onLoad:m,onError:u},d),null)},b=({el:d})=>{const x=()=>{d===l.value&&r.value&&m()};l.value?x():de(x)},y=({el:d})=>{d===l.value&&!i.value&&u()};return v&&ve&&(v.$on("loaded",b),v.$on("error",y),Me(()=>{v.$off("loaded",b),v.$off("error",y)})),()=>{var d;return o("div",{class:L({round:e.round}),style:c.value},[f(),t(),(d=a.default)==null?void 0:d.call(a)])}}});const wn=j(Cn),[we,Sn]=D("checkbox-group"),Pn={max:V,disabled:Boolean,iconSize:V,direction:String,modelValue:re(),checkedColor:String},Se=Symbol(we);N({name:we,props:Pn,emits:["change","update:modelValue"],setup(e,{emit:n,slots:a}){const{children:i,linkChildren:r}=qe(Se),l=c=>n("update:modelValue",c),v=(c={})=>{typeof c=="boolean"&&(c={checked:c});const{checked:m,skipDisabled:u}=c,t=i.filter(f=>f.props.bindGroup?f.props.disabled&&u?f.checked.value:m!=null?m:!f.checked.value:!1).map(f=>f.name);l(t)};return M(()=>e.modelValue,c=>n("change",c)),ye({toggleAll:v}),ge(()=>e.modelValue),r({props:e,updateValue:l}),()=>{var c;return o("div",{class:Sn([e.direction])},[(c=a.default)==null?void 0:c.call(a)])}}});const[xn,In]=D("checkbox"),Vn=T({},Ce,{bindGroup:I});var Bn=N({name:xn,props:Vn,emits:["change","update:modelValue"],setup(e,{emit:n,slots:a}){const{parent:i}=Ge(Se),r=c=>{const{name:m}=e,{max:u,modelValue:s}=i.props,t=s.slice();if(c)!(u&&t.length>=u)&&!t.includes(m)&&(t.push(m),e.bindGroup&&i.updateValue(t));else{const f=t.indexOf(m);f!==-1&&(t.splice(f,1),e.bindGroup&&i.updateValue(t))}},l=U(()=>i&&e.bindGroup?i.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),v=(c=!l.value)=>{i&&e.bindGroup?r(c):n("update:modelValue",c)};return M(()=>e.modelValue,c=>n("change",c)),ye({toggle:v,props:e,checked:l}),ge(()=>e.modelValue),()=>o(pn,E({bem:In,role:"checkbox",parent:i,checked:l.value,onToggle:v},e),ae(a,["default","icon"]))}});const An=j(Bn),[On,Tn]=D("divider"),zn={dashed:Boolean,hairline:I,contentPosition:O("center")};var $n=N({name:On,props:zn,setup(e,{slots:n}){return()=>{var a;return o("div",{role:"separator",class:Tn({dashed:e.dashed,hairline:e.hairline,[`content-${e.contentPosition}`]:!!n.default})},[(a=n.default)==null?void 0:a.call(n)])}}});const Nn=j($n);function Ln(e){return W({url:"/checkIdentityInfo",method:"post",data:e})}function Un(e){return W({url:"/getBeforeAuthTips",method:"post",data:e})}function En(e){return W({url:"/alipayAuthInit",method:"post",data:e})}function Mn(e){return W({url:"/alipayAuthQuery",method:"post",data:e})}var Dn="./assets/auth-logo.cdd60c32.png";function ce(e,n,a){if(!e)return"";for(var i=e.length-n-a,r="",l=0;l<i;l++)r+="*";return e.substring(0,n)+r+e.substring(e.length-a)}function Fn(e){return new URL({"/src/assets/auth-logo.png":Dn,"/src/assets/logo.png":ln}[`/src/assets/${e}.png`],self.location).href}const qn={class:"form-wrap"},Gn={style:{margin:"16px"}},Hn=R("\u63D0\u4EA4"),jn={class:"auth-logo"},Rn=R("\u52A0\u8F7D\u5931\u8D25"),Jn={class:"content"},Kn=["innerHTML"],Qn={class:"lower-tips"},Xn=["innerHTML"],Yn=R(" \u67E5\u770B "),Zn=["onClick","innerHTML"],Wn={class:"btn-group"},ea=R("\u53D6\u6D88\u6388\u6743"),na=R("\u786E\u8BA4\u6388\u6743"),aa={setup(e){const n=g(""),a=g(""),i=g(""),r=g(!1),l=g(""),v=g(!1),c=g(""),m=g(!1),u=g(!1),s=U(()=>a.value&&l.value),t=window.location.href.substring(window.location.href.indexOf("?")+1);t.includes("&")||(en.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const f=t.split("&"),b=f[0].replace(/loginToken=/g,""),y=f[1].replace(/certToken=/g,""),d=g(""),x=g(""),B=g({}),oe=g(""),le=g("");fe(async()=>{let{data:S}=await Ln({loginToken:b,certToken:y});n.value=S.foreBackUrl,S.userStatus!==2&&(a.value=S.fullName,i.value=ce(a.value,0,a.value.length-1),l.value=S.idNum,c.value=ce(l.value,3,2),r.value=v.value=!0,a.value&&l.value&&(m.value=!0));let{data:h}=await Un({certToken:y});d.value=h.beforeAuth,x.value=h.beforeProtocol,B.value=JSON.parse(h.protocols)[0]});const Pe={}.VITE_SERVICE_AGREEMENT,xe=()=>{window.location.href=B.value.url||Pe},se=()=>{u.value=!1,k("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(n.value)},1e3)},Ie=()=>{m.value=!0},Ve=async()=>{if(!u.value)return k("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");let{data:S}=await En({certToken:y,fullName:a.value,idNum:l.value});le.value=S.certifyId,oe.value=S.certifyUrl,m.value=!1,u.value=!1,Be(le.value,oe.value)},Be=(S,h)=>{console.log(window.AlipayJSBridge);function z(p){window.AlipayJSBridge?p&&p():document.addEventListener("AlipayJSBridgeReady",p,!1)}function ne(p,F){window.AlipayJSBridge.call("startBizService",{name:"open-certify",param:JSON.stringify(p)},F)}z(function(){ne({certifyId:S,url:h},async p=>{if(!p.result)se();else{k(p.resultStatus==="9000"?"\u8BA4\u8BC1\u901A\u8FC7":"\u8BA4\u8BC1\u5931\u8D25");let{data:F}=await Mn({loginToken:b,certToken:y,fullName:a.value,idNum:l.value,certifyId:p.result.certifyId});setTimeout(()=>{window.location.replace(F.foreBackUrl)},1e3)}})})};return(S,h)=>{const z=A("van-field"),ne=A("van-cell-group"),p=A("van-button"),F=A("van-image"),Ae=A("van-form"),Oe=A("van-divider"),Te=A("van-checkbox"),ze=A("van-action-sheet");return q(),He(je,null,[P("div",qn,[o(Ae,{onSubmit:Ie},{default:$(()=>[o(ne,{inset:""},{default:$(()=>[o(z,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),r.value?(q(),J(z,{key:0,modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=_=>i.value=_),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])):(q(),J(z,{key:1,modelValue:a.value,"onUpdate:modelValue":h[1]||(h[1]=_=>a.value=_),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),v.value?(q(),J(z,{key:2,modelValue:c.value,"onUpdate:modelValue":h[2]||(h[2]=_=>c.value=_),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(q(),J(z,{key:3,modelValue:l.value,"onUpdate:modelValue":h[3]||(h[3]=_=>l.value=_),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"]))]),_:1}),P("div",Gn,[o(p,{square:"",block:"",type:"primary",disabled:!ie(s),"native-type":"submit"},{default:$(()=>[Hn]),_:1},8,["disabled"])]),P("div",jn,[o(F,{src:ie(Fn)("auth-logo")},{error:$(()=>[Rn]),_:1},8,["src"])])]),_:1})]),o(ze,{show:m.value,"onUpdate:show":h[6]||(h[6]=_=>m.value=_),title:"\u8BA4\u8BC1\u6388\u6743"},{default:$(()=>[P("div",Jn,[P("div",{class:"upper-tips",innerHTML:d.value},null,8,Kn),o(Oe),P("div",Qn,[o(Te,{modelValue:u.value,"onUpdate:modelValue":h[4]||(h[4]=_=>u.value=_),shape:"square"},null,8,["modelValue"]),P("p",{class:"text",onClick:h[5]||(h[5]=_=>u.value=!u.value)},[P("span",{innerHTML:x.value},null,8,Xn),Yn,P("a",{class:"service-link",onClick:Re(xe,["stop"]),innerHTML:B.value.name},null,8,Zn)])]),P("div",Wn,[o(p,{square:"",plain:"",type:"primary",class:"authorize-btn to-cancel-authorize-btn",onClick:se},{default:$(()=>[ea]),_:1}),o(p,{square:"",type:"primary",class:Je(["to-authorize-btn","authorize-btn",{active:u.value}]),onClick:Ve},{default:$(()=>[na]),_:1},8,["class"])])])]),_:1},8,["show"])],64)}}};Ke(aa).use(Qe).use(nn).use(an).use(tn).use(on).use(dn).use(Nn).use(An).use(wn).mount("#app");
