import{h as H,l as Y,j as V,ai as Z,K as J,q as M,f as t,V as ee,$ as te,I as ye,ad as ne,aj as ae,R as be,x as R,y as _e,P as j,_ as le,n as $,N as xe,O as Q,r as p,A as ke,L as we,ak as Ve,a8 as Te,a9 as Ce,a7 as Ae,al as Se,a6 as Be,ac as Ie,Q as Pe,e as T,o as K,c as ze,a as k,w as P,F as Ne,am as L,u as W,an as Ke,d as E,g as Oe,B as He}from"./normalize.5c928299.js";import{c as Me,a as Le,s as U}from"./index.2a1e39dc.js";import{p as $e,a as Ee,P as Ue,u as oe,b as De,D as Fe}from"./index.32f640e6.js";import{a as Ge,T as G,D as qe}from"./index.03a6d275.js";import{c as Je,a as Re}from"./certification-successful.526fe7c8.js";import{_ as je}from"./logo.9e2f423b.js";import{F as Qe,a as We,C as Xe}from"./index.9d8ceccc.js";import{I as Ye}from"./index.8fe75bb2.js";const[Ze,x]=H("action-sheet"),et=Y({},$e,{title:String,round:V,actions:Z(),closeIcon:J("cross"),closeable:V,cancelText:String,description:String,closeOnPopstate:V,closeOnClickAction:Boolean,safeAreaInsetBottom:V}),tt=[...Ee,"round","closeOnPopstate","safeAreaInsetBottom"];var nt=M({name:Ze,props:et,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:l}){const o=i=>l("update:show",i),v=()=>{o(!1),l("cancel")},r=()=>{if(e.title)return t("div",{class:x("header")},[e.title,e.closeable&&t(ye,{name:e.closeIcon,class:[x("close"),ne],onClick:v},null)])},y=()=>{if(n.cancel||e.cancelText)return[t("div",{class:x("gap")},null),t("button",{type:"button",class:x("cancel"),onClick:v},[n.cancel?n.cancel():e.cancelText])]},s=(i,u)=>i.loading?t(ae,{class:x("loading-icon")},null):n.action?n.action({action:i,index:u}):[t("span",{class:x("name")},[i.name]),i.subname&&t("div",{class:x("subname")},[i.subname])],m=(i,u)=>{const{color:g,loading:A,callback:S,disabled:a,className:d}=i,f=()=>{a||A||(S&&S(i),e.closeOnClickAction&&o(!1),be(()=>l("select",i,u)))};return t("button",{type:"button",style:{color:g},class:[x("item",{loading:A,disabled:a}),d],onClick:f},[s(i,u)])},c=()=>{if(e.description||n.description){const i=n.description?n.description():e.description;return t("div",{class:x("description")},[i])}};return()=>t(Ue,ee({class:x(),position:"bottom","onUpdate:show":o},te(e,tt)),{default:()=>{var i;return[r(),c(),t("div",{class:x("content")},[e.actions.map(m),(i=n.default)==null?void 0:i.call(n)]),y()]}})}});const at=R(nt),[se,lt]=H("checkbox-group"),ot={max:$,disabled:Boolean,iconSize:$,direction:String,modelValue:Z(),checkedColor:String},ce=Symbol(se);M({name:se,props:ot,emits:["change","update:modelValue"],setup(e,{emit:n,slots:l}){const{children:o,linkChildren:v}=_e(ce),r=s=>n("update:modelValue",s),y=(s={})=>{typeof s=="boolean"&&(s={checked:s});const{checked:m,skipDisabled:c}=s,u=o.filter(g=>g.props.bindGroup?g.props.disabled&&c?g.checked.value:m!=null?m:!g.checked.value:!1).map(g=>g.name);r(u)};return j(()=>e.modelValue,s=>n("change",s)),oe({toggleAll:y}),le(()=>e.modelValue),v({props:e,updateValue:r}),()=>{var s;return t("div",{class:lt([e.direction])},[(s=l.default)==null?void 0:s.call(l)])}}});const[st,ct]=H("checkbox"),it=Y({},Me,{bindGroup:V});var rt=M({name:st,props:it,emits:["change","update:modelValue"],setup(e,{emit:n,slots:l}){const{parent:o}=xe(ce),v=s=>{const{name:m}=e,{max:c,modelValue:i}=o.props,u=i.slice();if(s)!(c&&u.length>=c)&&!u.includes(m)&&(u.push(m),e.bindGroup&&o.updateValue(u));else{const g=u.indexOf(m);g!==-1&&(u.splice(g,1),e.bindGroup&&o.updateValue(u))}},r=Q(()=>o&&e.bindGroup?o.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),y=(s=!r.value)=>{o&&e.bindGroup?v(s):n("update:modelValue",s)};return j(()=>e.modelValue,s=>n("change",s)),oe({toggle:y,props:e,checked:r}),le(()=>e.modelValue),()=>t(Le,ee({bem:ct,role:"checkbox",parent:o,checked:r.value,onToggle:y},e),te(l,["default","icon"]))}});const ut=R(rt),[dt,O]=H("key"),mt=t("svg",{class:O("collapse-icon"),viewBox:"0 0 30 24"},[t("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),ft=t("svg",{class:O("delete-icon"),viewBox:"0 0 32 22"},[t("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var q=M({name:dt,props:{type:String,text:$,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:n,slots:l}){const o=p(!1),v=De(),r=c=>{v.start(c),o.value=!0},y=c=>{v.move(c),v.direction.value&&(o.value=!1)},s=c=>{o.value&&(l.default||ke(c),o.value=!1,n("press",e.text,e.type))},m=()=>{if(e.loading)return t(ae,{class:O("loading-icon")},null);const c=l.default?l.default():e.text;switch(e.type){case"delete":return c||ft;case"extra":return c||mt;default:return c}};return()=>t("div",{class:O("wrapper",{wider:e.wider}),onTouchstart:r,onTouchmove:y,onTouchend:s,onTouchcancel:s},[t("div",{role:"button",tabindex:0,class:O([e.color,{large:e.large,active:o.value,delete:e.type==="delete"}])},[m()])])}});const[ht,C]=H("number-keyboard"),vt={show:Boolean,title:String,theme:J("default"),zIndex:$,teleport:[String,Object],maxlength:we(1/0),modelValue:J(""),transition:V,blurOnClose:V,showDeleteKey:V,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:V,safeAreaInsetBottom:V,extraKey:{type:[String,Array],default:""}};function gt(e){for(let n=e.length-1;n>0;n--){const l=Math.floor(Math.random()*(n+1)),o=e[n];e[n]=e[l],e[l]=o}return e}var pt=M({name:ht,props:vt,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:n,slots:l}){const o=p(),v=()=>{const a=Array(9).fill("").map((d,f)=>({text:f+1}));return e.randomKeyOrder&&gt(a),a},r=()=>[...v(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],y=()=>{const a=v(),{extraKey:d}=e,f=Array.isArray(d)?d:[d];return f.length===1?a.push({text:0,wider:!0},{text:f[0],type:"extra"}):f.length===2&&a.push({text:f[0],type:"extra"},{text:0},{text:f[1],type:"extra"}),a},s=Q(()=>e.theme==="custom"?y():r()),m=()=>{e.show&&n("blur")},c=()=>{n("close"),e.blurOnClose&&m()},i=()=>n(e.show?"show":"hide"),u=(a,d)=>{if(a===""){d==="extra"&&m();return}const f=e.modelValue;d==="delete"?(n("delete"),n("update:modelValue",f.slice(0,f.length-1))):d==="close"?c():f.length<e.maxlength&&(n("input",a),n("update:modelValue",f+a))},g=()=>{const{title:a,theme:d,closeButtonText:f}=e,B=l["title-left"],z=f&&d==="default";if(!!(a||z||B))return t("div",{class:C("header")},[B&&t("span",{class:C("title-left")},[B()]),a&&t("h2",{class:C("title")},[a]),z&&t("button",{type:"button",class:[C("close"),ne],onClick:c},[f])])},A=()=>s.value.map(a=>{const d={};return a.type==="delete"&&(d.default=l.delete),a.type==="extra"&&(d.default=l["extra-key"]),t(q,{key:a.text,text:a.text,type:a.type,wider:a.wider,color:a.color,onPress:u},d)}),S=()=>{if(e.theme==="custom")return t("div",{class:C("sidebar")},[e.showDeleteKey&&t(q,{large:!0,text:e.deleteButtonText,type:"delete",onPress:u},{delete:l.delete}),t(q,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:u},null)])};return j(()=>e.show,a=>{e.transition||n(a?"show":"hide")}),e.hideOnClickOutside&&Ve(o,m,{eventName:"touchstart"}),()=>{const a=g(),d=t(Be,{name:e.transition?"van-slide-up":""},{default:()=>[Te(t("div",{ref:o,style:Ae(e.zIndex),class:C({unfit:!e.safeAreaInsetBottom,"with-title":!!a}),onTouchstart:Se,onAnimationend:i,onWebkitAnimationEnd:i},[a,t("div",{class:C("body")},[t("div",{class:C("keys")},[A()]),S()])]),[[Ce,e.show]])]});return e.teleport?t(Ie,{to:e.teleport},{default:()=>[d]}):d}}});const yt=R(pt);function bt(e){return U({url:"/checkIdentityInfo",method:"post",data:e})}function _t(e){return U({url:"/getBeforeAuthTips",method:"post",data:e})}function xt(e){return U({url:"/alipayAuthInit",method:"post",data:e})}function kt(e){return U({url:"/alipayAuthQuery",method:"post",data:e})}var wt="./assets/auth-logo.cdd60c32.png";function X(e,n,l){if(!e)return"";for(var o=e.length-n-l,v="",r=0;r<o;r++)v+="*";return e.substring(0,n)+v+e.substring(e.length-l)}function Vt(e){return new URL({"/src/assets/auth-logo.png":wt,"/src/assets/auth-task-logo.png":Ge,"/src/assets/certification-failed.png":Je,"/src/assets/certification-successful.png":Re,"/src/assets/logo.png":je}[`/src/assets/${e}.png`],self.location).href}const Tt={class:"form-wrap"},Ct={style:{margin:"16px"}},At=E("\u63D0\u4EA4"),St={class:"auth-logo"},Bt=E("\u52A0\u8F7D\u5931\u8D25"),It={class:"content"},Pt=["innerHTML"],zt=k("div",{class:"center-tips"},"\u672C\u6B21\u8BA4\u8BC1\u9700\u8981\u901A\u8FC7\u4EBA\u8138\u8BC6\u522B\u9A8C\u8BC1\u8EAB\u4EFD\u4FE1\u606F",-1),Nt={class:"lower-tips"},Kt=["innerHTML"],Ot=E(" \u67E5\u770B "),Ht=["onClick","innerHTML"],Mt={class:"btn-group"},Lt=E("\u786E\u8BA4\u6388\u6743"),$t={setup(e){const n=p(""),l=p(""),o=p(""),v=p(!1),r=p(""),y=p(!1),s=p(""),m=p(!1),c=p(!1),i=Q(()=>l.value&&r.value);let u=window.location.href;u.includes("&")||Fe.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"});const g=u.substring(u.indexOf("?")+1),A=new URLSearchParams(g),S=A.get("loginToken")||"",a=A.get("certToken")||"",d=p(""),f=p(""),B=p({}),z=p(""),D=p("");Pe(async()=>{let{data:w}=await bt({loginToken:S,certToken:a});n.value=w.foreBackUrl,w.userStatus!==2&&(l.value=w.fullName,o.value=X(l.value,0,l.value.length-1),r.value=w.idNum,s.value=X(r.value,3,2),v.value=y.value=!0,l.value&&r.value&&(m.value=!0));let{data:h}=await _t({certToken:a});d.value=h.beforeAuth,f.value=h.beforeProtocol,B.value=JSON.parse(h.protocols)[0]});const ie={}.VITE_SERVICE_AGREEMENT,re=()=>{window.location.href=B.value.url||ie},ue=()=>{c.value=!1,G("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(n.value)},1e3)},de=()=>{m.value=!0},me=async()=>{if(!c.value)return G("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");let{data:w}=await xt({certToken:a,fullName:l.value,idNum:r.value});D.value=w.certifyId,z.value=w.certifyUrl,m.value=!1,c.value=!1,fe(D.value,z.value)},fe=(w,h)=>{function I(b){window.AlipayJSBridge?b&&b():document.addEventListener("AlipayJSBridgeReady",b,!1)}function F(b,N){window.AlipayJSBridge.call("startBizService",{name:"open-certify",param:JSON.stringify(b)},N)}I(function(){F({certifyId:w,url:h},async b=>{if(!b.result)ue();else{G(b.resultStatus==="9000"?"\u8BA4\u8BC1\u901A\u8FC7":"\u8BA4\u8BC1\u5931\u8D25");let{data:N}=await kt({loginToken:S,certToken:a,fullName:l.value,idNum:r.value,certifyId:b.result.certifyId});setTimeout(()=>{window.location.replace(N.foreBackUrl)},1e3)}})})};return(w,h)=>{const I=T("van-field"),F=T("van-cell-group"),b=T("van-button"),N=T("van-image"),he=T("van-form"),ve=T("van-divider"),ge=T("van-checkbox"),pe=T("van-action-sheet");return K(),ze(Ne,null,[k("div",Tt,[t(he,{onSubmit:de},{default:P(()=>[t(F,{inset:""},{default:P(()=>[t(I,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),v.value?(K(),L(I,{key:0,modelValue:o.value,"onUpdate:modelValue":h[0]||(h[0]=_=>o.value=_),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",maxlength:"18"},null,8,["modelValue"])):(K(),L(I,{key:1,modelValue:l.value,"onUpdate:modelValue":h[1]||(h[1]=_=>l.value=_),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),y.value?(K(),L(I,{key:2,modelValue:s.value,"onUpdate:modelValue":h[2]||(h[2]=_=>s.value=_),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(K(),L(I,{key:3,modelValue:r.value,"onUpdate:modelValue":h[3]||(h[3]=_=>r.value=_),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"]))]),_:1}),k("div",Ct,[t(b,{square:"",block:"",type:"primary",disabled:!W(i),"native-type":"submit"},{default:P(()=>[At]),_:1},8,["disabled"])]),k("div",St,[t(N,{src:W(Vt)("auth-logo")},{error:P(()=>[Bt]),_:1},8,["src"])])]),_:1})]),t(pe,{show:m.value,"onUpdate:show":h[6]||(h[6]=_=>m.value=_),title:"\u8BA4\u8BC1\u6388\u6743"},{default:P(()=>[k("div",It,[k("div",{class:"upper-tips",innerHTML:d.value},null,8,Pt),zt,t(ve),k("div",Nt,[t(ge,{modelValue:c.value,"onUpdate:modelValue":h[4]||(h[4]=_=>c.value=_),shape:"square"},null,8,["modelValue"]),k("p",{class:"text",onClick:h[5]||(h[5]=_=>c.value=!c.value)},[k("span",{innerHTML:f.value},null,8,Kt),Ot,k("a",{class:"service-link",onClick:Ke(re,["stop"]),innerHTML:B.value.name},null,8,Ht)])]),k("div",Mt,[t(b,{block:"",square:"",type:"primary",onClick:me},{default:P(()=>[Lt]),_:1})])])]),_:1},8,["show"])],64)}}};Oe($t).use(He).use(Qe).use(We).use(Xe).use(yt).use(at).use(qe).use(ut).use(Ye).mount("#app");
