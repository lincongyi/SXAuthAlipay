var Q=Object.defineProperty,W=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var S=(t,s,l)=>s in t?Q(t,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[s]=l,M=(t,s)=>{for(var l in s||(s={}))Y.call(s,l)&&S(t,l,s[l]);if(N)for(var l of N(s))j.call(s,l)&&S(t,l,s[l]);return t},R=(t,s)=>W(t,X(s));import{d as K,r as B,s as $,H as Z,N as ee,ab as se,f as v,o as te,c as le,a as e,g as o,T as i,w as E,F as ce,e as p,t as n,h as oe,L as ue,B as ae,Y as ie}from"./normalize.729e6abb.js";import{s as L,T as ne,D as de}from"./index.f01a553a.js";import{l as re,a as ve}from"./index.4221fb29.js";import{O as _e}from"./certification-successful.6420e1bd.js";import{I as Fe}from"./index.1d1dac34.js";import{a as he,R as me}from"./index.d63e21f0.js";import"./logo.9e2f423b.js";const{VITE_DEMO_BASE_URL:O}=re();function Be(t){const s=`${O}/fama/demo/getcerttoken`;return L.post(s,t)}function Ee(t){const s=`${O}/fama/demo/getcerttokenimg`;return L.post(s,t)}const pe=navigator.userAgent,Ae=/(msie\s|trident.*rv:)([\w.]+)/,fe=/(firefox)\/([\w.]+)/,Ce=/(opera).+version\/([\w.]+)/,ge=/(chrome)\/([\w.]+)/,we=/version\/([\w.]+).*(safari)/;function De(){return xe(pe.toLowerCase())}function xe(t){let s=Ae.exec(t);return s!==null?{browser:"IE",version:s[2]||"0"}:(s=fe.exec(t),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=Ce.exec(t),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=ge.exec(t),s!==null?{browser:s[1]||"",version:s[2]||"0"}:(s=we.exec(t),s!==null?{browser:s[2]||"",version:s[1]||"0"}:{browser:"",version:"0"}))))}const ye={class:"container"},Te={class:"title"},be=p(" \u9655\u897F\u5B9E\u4EBA\u8BA4\u8BC1 "),ke={class:"content"},Ie=p(" \u5237\u65B0or\u751F\u6210\u4E8C\u7EF4\u7801 "),Ne=p("\u5B9E\u540D"),Se=p("\u5B9E\u540D+\u5B9E\u4EBA"),Me=e("div",{class:"tips"},"\u8BF7\u4F7F\u7528\u9655\u897F\u516C\u6C11\u5B9E\u4EBA\u8BA4\u8BC1\u5C0F\u7A0B\u5E8F\u626B\u7801\u8BA4\u8BC1",-1),Re={class:"overlay-content"},$e={class:"overlay-container"},Le={class:"section"},Oe={class:"card"},Ue=e("div",{class:"card-title"},"\u8EAB\u4EFD\u4FE1\u606F",-1),Ve={class:"cell mgt10"},He=e("div",{class:"cell-title"},"\u7167\u7247\uFF1A",-1),Je={class:"cell-value"},ze={class:"cell"},Ge=e("div",{class:"cell-title"},"\u59D3\u540D\uFF1A",-1),Pe={class:"cell-value"},qe={class:"cell"},Qe=e("div",{class:"cell-title"},"\u8EAB\u4EFD\u53F7\u7801\uFF1A",-1),We={class:"cell-value"},Xe=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8B66\u53F7/\u5DE5\u53F7\uFF1A"),e("div",{class:"cell-value"})],-1),Ye=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u5355\u4F4D\uFF1A"),e("div",{class:"cell-value"})],-1),je={class:"cell"},Ke=e("div",{class:"cell-title"},"\u624B\u673A\u53F7\uFF1A",-1),Ze={class:"cell-value"},es=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7F51\u8BC1\u6807\u8BC6\uFF1A"),e("div",{class:"cell-value"})],-1),ss={class:"section"},ts={class:"card"},ls=e("div",{class:"card-title"},"\u8BA4\u8BC1\u4FE1\u606F",-1),cs=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BA4\u8BC1\u5E73\u53F0\uFF1A"),e("div",{class:"cell-value"},"\u9655\u897F\u7701\u5B9E\u4EBA\u8BA4\u8BC1\u5E73\u53F0")],-1),os={class:"cell"},us=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u6A21\u5F0F\uFF1A",-1),as={class:"cell-value"},is={class:"cell"},ns=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u7C7B\u578B\uFF1A",-1),ds={class:"cell-value"},rs={class:"cell"},vs=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u7B49\u7EA7\uFF1A",-1),_s={class:"cell-value"},Fs={class:"card"},hs=e("div",{class:"card-title"},"\u7EC8\u7AEF\u4FE1\u606F",-1),ms={class:"cell"},Bs=e("div",{class:"cell-title"},"\u7EC8\u7AEF\u7CFB\u7EDF/\u7248\u672C\uFF1A",-1),Es={class:"cell-value"},ps=e("div",{class:"cell-title"},"\u7EC8\u7AEF\u5355\u4F4D\uFF1A",-1),As=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7EC8\u7AEFMac\u5730\u5740\uFF1A"),e("div",{class:"cell-value"})],-1),fs=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7EC8\u7AEFip\u5730\u5740\uFF1A"),e("div",{class:"cell-value"})],-1),Cs=e("div",{class:"card"},[e("div",{class:"card-title"},"\u624B\u673A\u4FE1\u606F"),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BBE\u5907ID(IMEI/UUID)\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u624B\u673A\u5382\u5BB6/\u578B\u53F7\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u7CFB\u7EDF\u7C7B\u522B/\u7248\u672C\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u4E0A\u7F51\u65B9\u5F0F\uFF1A"),e("div",{class:"cell-value"})]),e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u8BA4\u8BC1\u8F6F\u4EF6/\u7248\u672C\uFF1A"),e("div",{class:"cell-value"})])],-1),gs={class:"card"},ws=e("div",{class:"card-title"},"\u65F6\u7A7A\u4FE1\u606F",-1),Ds={class:"cell"},xs=e("div",{class:"cell-title"},"\u8BA4\u8BC1\u65F6\u95F4\uFF1A",-1),ys={class:"cell-value"},Ts=e("div",{class:"cell"},[e("div",{class:"cell-title"},"\u5730\u7406\u4F4D\u7F6E\uFF1A"),e("div",{class:"cell-value"})],-1),bs={class:"btn-wrap"},ks=p("\u5173\u95ED"),Is=K({setup(t){const l=B(!1),U=B(""),w=B(""),C=B(!1),D=B(""),x="\u5927\u767D\u4E92\u8054\u7F51\u79D1\u6280\u6709\u9650\u516C\u53F8";let u=$({}),A=$({certAnnexType:0,mode:"66"});const V=[{mode:64,level:"D"},{mode:66,level:"C"}],H=Z(()=>{let r=Number(A.mode),a=V.find(c=>c.mode===r);return a==null?void 0:a.level});let{browser:y,version:T}=De();const b=async r=>{let a=await Be(R(M({},A),{businessExtraInfo:JSON.stringify({terminalUnit:x,system:`${y}/${T}`})})),{img:c,cert_token:_}=a.data;U.value=_,w.value=`data:image/png;base64,${c}`,G(_),r&&r()};let g,d;const J="wss://sfrz.wsbs.shxga.gov.cn/socket/conn",z=30,G=r=>{d=new WebSocket(J),d.onopen=()=>{d.send(JSON.stringify({flag:"getCertCode",cert_token:r})),g=setInterval(()=>{d.send("{}")},z*1e3)},d.onmessage=async({data:a})=>{let c=JSON.parse(a);u.name=c.full_name,u.idNum=c.id_no,u.mode=c.mode,u.time=c.createdTime;let _=c.cert_token,f=await Ee({certToken:_}),{authInfo:h,img:F,userInfo:m}=f;u.authType=h==null?void 0:h.authType,u.phoneNum=m==null?void 0:m.phoneNum,D.value=`data:image/png;base64,${F}`,C.value=!0},d.onclose=()=>{clearInterval(g),g=null}},k=()=>{l.value=!0,b(()=>{setTimeout(()=>{l.value=!1},3*1e3)})},P=()=>{if(l.value)return ne({message:"\u8BF7\u52FF\u9891\u7E41\u5237\u65B0\u4E8C\u7EF4\u7801",forbidClick:!0});k()};return ee(()=>{b()}),se(()=>{d.close()}),(r,a)=>{const c=v("van-image"),_=v("van-icon"),f=v("van-radio"),h=v("van-radio-group"),F=v("van-divider"),m=v("van-button"),q=v("van-overlay");return te(),le(ce,null,[e("div",ye,[e("div",Te,[o(c,{class:"logo",width:"40px",height:"40px",fit:"contain",src:i(ve)},null,8,["src"]),be]),e("div",ke,[o(c,{width:"280px",height:"280px",fit:"contain",src:w.value},null,8,["src"]),e("div",{class:"refresh",onClick:P},[o(_,{name:"replay"}),Ie]),o(h,{modelValue:i(A).mode,"onUpdate:modelValue":a[0]||(a[0]=I=>i(A).mode=I),direction:"horizontal",onChange:k},{default:E(()=>[o(f,{name:"64"},{default:E(()=>[Ne]),_:1}),o(f,{name:"66"},{default:E(()=>[Se]),_:1})]),_:1},8,["modelValue"]),Me])]),o(q,{show:C.value},{default:E(()=>[e("div",Re,[e("div",$e,[e("div",Le,[e("div",Oe,[Ue,e("div",Ve,[He,e("div",Je,[o(c,{width:"120px",height:"160px",fit:"contain",src:D.value},null,8,["src"])])]),e("div",ze,[Ge,e("div",Pe,n(i(u).name),1)]),e("div",qe,[Qe,e("div",We,n(i(u).idNum),1)]),Xe,Ye,e("div",je,[Ke,e("div",Ze,n(i(u).phoneNum),1)]),es])]),e("div",ss,[e("div",ts,[ls,cs,e("div",os,[us,e("div",as,n(i(u).mode),1)]),e("div",is,[ns,e("div",ds,n(i(u).authType),1)]),e("div",rs,[vs,e("div",_s,n(i(H)),1)])]),o(F),e("div",Fs,[hs,e("div",ms,[Bs,e("div",Es,n(`${i(y)}/${i(T)}`),1)]),e("div",{class:"cell"},[ps,e("div",{class:"cell-value"},n(x))]),As,fs]),o(F),Cs,o(F),e("div",gs,[ws,e("div",Ds,[xs,e("div",ys,n(i(u).time),1)]),Ts])])]),o(F),e("div",bs,[o(m,{type:"primary",block:"",plain:"",onClick:a[1]||(a[1]=I=>C.value=!1)},{default:E(()=>[ks]),_:1})])])]),_:1},8,["show"])],64)}}});oe(Is).use(ue).use(Fe).use(ae).use(ie).use(he).use(me).use(_e).use(de).mount("#app");
