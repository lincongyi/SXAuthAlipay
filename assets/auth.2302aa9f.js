import{h as N,A as $,z as C,ai as de,P as z,i as M,f as n,v as X,s as ne,I as fe,ad as me,aj as ae,U as Ie,m as j,k as K,T as ve,ak as Oe,n as U,al as ze,u as ce,E as Ne,ah as $e,N as Me,r as y,O as He,j as Ke,l as he,q as Ue,S as oe,H as De,Q as Ee,am as Le,a8 as Fe,a9 as qe,a7 as Ge,an as je,a6 as Je,ac as Qe,e as P,o as L,c as Re,a as T,w as O,F as We,ao as Q,x as re,ap as Xe,aq as Ye,d as J,g as Ze,B as et}from"./normalize.f2eadb3f.js";import{c as tt,s as nt,a as Y,F as at,b as ot,C as lt}from"./index.71a0b5df.js";import{p as st,a as it,P as ge,m as ct,b as rt,u as pe,c as ut,D as dt}from"./index.4a7d1510.js";import{c as ft,a as mt,I as vt}from"./index.fa3011d9.js";import{_ as ht}from"./logo.29c3ea92.js";const[gt,w]=N("action-sheet"),pt=$({},st,{title:String,round:C,actions:de(),closeIcon:z("cross"),closeable:C,cancelText:String,description:String,closeOnPopstate:C,closeOnClickAction:Boolean,safeAreaInsetBottom:C}),yt=[...it,"round","closeOnPopstate","safeAreaInsetBottom"];var bt=M({name:gt,props:pt,emits:["select","cancel","update:show"],setup(e,{slots:t,emit:a}){const o=s=>a("update:show",s),d=()=>{o(!1),a("cancel")},u=()=>{if(e.title)return n("div",{class:w("header")},[e.title,e.closeable&&n(fe,{name:e.closeIcon,class:[w("close"),me],onClick:d},null)])},p=()=>{if(t.cancel||e.cancelText)return[n("div",{class:w("gap")},null),n("button",{type:"button",class:w("cancel"),onClick:d},[t.cancel?t.cancel():e.cancelText])]},i=(s,r)=>s.loading?n(ae,{class:w("loading-icon")},null):t.action?t.action({action:s,index:r}):[n("span",{class:w("name")},[s.name]),s.subname&&n("div",{class:w("subname")},[s.subname])],f=(s,r)=>{const{color:h,loading:B,callback:_,disabled:c,className:m}=s,v=()=>{c||B||(_&&_(s),e.closeOnClickAction&&o(!1),Ie(()=>a("select",s,r)))};return n("button",{type:"button",style:{color:h},class:[w("item",{loading:B,disabled:c}),m],onClick:v},[i(s,r)])},l=()=>{if(e.description||t.description){const s=t.description?t.description():e.description;return n("div",{class:w("description")},[s])}};return()=>n(ge,X({class:w(),position:"bottom","onUpdate:show":o},ne(e,yt)),{default:()=>{var s;return[u(),l(),n("div",{class:w("content")},[e.actions.map(f),(s=t.default)==null?void 0:s.call(t)]),p()]}})}});const kt=j(bt);let F=0;function xt(e){e?(F||document.body.classList.add("van-toast--unclickable"),F++):F&&(F--,F||document.body.classList.remove("van-toast--unclickable"))}const[_t,q]=N("toast"),wt=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Ct={icon:String,show:Boolean,type:z("text"),overlay:Boolean,message:U,iconSize:U,duration:ze(2e3),position:z("middle"),teleport:[String,Object],className:ce,iconPrefix:String,transition:z("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:ce,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ye=M({name:_t,props:Ct,emits:["update:show"],setup(e,{emit:t}){let a,o=!1;const d=()=>{const s=e.show&&e.forbidClick;o!==s&&(o=s,xt(o))},u=s=>t("update:show",s),p=()=>{e.closeOnClick&&u(!1)},i=()=>clearTimeout(a),f=()=>{const{icon:s,type:r,iconSize:h,iconPrefix:B,loadingType:_}=e;if(s||r==="success"||r==="fail")return n(fe,{name:s||r,size:h,class:q("icon"),classPrefix:B},null);if(r==="loading")return n(ae,{class:q("loading"),size:h,type:_},null)},l=()=>{const{type:s,message:r}=e;if(Ne(r)&&r!=="")return s==="html"?n("div",{key:0,class:q("text"),innerHTML:String(r)},null):n("div",{class:q("text")},[r])};return K(()=>[e.show,e.forbidClick],d),K(()=>[e.show,e.type,e.message,e.duration],()=>{i(),e.show&&e.duration>0&&(a=setTimeout(()=>{u(!1)},e.duration))}),ve(d),Oe(d),()=>n(ge,X({class:[q([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:p,onClosed:i,"onUpdate:show":u},ne(e,wt)),{default:()=>[f(),l()]})}});const be={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let S=[],Z=!1,R=$({},be);const W=new Map;function ke(e){return Me(e)?e:{message:e}}function St(){const{instance:e,unmount:t}=ct({setup(){const a=y(""),{open:o,state:d,close:u,toggle:p}=rt(),i=()=>{Z&&(S=S.filter(l=>l!==e),t())},f=()=>n(ye,X(d,{onClosed:i,"onUpdate:show":p}),null);return K(a,l=>{d.message=l}),He().render=f,{open:o,clear:u,message:a}}});return e}function Vt(){if(!S.length||Z){const e=St();S.push(e)}return S[S.length-1]}function k(e={}){if(!$e)return{};const t=Vt(),a=ke(e);return t.open($({},R,W.get(a.type||R.type),a)),t}const le=e=>t=>k($({type:e},ke(t)));k.loading=le("loading");k.success=le("success");k.fail=le("fail");k.clear=e=>{var t;S.length&&(e?(S.forEach(a=>{a.clear()}),S=[]):Z?(t=S.shift())==null||t.clear():S[0].clear())};function Tt(e,t){typeof e=="string"?W.set(e,t):$(R,e)}k.setDefaultOptions=Tt;k.resetDefaultOptions=e=>{typeof e=="string"?W.delete(e):(R=$({},be),W.clear())};k.allowMultiple=(e=!0)=>{Z=e};k.install=e=>{e.use(j(ye)),e.config.globalProperties.$toast=k};const[xe,Bt]=N("checkbox-group"),Pt={max:U,disabled:Boolean,iconSize:U,direction:String,modelValue:de(),checkedColor:String},_e=Symbol(xe);M({name:xe,props:Pt,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const{children:o,linkChildren:d}=Ke(_e),u=i=>t("update:modelValue",i),p=(i={})=>{typeof i=="boolean"&&(i={checked:i});const{checked:f,skipDisabled:l}=i,r=o.filter(h=>h.props.bindGroup?h.props.disabled&&l?h.checked.value:f!=null?f:!h.checked.value:!1).map(h=>h.name);u(r)};return K(()=>e.modelValue,i=>t("change",i)),pe({toggleAll:p}),he(()=>e.modelValue),d({props:e,updateValue:u}),()=>{var i;return n("div",{class:Bt([e.direction])},[(i=a.default)==null?void 0:i.call(a)])}}});const[At,It]=N("checkbox"),Ot=$({},tt,{bindGroup:C});var zt=M({name:At,props:Ot,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const{parent:o}=Ue(_e),d=i=>{const{name:f}=e,{max:l,modelValue:s}=o.props,r=s.slice();if(i)!(l&&r.length>=l)&&!r.includes(f)&&(r.push(f),e.bindGroup&&o.updateValue(r));else{const h=r.indexOf(f);h!==-1&&(r.splice(h,1),e.bindGroup&&o.updateValue(r))}},u=oe(()=>o&&e.bindGroup?o.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),p=(i=!u.value)=>{o&&e.bindGroup?d(i):t("update:modelValue",i)};return K(()=>e.modelValue,i=>t("change",i)),pe({toggle:p,props:e,checked:u}),he(()=>e.modelValue),()=>n(nt,X({bem:It,role:"checkbox",parent:o,checked:u.value,onToggle:p},e),ne(a,["default","icon"]))}});const Nt=j(zt),[$t,Mt]=N("divider"),Ht={dashed:Boolean,hairline:C,contentPosition:z("center")};var Kt=M({name:$t,props:Ht,setup(e,{slots:t}){return()=>{var a;return n("div",{role:"separator",class:Mt({dashed:e.dashed,hairline:e.hairline,[`content-${e.contentPosition}`]:!!t.default})},[(a=t.default)==null?void 0:a.call(t)])}}});const Ut=j(Kt),[Dt,G]=N("key"),Et=n("svg",{class:G("collapse-icon"),viewBox:"0 0 30 24"},[n("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),Lt=n("svg",{class:G("delete-icon"),viewBox:"0 0 32 22"},[n("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var te=M({name:Dt,props:{type:String,text:U,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:t,slots:a}){const o=y(!1),d=ut(),u=l=>{d.start(l),o.value=!0},p=l=>{d.move(l),d.direction.value&&(o.value=!1)},i=l=>{o.value&&(a.default||De(l),o.value=!1,t("press",e.text,e.type))},f=()=>{if(e.loading)return n(ae,{class:G("loading-icon")},null);const l=a.default?a.default():e.text;switch(e.type){case"delete":return l||Lt;case"extra":return l||Et;default:return l}};return()=>n("div",{class:G("wrapper",{wider:e.wider}),onTouchstart:u,onTouchmove:p,onTouchend:i,onTouchcancel:i},[n("div",{role:"button",tabindex:0,class:G([e.color,{large:e.large,active:o.value,delete:e.type==="delete"}])},[f()])])}});const[Ft,A]=N("number-keyboard"),qt={show:Boolean,title:String,theme:z("default"),zIndex:U,teleport:[String,Object],maxlength:Ee(1/0),modelValue:z(""),transition:C,blurOnClose:C,showDeleteKey:C,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:C,safeAreaInsetBottom:C,extraKey:{type:[String,Array],default:""}};function Gt(e){for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[a],e[a]=o}return e}var jt=M({name:Ft,props:qt,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:t,slots:a}){const o=y(),d=()=>{const c=Array(9).fill("").map((m,v)=>({text:v+1}));return e.randomKeyOrder&&Gt(c),c},u=()=>[...d(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],p=()=>{const c=d(),{extraKey:m}=e,v=Array.isArray(m)?m:[m];return v.length===1?c.push({text:0,wider:!0},{text:v[0],type:"extra"}):v.length===2&&c.push({text:v[0],type:"extra"},{text:0},{text:v[1],type:"extra"}),c},i=oe(()=>e.theme==="custom"?p():u()),f=()=>{e.show&&t("blur")},l=()=>{t("close"),e.blurOnClose&&f()},s=()=>t(e.show?"show":"hide"),r=(c,m)=>{if(c===""){m==="extra"&&f();return}const v=e.modelValue;m==="delete"?(t("delete"),t("update:modelValue",v.slice(0,v.length-1))):m==="close"?l():v.length<e.maxlength&&(t("input",c),t("update:modelValue",v+c))},h=()=>{const{title:c,theme:m,closeButtonText:v}=e,H=a["title-left"],D=v&&m==="default";if(!!(c||D||H))return n("div",{class:A("header")},[H&&n("span",{class:A("title-left")},[H()]),c&&n("h2",{class:A("title")},[c]),D&&n("button",{type:"button",class:[A("close"),me],onClick:l},[v])])},B=()=>i.value.map(c=>{const m={};return c.type==="delete"&&(m.default=a.delete),c.type==="extra"&&(m.default=a["extra-key"]),n(te,{key:c.text,text:c.text,type:c.type,wider:c.wider,color:c.color,onPress:r},m)}),_=()=>{if(e.theme==="custom")return n("div",{class:A("sidebar")},[e.showDeleteKey&&n(te,{large:!0,text:e.deleteButtonText,type:"delete",onPress:r},{delete:a.delete}),n(te,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:r},null)])};return K(()=>e.show,c=>{e.transition||t(c?"show":"hide")}),e.hideOnClickOutside&&Le(o,f,{eventName:"touchstart"}),()=>{const c=h(),m=n(Je,{name:e.transition?"van-slide-up":""},{default:()=>[Fe(n("div",{ref:o,style:Ge(e.zIndex),class:A({unfit:!e.safeAreaInsetBottom,"with-title":!!c}),onTouchstart:je,onAnimationend:s,onWebkitAnimationEnd:s},[c,n("div",{class:A("body")},[n("div",{class:A("keys")},[B()]),_()])]),[[qe,e.show]])]});return e.teleport?n(Qe,{to:e.teleport},{default:()=>[m]}):m}}});const Jt=j(jt);function Qt(e){return Y({url:"/checkIdentityInfo",method:"post",data:e})}function Rt(e){return Y({url:"/getBeforeAuthTips",method:"post",data:e})}function Wt(e){return Y({url:"/alipayAuthInit",method:"post",data:e})}function Xt(e){return Y({url:"/alipayAuthQuery",method:"post",data:e})}var Yt="./assets/auth-logo.cdd60c32.png";function ue(e,t,a){if(!e)return"";for(var o=e.length-t-a,d="",u=0;u<o;u++)d+="*";return e.substring(0,t)+d+e.substring(e.length-a)}function Zt(e){return new URL({"/src/assets/auth-logo.png":Yt,"/src/assets/certification-failed.png":ft,"/src/assets/certification-successful.png":mt,"/src/assets/logo.png":ht}[`/src/assets/${e}.png`],self.location).href}const en={class:"form-wrap"},tn={style:{margin:"16px"}},nn=J("\u63D0\u4EA4"),an={class:"auth-logo"},on=J("\u52A0\u8F7D\u5931\u8D25"),ln={class:"content"},sn=["innerHTML"],cn={class:"lower-tips"},rn=["innerHTML"],un=J(" \u67E5\u770B "),dn=["onClick","innerHTML"],fn={class:"btn-group"},mn=J("\u53D6\u6D88\u6388\u6743"),vn=J("\u786E\u8BA4\u6388\u6743"),hn={setup(e){const t=y(""),a=y(""),o=y(""),d=y(!1),u=y(""),p=y(!1),i=y(""),f=y(!1),l=y(!1),s=oe(()=>a.value&&u.value),r=window.location.href.substring(window.location.href.indexOf("?")+1);r.includes("&")||(dt.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const h=r.split("&"),B=h[0].replace(/loginToken=/g,""),_=h[1].replace(/certToken=/g,""),c=y(""),m=y(""),v=y({}),H=y(""),D=y("");ve(async()=>{let{data:V}=await Qt({loginToken:B,certToken:_});t.value=V.foreBackUrl,V.userStatus!==2&&(a.value=V.fullName,o.value=ue(a.value,0,a.value.length-1),u.value=V.idNum,i.value=ue(u.value,3,2),d.value=p.value=!0,a.value&&u.value&&(f.value=!0));let{data:g}=await Rt({certToken:_});c.value=g.beforeAuth,m.value=g.beforeProtocol,v.value=JSON.parse(g.protocols)[0]});const se={}.VITE_SERVICE_AGREEMENT,we=()=>{window.location.href=v.value.url||se},ie=()=>{l.value=!1,k("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(t.value)},1e3)},Ce=()=>{f.value=!0},Se=async()=>{if(!l.value)return k("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");let{data:V}=await Wt({certToken:_,fullName:a.value,idNum:u.value});D.value=V.certifyId,H.value=V.certifyUrl,f.value=!1,l.value=!1,Ve(D.value,H.value)},Ve=(V,g)=>{function I(b){window.AlipayJSBridge?b&&b():document.addEventListener("AlipayJSBridgeReady",b,!1)}function ee(b,E){window.AlipayJSBridge.call("startBizService",{name:"open-certify",param:JSON.stringify(b)},E)}I(function(){ee({certifyId:V,url:g},async b=>{if(!b.result)ie();else{k(b.resultStatus==="9000"?"\u8BA4\u8BC1\u901A\u8FC7":"\u8BA4\u8BC1\u5931\u8D25");let{data:E}=await Xt({loginToken:B,certToken:_,fullName:a.value,idNum:u.value,certifyId:b.result.certifyId});setTimeout(()=>{window.location.replace(E.foreBackUrl)},1e3)}})})};return(V,g)=>{const I=P("van-field"),ee=P("van-cell-group"),b=P("van-button"),E=P("van-image"),Te=P("van-form"),Be=P("van-divider"),Pe=P("van-checkbox"),Ae=P("van-action-sheet");return L(),Re(We,null,[T("div",en,[n(Te,{onSubmit:Ce},{default:O(()=>[n(ee,{inset:""},{default:O(()=>[n(I,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),d.value?(L(),Q(I,{key:0,modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=x=>o.value=x),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",maxlength:"18"},null,8,["modelValue"])):(L(),Q(I,{key:1,modelValue:a.value,"onUpdate:modelValue":g[1]||(g[1]=x=>a.value=x),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),p.value?(L(),Q(I,{key:2,modelValue:i.value,"onUpdate:modelValue":g[2]||(g[2]=x=>i.value=x),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(L(),Q(I,{key:3,modelValue:u.value,"onUpdate:modelValue":g[3]||(g[3]=x=>u.value=x),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"]))]),_:1}),T("div",tn,[n(b,{square:"",block:"",type:"primary",disabled:!re(s),"native-type":"submit"},{default:O(()=>[nn]),_:1},8,["disabled"])]),T("div",an,[n(E,{src:re(Zt)("auth-logo")},{error:O(()=>[on]),_:1},8,["src"])])]),_:1})]),n(Ae,{show:f.value,"onUpdate:show":g[6]||(g[6]=x=>f.value=x),title:"\u8BA4\u8BC1\u6388\u6743"},{default:O(()=>[T("div",ln,[T("div",{class:"upper-tips",innerHTML:c.value},null,8,sn),n(Be),T("div",cn,[n(Pe,{modelValue:l.value,"onUpdate:modelValue":g[4]||(g[4]=x=>l.value=x),shape:"square"},null,8,["modelValue"]),T("p",{class:"text",onClick:g[5]||(g[5]=x=>l.value=!l.value)},[T("span",{innerHTML:m.value},null,8,rn),un,T("a",{class:"service-link",onClick:Xe(we,["stop"]),innerHTML:v.value.name},null,8,dn)])]),T("div",fn,[n(b,{square:"",plain:"",type:"primary",class:"authorize-btn to-cancel-authorize-btn",onClick:ie},{default:O(()=>[mn]),_:1}),n(b,{square:"",type:"primary",class:Ye(["to-authorize-btn","authorize-btn",{active:l.value}]),onClick:Se},{default:O(()=>[vn]),_:1},8,["class"])])])]),_:1},8,["show"])],64)}}};Ze(hn).use(et).use(at).use(ot).use(lt).use(Jt).use(kt).use(Ut).use(Nt).use(vt).mount("#app");
