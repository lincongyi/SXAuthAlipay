import{j as F,s as A,m as P,aj as ce,P as T,k as L,f as o,X as M,ab as ne,Z,Y as ze,ag as re,Q as ue,q as j,I as D,S as de,ak as $e,C as I,al as Ne,D as Q,M as fe,af as me,a2 as Le,r as g,v as ve,am as Ue,A as E,a6 as J,H as Ee,N as Me,an as De,l as Fe,ao as he,z as qe,e as O,o as q,c as Ge,a as S,w as N,F as He,ap as K,u as se,aq as je,ar as Re,d as R,g as Ke,B as Je}from"./normalize.5e74b651.js";import{p as Qe,b as Xe,P as ge,m as Ye,u as Ze,c as be,s as W,D as We,F as en,a as nn,C as an,N as tn}from"./index.3f379514.js";import{_ as on}from"./logo.7b697e1d.js";const[ln,C]=F("action-sheet"),sn=A({},Qe,{title:String,round:P,actions:ce(),closeIcon:T("cross"),closeable:P,cancelText:String,description:String,closeOnPopstate:P,closeOnClickAction:Boolean,safeAreaInsetBottom:P}),cn=[...Xe,"round","closeOnPopstate","safeAreaInsetBottom"];var rn=L({name:ln,props:sn,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:a}){const i=s=>a("update:show",s),r=()=>{i(!1),a("cancel")},l=()=>{if(e.title)return o("div",{class:C("header")},[e.title,e.closeable&&o(Z,{name:e.closeIcon,class:[C("close"),ze],onClick:r},null)])},v=()=>{if(n.cancel||e.cancelText)return[o("div",{class:C("gap")},null),o("button",{type:"button",class:C("cancel"),onClick:r},[n.cancel?n.cancel():e.cancelText])]},c=(s,t)=>s.loading?o(re,{class:C("loading-icon")},null):n.action?n.action({action:s,index:t}):[o("span",{class:C("name")},[s.name]),s.subname&&o("div",{class:C("subname")},[s.subname])],m=(s,t)=>{const{color:f,loading:b,callback:y,disabled:d,className:x}=s,V=()=>{d||b||(y&&y(s),e.closeOnClickAction&&i(!1),ue(()=>a("select",s,t)))};return o("button",{type:"button",style:{color:f},class:[C("item",{loading:b,disabled:d}),x],onClick:V},[c(s,t)])},u=()=>{if(e.description||n.description){const s=n.description?n.description():e.description;return o("div",{class:C("description")},[s])}};return()=>o(ge,M({class:C(),position:"bottom","onUpdate:show":i},ne(e,cn)),{default:()=>{var s;return[l(),u(),o("div",{class:C("content")},[e.actions.map(m),(s=n.default)==null?void 0:s.call(n)]),v()]}})}});const un=j(rn);let G=0;function dn(e){e?(G||document.body.classList.add("van-toast--unclickable"),G++):G&&(G--,G||document.body.classList.remove("van-toast--unclickable"))}const[fn,H]=F("toast"),mn=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],vn={icon:String,show:Boolean,type:T("text"),overlay:Boolean,message:I,iconSize:I,duration:Ne(2e3),position:T("middle"),teleport:[String,Object],className:Q,iconPrefix:String,transition:T("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:Q,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ye=L({name:fn,props:vn,emits:["update:show"],setup(e,{emit:n}){let a,i=!1;const r=()=>{const s=e.show&&e.forbidClick;i!==s&&(i=s,dn(i))},l=s=>n("update:show",s),v=()=>{e.closeOnClick&&l(!1)},c=()=>clearTimeout(a),m=()=>{const{icon:s,type:t,iconSize:f,iconPrefix:b,loadingType:y}=e;if(s||t==="success"||t==="fail")return o(Z,{name:s||t,size:f,class:H("icon"),classPrefix:b},null);if(t==="loading")return o(re,{class:H("loading"),size:f,type:y},null)},u=()=>{const{type:s,message:t}=e;if(fe(t)&&t!=="")return s==="html"?o("div",{key:0,class:H("text"),innerHTML:String(t)},null):o("div",{class:H("text")},[t])};return D(()=>[e.show,e.forbidClick],r),D(()=>[e.show,e.type,e.message,e.duration],()=>{c(),e.show&&e.duration>0&&(a=setTimeout(()=>{l(!1)},e.duration))}),de(r),$e(r),()=>o(ge,M({class:[H([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:v,onClosed:c,"onUpdate:show":l},ne(e,mn)),{default:()=>[m(),u()]})}});const pe={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let w=[],ee=!1,X=A({},pe);const Y=new Map;function ke(e){return Le(e)?e:{message:e}}function hn(){const{instance:e,unmount:n}=Ye({setup(){const a=g(""),{open:i,state:r,close:l,toggle:v}=Ze(),c=()=>{ee&&(w=w.filter(u=>u!==e),n())},m=()=>o(ye,M(r,{onClosed:c,"onUpdate:show":v}),null);return D(a,u=>{r.message=u}),ve().render=m,{open:i,clear:l,message:a}}});return e}function gn(){if(!w.length||ee){const e=hn();w.push(e)}return w[w.length-1]}function p(e={}){if(!me)return{};const n=gn(),a=ke(e);return n.open(A({},X,Y.get(a.type||X.type),a)),n}const ae=e=>n=>p(A({type:e},ke(n)));p.loading=ae("loading");p.success=ae("success");p.fail=ae("fail");p.clear=e=>{var n;w.length&&(e?(w.forEach(a=>{a.clear()}),w=[]):ee?(n=w.shift())==null||n.clear():w[0].clear())};function bn(e,n){typeof e=="string"?Y.set(e,n):A(X,e)}p.setDefaultOptions=bn;p.resetDefaultOptions=e=>{typeof e=="string"?Y.delete(e):(X=A({},pe),Y.clear())};p.allowMultiple=(e=!0)=>{ee=e};p.install=e=>{e.use(j(ye)),e.config.globalProperties.$toast=p};const _e={name:Q,shape:T("round"),disabled:Boolean,iconSize:I,modelValue:Q,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var yn=L({props:A({},_e,{bem:Ue(Function),role:String,parent:Object,checked:Boolean,bindGroup:P}),emits:["click","toggle"],setup(e,{emit:n,slots:a}){const i=g(),r=t=>{if(e.parent&&e.bindGroup)return e.parent.props[t]},l=E(()=>r("disabled")||e.disabled),v=E(()=>r("direction")),c=E(()=>{const t=e.checkedColor||r("checkedColor");if(t&&e.checked&&!l.value)return{borderColor:t,backgroundColor:t}}),m=t=>{const{target:f}=t,b=i.value,y=b===f||(b==null?void 0:b.contains(f));!l.value&&(y||!e.labelDisabled)&&n("toggle"),n("click",t)},u=()=>{const{bem:t,shape:f,checked:b}=e,y=e.iconSize||r("iconSize");return o("div",{ref:i,class:t("icon",[f,{disabled:l.value,checked:b}]),style:{fontSize:J(y)}},[a.icon?a.icon({checked:b,disabled:l.value}):o(Z,{name:"success",style:c.value},null)])},s=()=>{if(a.default)return o("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[a.default()])};return()=>{const t=e.labelPosition==="left"?[s(),u()]:[u(),s()];return o("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},v.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:m},[t])}}});const[pn,U]=F("image"),kn={src:String,alt:String,fit:String,position:String,round:Boolean,width:I,height:I,radius:I,lazyLoad:Boolean,iconSize:I,showError:P,errorIcon:T("photo-fail"),iconPrefix:String,showLoading:P,loadingIcon:T("photo")};var _n=L({name:pn,props:kn,emits:["load","error"],setup(e,{emit:n,slots:a}){const i=g(!1),r=g(!0),l=g(),{$Lazyload:v}=ve().proxy,c=E(()=>{const d={width:J(e.width),height:J(e.height)};return fe(e.radius)&&(d.overflow="hidden",d.borderRadius=J(e.radius)),d});D(()=>e.src,()=>{i.value=!1,r.value=!0});const m=d=>{r.value=!1,n("load",d)},u=d=>{i.value=!0,r.value=!1,n("error",d)},s=(d,x,V)=>V?V():o(Z,{name:d,size:e.iconSize,class:x,classPrefix:e.iconPrefix},null),t=()=>{if(r.value&&e.showLoading)return o("div",{class:U("loading")},[s(e.loadingIcon,U("loading-icon"),a.loading)]);if(i.value&&e.showError)return o("div",{class:U("error")},[s(e.errorIcon,U("error-icon"),a.error)])},f=()=>{if(i.value||!e.src)return;const d={alt:e.alt,class:U("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?Me(o("img",M({ref:l},d),null),[[De("lazy"),e.src]]):o("img",M({src:e.src,onLoad:m,onError:u},d),null)},b=({el:d})=>{const x=()=>{d===l.value&&r.value&&m()};l.value?x():ue(x)},y=({el:d})=>{d===l.value&&!i.value&&u()};return v&&me&&(v.$on("loaded",b),v.$on("error",y),Ee(()=>{v.$off("loaded",b),v.$off("error",y)})),()=>{var d;return o("div",{class:U({round:e.round}),style:c.value},[f(),t(),(d=a.default)==null?void 0:d.call(a)])}}});const Cn=j(_n),[Ce,wn]=F("checkbox-group"),Sn={max:I,disabled:Boolean,iconSize:I,direction:String,modelValue:ce(),checkedColor:String},we=Symbol(Ce);L({name:Ce,props:Sn,emits:["change","update:modelValue"],setup(e,{emit:n,slots:a}){const{children:i,linkChildren:r}=Fe(we),l=c=>n("update:modelValue",c),v=(c={})=>{typeof c=="boolean"&&(c={checked:c});const{checked:m,skipDisabled:u}=c,t=i.filter(f=>f.props.bindGroup?f.props.disabled&&u?f.checked.value:m!=null?m:!f.checked.value:!1).map(f=>f.name);l(t)};return D(()=>e.modelValue,c=>n("change",c)),be({toggleAll:v}),he(()=>e.modelValue),r({props:e,updateValue:l}),()=>{var c;return o("div",{class:wn([e.direction])},[(c=a.default)==null?void 0:c.call(a)])}}});const[xn,Pn]=F("checkbox"),In=A({},_e,{bindGroup:P});var Vn=L({name:xn,props:In,emits:["change","update:modelValue"],setup(e,{emit:n,slots:a}){const{parent:i}=qe(we),r=c=>{const{name:m}=e,{max:u,modelValue:s}=i.props,t=s.slice();if(c)!(u&&t.length>=u)&&!t.includes(m)&&(t.push(m),e.bindGroup&&i.updateValue(t));else{const f=t.indexOf(m);f!==-1&&(t.splice(f,1),e.bindGroup&&i.updateValue(t))}},l=E(()=>i&&e.bindGroup?i.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),v=(c=!l.value)=>{i&&e.bindGroup?r(c):n("update:modelValue",c)};return D(()=>e.modelValue,c=>n("change",c)),be({toggle:v,props:e,checked:l}),he(()=>e.modelValue),()=>o(yn,M({bem:Pn,role:"checkbox",parent:i,checked:l.value,onToggle:v},e),ne(a,["default","icon"]))}});const Bn=j(Vn),[On,Tn]=F("divider"),An={dashed:Boolean,hairline:P,contentPosition:T("center")};var zn=L({name:On,props:An,setup(e,{slots:n}){return()=>{var a;return o("div",{role:"separator",class:Tn({dashed:e.dashed,hairline:e.hairline,[`content-${e.contentPosition}`]:!!n.default})},[(a=n.default)==null?void 0:a.call(n)])}}});const $n=j(zn);function Nn(e){return W({url:"/checkIdentityInfo",method:"post",data:e})}function Ln(e){return W({url:"/getBeforeAuthTips",method:"post",data:e})}function Un(e){return W({url:"/alipayAuthInit",method:"post",data:e})}function En(e){return W({url:"/alipayAuthQuery",method:"post",data:e})}var Mn="./assets/auth-logo.cdd60c32.png";function ie(e,n,a){if(!e)return"";for(var i=e.length-n-a,r="",l=0;l<i;l++)r+="*";return e.substring(0,n)+r+e.substring(e.length-a)}function Dn(e){return new URL({"/src/assets/auth-logo.png":Mn,"/src/assets/logo.png":on}[`/src/assets/${e}.png`],self.location).href}const Fn={class:"form-wrap"},qn={style:{margin:"16px"}},Gn=R("\u63D0\u4EA4"),Hn={class:"auth-logo"},jn=R("\u52A0\u8F7D\u5931\u8D25"),Rn={class:"content"},Kn=["innerHTML"],Jn={class:"lower-tips"},Qn=["innerHTML"],Xn=R(" \u67E5\u770B "),Yn=["onClick","innerHTML"],Zn={class:"btn-group"},Wn=R("\u53D6\u6D88\u6388\u6743"),ea=R("\u786E\u8BA4\u6388\u6743"),na={setup(e){const n=g(""),a=g(""),i=g(""),r=g(!1),l=g(""),v=g(!1),c=g(""),m=g(!1),u=g(!1),s=E(()=>a.value&&l.value),t=window.location.href.substring(window.location.href.indexOf("?")+1);t.includes("&")||(We.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const f=t.split("&"),b=f[0].replace(/loginToken=/g,""),y=f[1].replace(/certToken=/g,""),d=g(""),x=g(""),V=g({}),te=g(""),oe=g("");de(async()=>{let{data:B}=await Nn({loginToken:b,certToken:y});n.value=B.foreBackUrl,B.userStatus!==2&&(a.value=B.fullName,i.value=ie(a.value,0,a.value.length-1),l.value=B.idNum,c.value=ie(l.value,3,2),r.value=v.value=!0,a.value&&l.value&&(m.value=!0));let{data:h}=await Ln({certToken:y});d.value=h.beforeAuth,x.value=h.beforeProtocol,V.value=JSON.parse(h.protocols)[0]});const Se={}.VITE_SERVICE_AGREEMENT,xe=()=>{window.location.href=V.value.url||Se},le=()=>{u.value=!1,p("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(n.value)},1e3)},Pe=()=>{m.value=!0},Ie=async()=>{if(!u.value)return p("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");let{data:B}=await Un({certToken:y,fullName:a.value,idNum:l.value});oe.value=B.certifyId,te.value=B.certifyUrl,m.value=!1,u.value=!1;function h(_){window.AlipayJSBridge?_&&_():document.addEventListener("AlipayJSBridgeReady",_,!1)}function z(_,$){window.AlipayJSBridge.call("startBizService",{name:"open-certify",param:JSON.stringify(_)},$)}h(function(){z({certifyId:oe.value,url:te.value},async _=>{if(!_.result)le();else{_.resultStatus==="9000"?p("\u8BA4\u8BC1\u901A\u8FC7"):p("\u8BA4\u8BC1\u5931\u8D25");let{data:$}=await En({loginToken:b,certToken:y,fullName:a.value,idNum:l.value,certifyId:_.result.certifyId});setTimeout(()=>{window.location.replace($.foreBackUrl)},1e3)}})})};return(B,h)=>{const z=O("van-field"),_=O("van-cell-group"),$=O("van-button"),Ve=O("van-image"),Be=O("van-form"),Oe=O("van-divider"),Te=O("van-checkbox"),Ae=O("van-action-sheet");return q(),Ge(He,null,[S("div",Fn,[o(Be,{onSubmit:Pe},{default:N(()=>[o(_,{inset:""},{default:N(()=>[o(z,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),r.value?(q(),K(z,{key:0,modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=k=>i.value=k),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])):(q(),K(z,{key:1,modelValue:a.value,"onUpdate:modelValue":h[1]||(h[1]=k=>a.value=k),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),v.value?(q(),K(z,{key:2,modelValue:c.value,"onUpdate:modelValue":h[2]||(h[2]=k=>c.value=k),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(q(),K(z,{key:3,modelValue:l.value,"onUpdate:modelValue":h[3]||(h[3]=k=>l.value=k),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"]))]),_:1}),S("div",qn,[o($,{square:"",block:"",type:"primary",disabled:!se(s),"native-type":"submit"},{default:N(()=>[Gn]),_:1},8,["disabled"])]),S("div",Hn,[o(Ve,{src:se(Dn)("auth-logo")},{error:N(()=>[jn]),_:1},8,["src"])])]),_:1})]),o(Ae,{show:m.value,"onUpdate:show":h[6]||(h[6]=k=>m.value=k),title:"\u8BA4\u8BC1\u6388\u6743"},{default:N(()=>[S("div",Rn,[S("div",{class:"upper-tips",innerHTML:d.value},null,8,Kn),o(Oe),S("div",Jn,[o(Te,{modelValue:u.value,"onUpdate:modelValue":h[4]||(h[4]=k=>u.value=k),shape:"square"},null,8,["modelValue"]),S("p",{class:"text",onClick:h[5]||(h[5]=k=>u.value=!u.value)},[S("span",{innerHTML:x.value},null,8,Qn),Xn,S("a",{class:"service-link",onClick:je(xe,["stop"]),innerHTML:V.value.name},null,8,Yn)])]),S("div",Zn,[o($,{square:"",plain:"",type:"primary",class:"authorize-btn to-cancel-authorize-btn",onClick:le},{default:N(()=>[Wn]),_:1}),o($,{square:"",type:"primary",class:Re(["to-authorize-btn","authorize-btn",{active:u.value}]),onClick:Ie},{default:N(()=>[ea]),_:1},8,["class"])])])]),_:1},8,["show"])],64)}}};Ke(na).use(Je).use(en).use(nn).use(an).use(tn).use(un).use($n).use(Bn).use(Cn).mount("#app");
