import{m as R,v as ge,q as A,R as ye,H as le,d as O,g as t,E as Be,G as Ce,I as $e,Z as be,L as ke,a4 as Ge,A as ne,X as Re,C as ue,ac as xe,n as W,T as qe,i as H,r as f,U as Je,W as je,as as Qe,ak as We,al as Xe,aj as Ze,at as Ye,ai as et,ao as tt,j as at,f as E,o as F,c as $,a as _,w as z,F as J,au as j,u as K,k as fe,l as he,av as lt,e as X,h as nt,B as ut}from"./normalize.b90c4f19.js";import{b as ot,d as st,s as Z,T as te,C as it,D as rt}from"./index.feec6bc8.js";import{p as ct,e as dt,P as De,b as we,a as mt,D as vt}from"./certification-successful.fd0a961b.js";import{h as pe,g as ft,f as Q,l as ht}from"./index.8d58d8ec.js";import{F as pt,a as gt,D as yt}from"./index.c9c3418b.js";import{I as Bt}from"./index.11d693d3.js";import"./logo.9e2f423b.js";const[Ct,x]=R("action-sheet"),bt=ge({},ct,{title:String,round:A,actions:ye(),closeIcon:le("cross"),closeable:A,cancelText:String,description:String,closeOnPopstate:A,closeOnClickAction:Boolean,safeAreaInsetBottom:A}),kt=[...dt,"round","closeOnPopstate","safeAreaInsetBottom"];var xt=O({name:Ct,props:bt,emits:["select","cancel","update:show"],setup(e,{slots:l,emit:u}){const s=c=>u("update:show",c),B=()=>{s(!1),u("cancel")},h=()=>{if(e.title)return t("div",{class:x("header")},[e.title,e.closeable&&t($e,{name:e.closeIcon,class:[x("close"),be],onClick:B},null)])},b=()=>{if(l.cancel||e.cancelText)return[t("div",{class:x("gap")},null),t("button",{type:"button",class:x("cancel"),onClick:B},[l.cancel?l.cancel():e.cancelText])]},i=(c,d)=>c.loading?t(ke,{class:x("loading-icon")},null):l.action?l.action({action:c,index:d}):[t("span",{class:x("name")},[c.name]),c.subname&&t("div",{class:x("subname")},[c.subname])],p=(c,d)=>{const{color:y,loading:D,callback:w,disabled:n,className:r}=c,m=()=>{n||D||(w&&w(c),e.closeOnClickAction&&s(!1),Ge(()=>u("select",c,d)))};return t("button",{type:"button",style:{color:y},class:[x("item",{loading:D,disabled:n}),r],onClick:m},[i(c,d)])},g=()=>{if(e.description||l.description){const c=l.description?l.description():e.description;return t("div",{class:x("description")},[c])}};return()=>t(De,Be({class:x(),position:"bottom","onUpdate:show":s},Ce(e,kt)),{default:()=>{var c;return[h(),g(),t("div",{class:x("content")},[e.actions.map(p),(c=l.default)==null?void 0:c.call(l)]),b()]}})}});const Dt=ne(xt),[Ve,wt]=R("checkbox-group"),Vt={max:W,disabled:Boolean,iconSize:W,direction:String,modelValue:ye(),checkedColor:String},Ee=Symbol(Ve);O({name:Ve,props:Vt,emits:["change","update:modelValue"],setup(e,{emit:l,slots:u}){const{children:s,linkChildren:B}=Re(Ee),h=i=>l("update:modelValue",i),b=(i={})=>{typeof i=="boolean"&&(i={checked:i});const{checked:p,skipDisabled:g}=i,d=s.filter(y=>y.props.bindGroup?y.props.disabled&&g?y.checked.value:p!=null?p:!y.checked.value:!1).map(y=>y.name);h(d)};return ue(()=>e.modelValue,i=>l("change",i)),we({toggleAll:b}),xe(()=>e.modelValue),B({props:e,updateValue:h}),()=>{var i;return t("div",{class:wt([e.direction])},[(i=u.default)==null?void 0:i.call(u)])}}});const[Et,_t]=R("checkbox"),At=ge({},ot,{bindGroup:A});var Ft=O({name:Et,props:At,emits:["change","update:modelValue"],setup(e,{emit:l,slots:u}){const{parent:s}=qe(Ee),B=i=>{const{name:p}=e,{max:g,modelValue:c}=s.props,d=c.slice();if(i)!(g&&d.length>=g)&&!d.includes(p)&&(d.push(p),e.bindGroup&&s.updateValue(d));else{const y=d.indexOf(p);y!==-1&&(d.splice(y,1),e.bindGroup&&s.updateValue(d))}},h=H(()=>s&&e.bindGroup?s.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),b=(i=!h.value)=>{s&&e.bindGroup?B(i):l("update:modelValue",i)};return ue(()=>e.modelValue,i=>l("change",i)),we({toggle:b,props:e,checked:h}),xe(()=>e.modelValue),()=>t(st,Be({bem:_t,role:"checkbox",parent:s,checked:h.value,onToggle:b},e),Ce(u,["default","icon"]))}});const Tt=ne(Ft),[St,G]=R("key"),Pt=t("svg",{class:G("collapse-icon"),viewBox:"0 0 30 24"},[t("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),It=t("svg",{class:G("delete-icon"),viewBox:"0 0 32 22"},[t("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var ae=O({name:St,props:{type:String,text:W,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:l,slots:u}){const s=f(!1),B=mt(),h=g=>{B.start(g),s.value=!0},b=g=>{B.move(g),B.direction.value&&(s.value=!1)},i=g=>{s.value&&(u.default||Je(g),s.value=!1,l("press",e.text,e.type))},p=()=>{if(e.loading)return t(ke,{class:G("loading-icon")},null);const g=u.default?u.default():e.text;switch(e.type){case"delete":return g||It;case"extra":return g||Pt;default:return g}};return()=>t("div",{class:G("wrapper",{wider:e.wider}),onTouchstart:h,onTouchmove:b,onTouchend:i,onTouchcancel:i},[t("div",{role:"button",tabindex:0,class:G([e.color,{large:e.large,active:s.value,delete:e.type==="delete"}])},[p()])])}});const[Nt,T]=R("number-keyboard"),zt={show:Boolean,title:String,theme:le("default"),zIndex:W,teleport:[String,Object],maxlength:je(1/0),modelValue:le(""),transition:A,blurOnClose:A,showDeleteKey:A,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:A,safeAreaInsetBottom:A,extraKey:{type:[String,Array],default:""}};function Ut(e){for(let l=e.length-1;l>0;l--){const u=Math.floor(Math.random()*(l+1)),s=e[l];e[l]=e[u],e[u]=s}return e}var Kt=O({name:Nt,props:zt,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:l,slots:u}){const s=f(),B=()=>{const n=Array(9).fill("").map((r,m)=>({text:m+1}));return e.randomKeyOrder&&Ut(n),n},h=()=>[...B(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],b=()=>{const n=B(),{extraKey:r}=e,m=Array.isArray(r)?r:[r];return m.length===1?n.push({text:0,wider:!0},{text:m[0],type:"extra"}):m.length===2&&n.push({text:m[0],type:"extra"},{text:0},{text:m[1],type:"extra"}),n},i=H(()=>e.theme==="custom"?b():h()),p=()=>{e.show&&l("blur")},g=()=>{l("close"),e.blurOnClose&&p()},c=()=>l(e.show?"show":"hide"),d=(n,r)=>{if(n===""){r==="extra"&&p();return}const m=e.modelValue;r==="delete"?(l("delete"),l("update:modelValue",m.slice(0,m.length-1))):r==="close"?g():m.length<e.maxlength&&(l("input",n),l("update:modelValue",m+n))},y=()=>{const{title:n,theme:r,closeButtonText:m}=e,S=u["title-left"],U=m&&r==="default";if(!!(n||U||S))return t("div",{class:T("header")},[S&&t("span",{class:T("title-left")},[S()]),n&&t("h2",{class:T("title")},[n]),U&&t("button",{type:"button",class:[T("close"),be],onClick:g},[m])])},D=()=>i.value.map(n=>{const r={};return n.type==="delete"&&(r.default=u.delete),n.type==="extra"&&(r.default=u["extra-key"]),t(ae,{key:n.text,text:n.text,type:n.type,wider:n.wider,color:n.color,onPress:d},r)}),w=()=>{if(e.theme==="custom")return t("div",{class:T("sidebar")},[e.showDeleteKey&&t(ae,{large:!0,text:e.deleteButtonText,type:"delete",onPress:d},{delete:u.delete}),t(ae,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:d},null)])};return ue(()=>e.show,n=>{e.transition||l(n?"show":"hide")}),e.hideOnClickOutside&&Qe(s,p,{eventName:"touchstart"}),()=>{const n=y(),r=t(et,{name:e.transition?"van-slide-up":""},{default:()=>[We(t("div",{ref:s,style:Ze(e.zIndex),class:T({unfit:!e.safeAreaInsetBottom,"with-title":!!n}),onTouchstart:Ye,onAnimationend:c,onWebkitAnimationEnd:c},[n,t("div",{class:T("body")},[t("div",{class:T("keys")},[D()]),w()])]),[[Xe,e.show]])]});return e.teleport?t(tt,{to:e.teleport},{default:()=>[r]}):r}}});const Ht=ne(Kt);function Ot(e){return Z({url:"/checkIdentityInfo",method:"post",data:e})}function Lt(e){return Z({url:"/getBeforeAuthTips",method:"post",data:e})}function Mt(e){return Z({url:"/alipayAuthInit",method:"post",data:e})}function $t(e){return Z({url:"/alipayAuthQuery",method:"post",data:e})}const Gt={class:"form-wrap"},Rt={style:{margin:"16px"}},qt=X("\u63D0\u4EA4"),Jt={class:"auth-logo"},jt=X("\u52A0\u8F7D\u5931\u8D25"),Qt={class:"content"},Wt=["innerHTML"],Xt={key:0,class:"center-tips"},Zt={class:"lower-tips"},Yt=["innerHTML"],ea=X(" \u67E5\u770B "),ta=["onClick","innerHTML"],aa={class:"btn-group"},la=X("\u786E\u8BA4\u6388\u6743"),na=O({setup(e){const l=f(""),u=f(""),s=f(""),B=f(!1),h=f(""),b=f(""),i=f(!1),p=f(!1),g=[new Date(2e3,0,1),new Date],c=[new Date,new Date(2050,11,31)],d=[16,18],y=f(0),D=f(!1),w=f(""),n=f(""),r=f(new Date(2e3,0,1)),m=f(new Date(2030,0,1)),S=H(()=>r.value.toLocaleDateString()),U=H(()=>m.value.toLocaleDateString()),P=f(!1),I=f(!1),oe=H(()=>[g,c][y.value]),_e=H(()=>u.value&&h.value);let Y=window.location.href;Y.includes("&")||(vt.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const Ae=Y.substring(Y.indexOf("?")+1),se=new URLSearchParams(Ae),q=se.get("loginToken")||"",L=se.get("certToken")||"",V=f(0),ie=f(""),re=f(""),ee=f({url:"",name:""}),ce=f(""),de=f("");at(async()=>{let{data:o}=await Ot({loginToken:q,certToken:L});if(V.value=o.mode,l.value=o.foreBackUrl,o.userStatus!==2){if(u.value=o.fullName,s.value=pe(u.value,0,u.value.length-1),h.value=o.idNum,b.value=pe(h.value,3,2),d.includes(V.value)){let{idStartDate:C,idEndDate:N}=o;C&&N&&(w.value=o.idStartDate,n.value=o.idEndDate,p.value=!0)}if(B.value=i.value=!0,u.value&&h.value){let{idStartDate:C,idEndDate:N}=o;d.includes(V.value)&&(!C||!N)?P.value=!1:P.value=!0}}let{data:a}=await Lt({certToken:L});ie.value=a.beforeAuth,re.value=a.beforeProtocol,ee.value=JSON.parse(a.protocols)[0]});const Fe=o=>{y.value?m.value=o:r.value=o,D.value=!1},{VITE_SERVICE_AGREEMENT:Te}=ht(),Se=()=>{window.location.href=ee.value.url||Te},Pe=()=>{I.value=!1,te("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(l.value)},1e3)},Ie=()=>{P.value=!0},Ne=async()=>{if(!I.value)return te("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");if([16,64].includes(V.value)){let o={loginToken:q,certToken:L,fullName:u.value,idNum:h.value,mode:V.value};d.includes(V.value)&&(o.idStartDate=p.value?w.value:Q(r.value),o.idEndDate=p.value?n.value:Q(m.value)),me(o)}else{let o={loginToken:q,certToken:L,fullName:u.value,idNum:h.value};d.includes(V.value)&&(o.idStartDate=p.value?w.value:Q(r.value),o.idEndDate=p.value?n.value:Q(m.value));let{data:a}=await Mt(o);de.value=a.certifyId||"",ce.value=a.certifyUrl||"",P.value=!1,I.value=!1,ze(de.value,ce.value)}},ze=(o,a)=>{function C(k){window.AlipayJSBridge?k&&k():document.addEventListener("AlipayJSBridgeReady",k,!1)}function N(k,M){window.AlipayJSBridge.call("startBizService",{name:"open-certify",param:JSON.stringify(k)},M)}C(function(){N({certifyId:o,url:a},async k=>{if(!k.result)Pe();else{te(k.resultStatus==="9000"?"\u8BA4\u8BC1\u901A\u8FC7":"\u8BA4\u8BC1\u5931\u8D25");let M={loginToken:q,certToken:L,fullName:u.value,idNum:h.value,mode:V.value,certifyId:k.result.certifyId};me(M)}})})},me=async o=>{let{data:a}=await $t(o);setTimeout(()=>{window.location.replace(a.foreBackUrl)},1e3)},Ue=(o,a)=>o==="year"?`${a}\u5E74`:o==="month"?`${a}\u6708`:o==="day"?`${a}\u65E5`:a;return(o,a)=>{const C=E("van-field"),N=E("van-cell-group"),k=E("van-datetime-picker"),M=E("van-popup"),ve=E("van-button"),Ke=E("van-image"),He=E("van-form"),Oe=E("van-divider"),Le=E("van-checkbox"),Me=E("van-action-sheet");return F(),$(J,null,[_("div",Gt,[t(He,null,{default:z(()=>[t(N,{inset:""},{default:z(()=>[t(C,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),B.value?(F(),j(C,{key:0,modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=v=>s.value=v),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",maxlength:"18"},null,8,["modelValue"])):(F(),j(C,{key:1,modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=v=>u.value=v),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),i.value?(F(),j(C,{key:2,modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=v=>b.value=v),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(F(),j(C,{key:3,modelValue:h.value,"onUpdate:modelValue":a[3]||(a[3]=v=>h.value=v),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"])),d.includes(V.value)?(F(),$(J,{key:4},[p.value?(F(),$(J,{key:0},[t(C,{modelValue:w.value,"onUpdate:modelValue":a[4]||(a[4]=v=>w.value=v),name:"\u8D77\u59CB\u65E5\u671F",label:"\u8D77\u59CB\u65E5\u671F",placeholder:"\u8D77\u59CB\u65E5\u671F",readonly:"",maxlength:"18"},null,8,["modelValue"]),t(C,{modelValue:n.value,"onUpdate:modelValue":a[5]||(a[5]=v=>n.value=v),name:"\u8D77\u59CB\u65E5\u671F",label:"\u8D77\u59CB\u65E5\u671F",placeholder:"\u8D77\u59CB\u65E5\u671F",readonly:"",maxlength:"18"},null,8,["modelValue"])],64)):(F(),$(J,{key:1},[t(C,{modelValue:K(S),"onUpdate:modelValue":a[6]||(a[6]=v=>fe(S)?S.value=v:null),readonly:"","is-link":"",name:"\u8D77\u59CB\u65E5\u671F",label:"\u8D77\u59CB\u65E5\u671F",onClick:a[7]||(a[7]=()=>{y.value=0,D.value=!0})},null,8,["modelValue"]),t(C,{modelValue:K(U),"onUpdate:modelValue":a[8]||(a[8]=v=>fe(U)?U.value=v:null),readonly:"","is-link":"",name:"\u622A\u6B62\u65E5\u671F",label:"\u622A\u6B62\u65E5\u671F",onClick:a[9]||(a[9]=()=>{y.value=1,D.value=!0})},null,8,["modelValue"])],64))],64)):he("",!0)]),_:1}),t(M,{show:D.value,"onUpdate:show":a[11]||(a[11]=v=>D.value=v),round:"",position:"bottom"},{default:z(()=>[t(k,{modelValue:[r.value,m.value][y.value],"onUpdate:modelValue":a[10]||(a[10]=v=>[r.value,m.value][y.value]=v),title:"\u9009\u62E9\u65E5\u671F",type:"date","min-date":K(oe)[0],"max-date":K(oe)[1],formatter:Ue,onConfirm:Fe},null,8,["modelValue","min-date","max-date"])]),_:1},8,["show"]),_("div",Rt,[t(ve,{square:"",block:"",type:"primary",disabled:!K(_e),onClick:Ie},{default:z(()=>[qt]),_:1},8,["disabled"])]),_("div",Jt,[t(Ke,{src:K(ft)("auth-logo")},{error:z(()=>[jt]),_:1},8,["src"])])]),_:1})]),t(Me,{show:P.value,"onUpdate:show":a[14]||(a[14]=v=>P.value=v),title:"\u8BA4\u8BC1\u6388\u6743"},{default:z(()=>[_("div",Qt,[_("div",{class:"upper-tips",innerHTML:ie.value},null,8,Wt),[16,64].includes(V.value)?he("",!0):(F(),$("div",Xt,"\u672C\u6B21\u8BA4\u8BC1\u9700\u8981\u901A\u8FC7\u4EBA\u8138\u8BC6\u522B\u9A8C\u8BC1\u8EAB\u4EFD\u4FE1\u606F")),t(Oe),_("div",Zt,[t(Le,{modelValue:I.value,"onUpdate:modelValue":a[12]||(a[12]=v=>I.value=v),shape:"square"},null,8,["modelValue"]),_("p",{class:"text",onClick:a[13]||(a[13]=v=>I.value=!I.value)},[_("span",{innerHTML:re.value},null,8,Yt),ea,_("a",{class:"service-link",onClick:lt(Se,["stop"]),innerHTML:ee.value.name},null,8,ta)])]),_("div",aa,[t(ve,{block:"",square:"",type:"primary",onClick:Ne},{default:z(()=>[la]),_:1})])])]),_:1},8,["show"])],64)}}});nt(na).use(ut).use(pt).use(gt).use(it).use(Ht).use(Dt).use(rt).use(Tt).use(Bt).use(De).use(yt).mount("#app");
