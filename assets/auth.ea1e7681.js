import{j as E,s as $,m as x,aj as oe,P as T,k as B,f as o,X as L,ab as W,Z as J,Y as Be,ag as le,Q as se,q as G,I as U,S as ie,ak as Ae,C as P,al as Ne,D as K,M as ce,af as re,a2 as Le,r as h,v as ue,am as Ue,A as N,a6 as R,H as Ee,N as Me,an as De,l as Fe,ao as de,z as qe,e as O,o as D,c as Ge,a as w,w as z,F as He,ap as j,u as ae,aq as je,ar as Re,d as H,g as Ke,B as Xe}from"./normalize.5e74b651.js";import{p as Ye,b as Je,P as fe,m as Qe,u as Ze,c as ve,s as ee,D as We,F as en,a as nn,C as an,N as tn}from"./index.3f379514.js";import{_ as on}from"./logo.7b697e1d.js";const[ln,y]=E("action-sheet"),sn=$({},Ye,{title:String,round:x,actions:oe(),closeIcon:T("cross"),closeable:x,cancelText:String,description:String,closeOnPopstate:x,closeOnClickAction:Boolean,safeAreaInsetBottom:x}),cn=[...Je,"round","closeOnPopstate","safeAreaInsetBottom"];var rn=B({name:ln,props:sn,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:a}){const i=s=>a("update:show",s),r=()=>{i(!1),a("cancel")},l=()=>{if(e.title)return o("div",{class:y("header")},[e.title,e.closeable&&o(J,{name:e.closeIcon,class:[y("close"),Be],onClick:r},null)])},m=()=>{if(n.cancel||e.cancelText)return[o("div",{class:y("gap")},null),o("button",{type:"button",class:y("cancel"),onClick:r},[n.cancel?n.cancel():e.cancelText])]},c=(s,t)=>s.loading?o(le,{class:y("loading-icon")},null):n.action?n.action({action:s,index:t}):[o("span",{class:y("name")},[s.name]),s.subname&&o("div",{class:y("subname")},[s.subname])],v=(s,t)=>{const{color:f,loading:b,callback:k,disabled:d,className:S}=s,V=()=>{d||b||(k&&k(s),e.closeOnClickAction&&i(!1),se(()=>a("select",s,t)))};return o("button",{type:"button",style:{color:f},class:[y("item",{loading:b,disabled:d}),S],onClick:V},[c(s,t)])},u=()=>{if(e.description||n.description){const s=n.description?n.description():e.description;return o("div",{class:y("description")},[s])}};return()=>o(fe,L({class:y(),position:"bottom","onUpdate:show":i},W(e,cn)),{default:()=>{var s;return[l(),u(),o("div",{class:y("content")},[e.actions.map(v),(s=n.default)==null?void 0:s.call(n)]),m()]}})}});const un=G(rn);let F=0;function dn(e){e?(F||document.body.classList.add("van-toast--unclickable"),F++):F&&(F--,F||document.body.classList.remove("van-toast--unclickable"))}const[fn,q]=E("toast"),vn=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],mn={icon:String,show:Boolean,type:T("text"),overlay:Boolean,message:P,iconSize:P,duration:Ne(2e3),position:T("middle"),teleport:[String,Object],className:K,iconPrefix:String,transition:T("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:K,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var me=B({name:fn,props:mn,emits:["update:show"],setup(e,{emit:n}){let a,i=!1;const r=()=>{const s=e.show&&e.forbidClick;i!==s&&(i=s,dn(i))},l=s=>n("update:show",s),m=()=>{e.closeOnClick&&l(!1)},c=()=>clearTimeout(a),v=()=>{const{icon:s,type:t,iconSize:f,iconPrefix:b,loadingType:k}=e;if(s||t==="success"||t==="fail")return o(J,{name:s||t,size:f,class:q("icon"),classPrefix:b},null);if(t==="loading")return o(le,{class:q("loading"),size:f,type:k},null)},u=()=>{const{type:s,message:t}=e;if(ce(t)&&t!=="")return s==="html"?o("div",{key:0,class:q("text"),innerHTML:String(t)},null):o("div",{class:q("text")},[t])};return U(()=>[e.show,e.forbidClick],r),U(()=>[e.show,e.type,e.message,e.duration],()=>{c(),e.show&&e.duration>0&&(a=setTimeout(()=>{l(!1)},e.duration))}),ie(r),Ae(r),()=>o(fe,L({class:[q([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:m,onClosed:c,"onUpdate:show":l},W(e,vn)),{default:()=>[v(),u()]})}});const he={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let C=[],Q=!1,X=$({},he);const Y=new Map;function ge(e){return Le(e)?e:{message:e}}function hn(){const{instance:e,unmount:n}=Qe({setup(){const a=h(""),{open:i,state:r,close:l,toggle:m}=Ze(),c=()=>{Q&&(C=C.filter(u=>u!==e),n())},v=()=>o(me,L(r,{onClosed:c,"onUpdate:show":m}),null);return U(a,u=>{r.message=u}),ue().render=v,{open:i,clear:l,message:a}}});return e}function gn(){if(!C.length||Q){const e=hn();C.push(e)}return C[C.length-1]}function _(e={}){if(!re)return{};const n=gn(),a=ge(e);return n.open($({},X,Y.get(a.type||X.type),a)),n}const ne=e=>n=>_($({type:e},ge(n)));_.loading=ne("loading");_.success=ne("success");_.fail=ne("fail");_.clear=e=>{var n;C.length&&(e?(C.forEach(a=>{a.clear()}),C=[]):Q?(n=C.shift())==null||n.clear():C[0].clear())};function bn(e,n){typeof e=="string"?Y.set(e,n):$(X,e)}_.setDefaultOptions=bn;_.resetDefaultOptions=e=>{typeof e=="string"?Y.delete(e):(X=$({},he),Y.clear())};_.allowMultiple=(e=!0)=>{Q=e};_.install=e=>{e.use(G(me)),e.config.globalProperties.$toast=_};const be={name:K,shape:T("round"),disabled:Boolean,iconSize:P,modelValue:K,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var kn=B({props:$({},be,{bem:Ue(Function),role:String,parent:Object,checked:Boolean,bindGroup:x}),emits:["click","toggle"],setup(e,{emit:n,slots:a}){const i=h(),r=t=>{if(e.parent&&e.bindGroup)return e.parent.props[t]},l=N(()=>r("disabled")||e.disabled),m=N(()=>r("direction")),c=N(()=>{const t=e.checkedColor||r("checkedColor");if(t&&e.checked&&!l.value)return{borderColor:t,backgroundColor:t}}),v=t=>{const{target:f}=t,b=i.value,k=b===f||(b==null?void 0:b.contains(f));!l.value&&(k||!e.labelDisabled)&&n("toggle"),n("click",t)},u=()=>{const{bem:t,shape:f,checked:b}=e,k=e.iconSize||r("iconSize");return o("div",{ref:i,class:t("icon",[f,{disabled:l.value,checked:b}]),style:{fontSize:R(k)}},[a.icon?a.icon({checked:b,disabled:l.value}):o(J,{name:"success",style:c.value},null)])},s=()=>{if(a.default)return o("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[a.default()])};return()=>{const t=e.labelPosition==="left"?[s(),u()]:[u(),s()];return o("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},m.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:v},[t])}}});const[pn,A]=E("image"),_n={src:String,alt:String,fit:String,position:String,round:Boolean,width:P,height:P,radius:P,lazyLoad:Boolean,iconSize:P,showError:x,errorIcon:T("photo-fail"),iconPrefix:String,showLoading:x,loadingIcon:T("photo")};var yn=B({name:pn,props:_n,emits:["load","error"],setup(e,{emit:n,slots:a}){const i=h(!1),r=h(!0),l=h(),{$Lazyload:m}=ue().proxy,c=N(()=>{const d={width:R(e.width),height:R(e.height)};return ce(e.radius)&&(d.overflow="hidden",d.borderRadius=R(e.radius)),d});U(()=>e.src,()=>{i.value=!1,r.value=!0});const v=d=>{r.value=!1,n("load",d)},u=d=>{i.value=!0,r.value=!1,n("error",d)},s=(d,S,V)=>V?V():o(J,{name:d,size:e.iconSize,class:S,classPrefix:e.iconPrefix},null),t=()=>{if(r.value&&e.showLoading)return o("div",{class:A("loading")},[s(e.loadingIcon,A("loading-icon"),a.loading)]);if(i.value&&e.showError)return o("div",{class:A("error")},[s(e.errorIcon,A("error-icon"),a.error)])},f=()=>{if(i.value||!e.src)return;const d={alt:e.alt,class:A("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?Me(o("img",L({ref:l},d),null),[[De("lazy"),e.src]]):o("img",L({src:e.src,onLoad:v,onError:u},d),null)},b=({el:d})=>{const S=()=>{d===l.value&&r.value&&v()};l.value?S():se(S)},k=({el:d})=>{d===l.value&&!i.value&&u()};return m&&re&&(m.$on("loaded",b),m.$on("error",k),Ee(()=>{m.$off("loaded",b),m.$off("error",k)})),()=>{var d;return o("div",{class:A({round:e.round}),style:c.value},[f(),t(),(d=a.default)==null?void 0:d.call(a)])}}});const Cn=G(yn),[ke,wn]=E("checkbox-group"),Sn={max:P,disabled:Boolean,iconSize:P,direction:String,modelValue:oe(),checkedColor:String},pe=Symbol(ke);B({name:ke,props:Sn,emits:["change","update:modelValue"],setup(e,{emit:n,slots:a}){const{children:i,linkChildren:r}=Fe(pe),l=c=>n("update:modelValue",c),m=(c={})=>{typeof c=="boolean"&&(c={checked:c});const{checked:v,skipDisabled:u}=c,t=i.filter(f=>f.props.bindGroup?f.props.disabled&&u?f.checked.value:v!=null?v:!f.checked.value:!1).map(f=>f.name);l(t)};return U(()=>e.modelValue,c=>n("change",c)),ve({toggleAll:m}),de(()=>e.modelValue),r({props:e,updateValue:l}),()=>{var c;return o("div",{class:wn([e.direction])},[(c=a.default)==null?void 0:c.call(a)])}}});const[xn,Pn]=E("checkbox"),Vn=$({},be,{bindGroup:x});var In=B({name:xn,props:Vn,emits:["change","update:modelValue"],setup(e,{emit:n,slots:a}){const{parent:i}=qe(pe),r=c=>{const{name:v}=e,{max:u,modelValue:s}=i.props,t=s.slice();if(c)!(u&&t.length>=u)&&!t.includes(v)&&(t.push(v),e.bindGroup&&i.updateValue(t));else{const f=t.indexOf(v);f!==-1&&(t.splice(f,1),e.bindGroup&&i.updateValue(t))}},l=N(()=>i&&e.bindGroup?i.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),m=(c=!l.value)=>{i&&e.bindGroup?r(c):n("update:modelValue",c)};return U(()=>e.modelValue,c=>n("change",c)),ve({toggle:m,props:e,checked:l}),de(()=>e.modelValue),()=>o(kn,L({bem:Pn,role:"checkbox",parent:i,checked:l.value,onToggle:m},e),W(a,["default","icon"]))}});const On=G(In),[Tn,$n]=E("divider"),zn={dashed:Boolean,hairline:x,contentPosition:T("center")};var Bn=B({name:Tn,props:zn,setup(e,{slots:n}){return()=>{var a;return o("div",{role:"separator",class:$n({dashed:e.dashed,hairline:e.hairline,[`content-${e.contentPosition}`]:!!n.default})},[(a=n.default)==null?void 0:a.call(n)])}}});const An=G(Bn);function Nn(e){return ee({url:"/checkIdentityInfo",method:"post",data:e})}function Ln(e){return ee({url:"/getBeforeAuthTips",method:"post",data:e})}function Un(e){return ee({url:"/alipayAuthInit",method:"post",data:e})}var En="./assets/auth-logo.cdd60c32.png";function te(e,n,a){if(!e)return"";for(var i=e.length-n-a,r="",l=0;l<i;l++)r+="*";return e.substring(0,n)+r+e.substring(e.length-a)}function Mn(e){return new URL({"/src/assets/auth-logo.png":En,"/src/assets/logo.png":on}[`/src/assets/${e}.png`],self.location).href}const Dn={class:"form-wrap"},Fn={style:{margin:"16px"}},qn=H("\u63D0\u4EA4"),Gn={class:"auth-logo"},Hn=H("\u52A0\u8F7D\u5931\u8D25"),jn={class:"content"},Rn=["innerHTML"],Kn={class:"lower-tips"},Xn=["innerHTML"],Yn=H(" \u67E5\u770B "),Jn=["onClick","innerHTML"],Qn={class:"btn-group"},Zn=H("\u53D6\u6D88\u6388\u67431"),Wn=H("\u786E\u8BA4\u6388\u67432"),ea={setup(e){const n=h(""),a=h(""),i=h(""),r=h(!1),l=h(""),m=h(!1),c=h(""),v=h(!1),u=h(!1),s=N(()=>a.value&&l.value),t=window.location.href.substring(window.location.href.indexOf("?")+1);t.includes("&")||(We.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const f=t.split("&"),b=f[0].replace(/loginToken=/g,""),k=f[1].replace(/certToken=/g,""),d=h(""),S=h(""),V=h({}),_e=h(""),ye=h("");ie(async()=>{let{data:I}=await Nn({loginToken:b,certToken:k});n.value=I.foreBackUrl,I.userStatus!==2&&(a.value=I.fullName,i.value=te(a.value,0,a.value.length-1),l.value=I.idNum,c.value=te(l.value,3,2),r.value=m.value=!0,a.value&&l.value&&(v.value=!0));let{data:g}=await Ln({certToken:k});d.value=g.beforeAuth,S.value=g.beforeProtocol,V.value=JSON.parse(g.protocols)[0]});const Ce={}.VITE_SERVICE_AGREEMENT,we=()=>{window.location.href=V.value.url||Ce},Se=()=>{u.value=!1,_("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(n.value)},1e3)},xe=()=>{v.value=!0},Pe=async()=>{if(console.log(123123),!u.value)return _("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");let{data:I}=await Un({certToken:k,fullName:a.value,idNum:l.value});ye.value=I.certifyId,_e.value=I.certifyUrl,v.value=!1,u.value=!1};return(I,g)=>{const M=O("van-field"),Ve=O("van-cell-group"),Z=O("van-button"),Ie=O("van-image"),Oe=O("van-form"),Te=O("van-divider"),$e=O("van-checkbox"),ze=O("van-action-sheet");return D(),Ge(He,null,[w("div",Dn,[o(Oe,{onSubmit:xe},{default:z(()=>[o(Ve,{inset:""},{default:z(()=>[o(M,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),r.value?(D(),j(M,{key:0,modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=p=>i.value=p),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])):(D(),j(M,{key:1,modelValue:a.value,"onUpdate:modelValue":g[1]||(g[1]=p=>a.value=p),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),m.value?(D(),j(M,{key:2,modelValue:c.value,"onUpdate:modelValue":g[2]||(g[2]=p=>c.value=p),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(D(),j(M,{key:3,modelValue:l.value,"onUpdate:modelValue":g[3]||(g[3]=p=>l.value=p),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"]))]),_:1}),w("div",Fn,[o(Z,{square:"",block:"",type:"primary",disabled:!ae(s),"native-type":"submit"},{default:z(()=>[qn]),_:1},8,["disabled"])]),w("div",Gn,[o(Ie,{src:ae(Mn)("auth-logo")},{error:z(()=>[Hn]),_:1},8,["src"])])]),_:1})]),o(ze,{show:v.value,"onUpdate:show":g[6]||(g[6]=p=>v.value=p),title:"\u8BA4\u8BC1\u6388\u6743"},{default:z(()=>[w("div",jn,[w("div",{class:"upper-tips",innerHTML:d.value},null,8,Rn),o(Te),w("div",Kn,[o($e,{modelValue:u.value,"onUpdate:modelValue":g[4]||(g[4]=p=>u.value=p),shape:"square"},null,8,["modelValue"]),w("p",{class:"text",onClick:g[5]||(g[5]=p=>u.value=!u.value)},[w("span",{innerHTML:S.value},null,8,Xn),Yn,w("a",{class:"service-link",onClick:je(we,["stop"]),innerHTML:V.value.name},null,8,Jn)])]),w("div",Qn,[o(Z,{square:"",plain:"",type:"primary",class:"authorize-btn to-cancel-authorize-btn",onClick:Se},{default:z(()=>[Zn]),_:1}),o(Z,{square:"",type:"primary",class:Re(["to-authorize-btn","authorize-btn",{active:u.value}]),onClick:Pe},{default:z(()=>[Wn]),_:1},8,["class"])])])]),_:1},8,["show"])],64)}}};Ke(ea).use(Xe).use(en).use(nn).use(an).use(tn).use(un).use(An).use(On).use(Cn).mount("#app");
