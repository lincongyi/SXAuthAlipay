import{q as $,y as d,I as L,K as P,d as b,r as u,Z as k,i as B,D,ac as _,ag as j,g as r,a0 as f,m as C,ak as N,aw as R,a2 as z,_ as T,T as U,Q as q}from"./normalize.c453d6e5.js";const[F,o]=$("image"),K={src:String,alt:String,fit:String,position:String,round:Boolean,width:d,height:d,radius:d,lazyLoad:Boolean,iconSize:d,showError:L,errorIcon:P("photo-fail"),iconPrefix:String,showLoading:L,loadingIcon:P("photo")};var Q=b({name:F,props:K,emits:["load","error"],setup(e,{emit:g,slots:s}){const n=u(!1),i=u(!0),l=u(),{$Lazyload:t}=k().proxy,S=B(()=>{const a={width:f(e.width),height:f(e.height)};return C(e.radius)&&(a.overflow="hidden",a.borderRadius=f(e.radius)),a});D(()=>e.src,()=>{n.value=!1,i.value=!0});const v=a=>{i.value=!1,g("load",a)},h=a=>{n.value=!0,i.value=!1,g("error",a)},m=(a,c,I)=>I?I():r(U,{name:a,size:e.iconSize,class:c,classPrefix:e.iconPrefix},null),x=()=>{if(i.value&&e.showLoading)return r("div",{class:o("loading")},[m(e.loadingIcon,o("loading-icon"),s.loading)]);if(n.value&&e.showError)return r("div",{class:o("error")},[m(e.errorIcon,o("error-icon"),s.error)])},E=()=>{if(n.value||!e.src)return;const a={alt:e.alt,class:o("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?N(r("img",z({ref:l},a),null),[[R("lazy"),e.src]]):r("img",z({src:e.src,onLoad:v,onError:h},a),null)},w=({el:a})=>{const c=()=>{a===l.value&&i.value&&v()};l.value?c():T(c)},y=({el:a})=>{a===l.value&&!n.value&&h()};return t&&_&&(t.$on("loaded",w),t.$on("error",y),j(()=>{t.$off("loaded",w),t.$off("error",y)})),()=>{var a;return r("div",{class:o({round:e.round}),style:S.value},[E(),x(),(a=s.default)==null?void 0:a.call(s)])}}});const Z=q(Q);export{Z as I};
