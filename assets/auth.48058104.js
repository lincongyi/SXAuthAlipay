import{h as D,l as P,j as O,aj as ie,K as A,q as B,f as s,V as R,ae as Z,I as ee,a6 as Ie,_ as ce,R as Oe,x as Q,P as E,Q as re,ak as Te,n as q,al as Ae,k as K,v as Be,ai as Ne,H as $e,r as v,J as ze,am as Ue,O as F,T as Me,y as Fe,an as ue,N as Ee,e as x,o as z,c as qe,a as S,w as I,F as De,ao as L,u as le,ap as Ge,aq as He,d as G,g as Le,B as Ke}from"./normalize.9ed2938e.js";import{s as X,F as je,a as Je,C as Re,N as Qe}from"./index.35ad0248.js";import{p as Xe,b as Ye,P as de,m as We,c as Ze,u as fe,D as en}from"./index.6da00043.js";import{c as nn,a as tn,I as an}from"./index.1b676ec0.js";import{_ as on}from"./logo.29c3ea92.js";const[ln,_]=D("action-sheet"),sn=P({},Xe,{title:String,round:O,actions:ie(),closeIcon:A("cross"),closeable:O,cancelText:String,description:String,closeOnPopstate:O,closeOnClickAction:Boolean,safeAreaInsetBottom:O}),cn=[...Ye,"round","closeOnPopstate","safeAreaInsetBottom"];var rn=B({name:ln,props:sn,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:t}){const c=o=>t("update:show",o),u=()=>{c(!1),t("cancel")},l=()=>{if(e.title)return s("div",{class:_("header")},[e.title,e.closeable&&s(ee,{name:e.closeIcon,class:[_("close"),Ie],onClick:u},null)])},h=()=>{if(n.cancel||e.cancelText)return[s("div",{class:_("gap")},null),s("button",{type:"button",class:_("cancel"),onClick:u},[n.cancel?n.cancel():e.cancelText])]},i=(o,a)=>o.loading?s(ce,{class:_("loading-icon")},null):n.action?n.action({action:o,index:a}):[s("span",{class:_("name")},[o.name]),o.subname&&s("div",{class:_("subname")},[o.subname])],f=(o,a)=>{const{color:d,loading:p,callback:g,disabled:T,className:H}=o,N=()=>{T||p||(g&&g(o),e.closeOnClickAction&&c(!1),Oe(()=>t("select",o,a)))};return s("button",{type:"button",style:{color:d},class:[_("item",{loading:p,disabled:T}),H],onClick:N},[i(o,a)])},r=()=>{if(e.description||n.description){const o=n.description?n.description():e.description;return s("div",{class:_("description")},[o])}};return()=>s(de,R({class:_(),position:"bottom","onUpdate:show":c},Z(e,cn)),{default:()=>{var o;return[l(),r(),s("div",{class:_("content")},[e.actions.map(f),(o=n.default)==null?void 0:o.call(n)]),h()]}})}});const un=Q(rn);let U=0;function dn(e){e?(U||document.body.classList.add("van-toast--unclickable"),U++):U&&(U--,U||document.body.classList.remove("van-toast--unclickable"))}const[fn,M]=D("toast"),mn=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],vn={icon:String,show:Boolean,type:A("text"),overlay:Boolean,message:q,iconSize:q,duration:Ae(2e3),position:A("middle"),teleport:[String,Object],className:K,iconPrefix:String,transition:A("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:K,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var me=B({name:fn,props:vn,emits:["update:show"],setup(e,{emit:n}){let t,c=!1;const u=()=>{const o=e.show&&e.forbidClick;c!==o&&(c=o,dn(c))},l=o=>n("update:show",o),h=()=>{e.closeOnClick&&l(!1)},i=()=>clearTimeout(t),f=()=>{const{icon:o,type:a,iconSize:d,iconPrefix:p,loadingType:g}=e;if(o||a==="success"||a==="fail")return s(ee,{name:o||a,size:d,class:M("icon"),classPrefix:p},null);if(a==="loading")return s(ce,{class:M("loading"),size:d,type:g},null)},r=()=>{const{type:o,message:a}=e;if(Be(a)&&a!=="")return o==="html"?s("div",{key:0,class:M("text"),innerHTML:String(a)},null):s("div",{class:M("text")},[a])};return E(()=>[e.show,e.forbidClick],u),E(()=>[e.show,e.type,e.message,e.duration],()=>{i(),e.show&&e.duration>0&&(t=setTimeout(()=>{l(!1)},e.duration))}),re(u),Te(u),()=>s(de,R({class:[M([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:h,onClosed:i,"onUpdate:show":l},Z(e,mn)),{default:()=>[f(),r()]})}});const ve={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let C=[],Y=!1,j=P({},ve);const J=new Map;function he(e){return $e(e)?e:{message:e}}function hn(){const{instance:e,unmount:n}=We({setup(){const t=v(""),{open:c,state:u,close:l,toggle:h}=Ze(),i=()=>{Y&&(C=C.filter(r=>r!==e),n())},f=()=>s(me,R(u,{onClosed:i,"onUpdate:show":h}),null);return E(t,r=>{u.message=r}),ze().render=f,{open:c,clear:l,message:t}}});return e}function pn(){if(!C.length||Y){const e=hn();C.push(e)}return C[C.length-1]}function k(e={}){if(!Ne)return{};const n=pn(),t=he(e);return n.open(P({},j,J.get(t.type||j.type),t)),n}const ne=e=>n=>k(P({type:e},he(n)));k.loading=ne("loading");k.success=ne("success");k.fail=ne("fail");k.clear=e=>{var n;C.length&&(e?(C.forEach(t=>{t.clear()}),C=[]):Y?(n=C.shift())==null||n.clear():C[0].clear())};function gn(e,n){typeof e=="string"?J.set(e,n):P(j,e)}k.setDefaultOptions=gn;k.resetDefaultOptions=e=>{typeof e=="string"?J.delete(e):(j=P({},ve),J.clear())};k.allowMultiple=(e=!0)=>{Y=e};k.install=e=>{e.use(Q(me)),e.config.globalProperties.$toast=k};const pe={name:K,shape:A("round"),disabled:Boolean,iconSize:q,modelValue:K,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var bn=B({props:P({},pe,{bem:Ue(Function),role:String,parent:Object,checked:Boolean,bindGroup:O}),emits:["click","toggle"],setup(e,{emit:n,slots:t}){const c=v(),u=a=>{if(e.parent&&e.bindGroup)return e.parent.props[a]},l=F(()=>u("disabled")||e.disabled),h=F(()=>u("direction")),i=F(()=>{const a=e.checkedColor||u("checkedColor");if(a&&e.checked&&!l.value)return{borderColor:a,backgroundColor:a}}),f=a=>{const{target:d}=a,p=c.value,g=p===d||(p==null?void 0:p.contains(d));!l.value&&(g||!e.labelDisabled)&&n("toggle"),n("click",a)},r=()=>{const{bem:a,shape:d,checked:p}=e,g=e.iconSize||u("iconSize");return s("div",{ref:c,class:a("icon",[d,{disabled:l.value,checked:p}]),style:{fontSize:Me(g)}},[t.icon?t.icon({checked:p,disabled:l.value}):s(ee,{name:"success",style:i.value},null)])},o=()=>{if(t.default)return s("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[t.default()])};return()=>{const a=e.labelPosition==="left"?[o(),r()]:[r(),o()];return s("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},h.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:f},[a])}}});const[ge,kn]=D("checkbox-group"),yn={max:q,disabled:Boolean,iconSize:q,direction:String,modelValue:ie(),checkedColor:String},be=Symbol(ge);B({name:ge,props:yn,emits:["change","update:modelValue"],setup(e,{emit:n,slots:t}){const{children:c,linkChildren:u}=Fe(be),l=i=>n("update:modelValue",i),h=(i={})=>{typeof i=="boolean"&&(i={checked:i});const{checked:f,skipDisabled:r}=i,a=c.filter(d=>d.props.bindGroup?d.props.disabled&&r?d.checked.value:f!=null?f:!d.checked.value:!1).map(d=>d.name);l(a)};return E(()=>e.modelValue,i=>n("change",i)),fe({toggleAll:h}),ue(()=>e.modelValue),u({props:e,updateValue:l}),()=>{var i;return s("div",{class:kn([e.direction])},[(i=t.default)==null?void 0:i.call(t)])}}});const[_n,Cn]=D("checkbox"),wn=P({},pe,{bindGroup:O});var Sn=B({name:_n,props:wn,emits:["change","update:modelValue"],setup(e,{emit:n,slots:t}){const{parent:c}=Ee(be),u=i=>{const{name:f}=e,{max:r,modelValue:o}=c.props,a=o.slice();if(i)!(r&&a.length>=r)&&!a.includes(f)&&(a.push(f),e.bindGroup&&c.updateValue(a));else{const d=a.indexOf(f);d!==-1&&(a.splice(d,1),e.bindGroup&&c.updateValue(a))}},l=F(()=>c&&e.bindGroup?c.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),h=(i=!l.value)=>{c&&e.bindGroup?u(i):n("update:modelValue",i)};return E(()=>e.modelValue,i=>n("change",i)),fe({toggle:h,props:e,checked:l}),ue(()=>e.modelValue),()=>s(bn,R({bem:Cn,role:"checkbox",parent:c,checked:l.value,onToggle:h},e),Z(t,["default","icon"]))}});const xn=Q(Sn),[Pn,Vn]=D("divider"),In={dashed:Boolean,hairline:O,contentPosition:A("center")};var On=B({name:Pn,props:In,setup(e,{slots:n}){return()=>{var t;return s("div",{role:"separator",class:Vn({dashed:e.dashed,hairline:e.hairline,[`content-${e.contentPosition}`]:!!n.default})},[(t=n.default)==null?void 0:t.call(n)])}}});const Tn=Q(On);function An(e){return X({url:"/checkIdentityInfo",method:"post",data:e})}function Bn(e){return X({url:"/getBeforeAuthTips",method:"post",data:e})}function Nn(e){return X({url:"/alipayAuthInit",method:"post",data:e})}function $n(e){return X({url:"/alipayAuthQuery",method:"post",data:e})}var zn="./assets/auth-logo.cdd60c32.png";function se(e,n,t){if(!e)return"";for(var c=e.length-n-t,u="",l=0;l<c;l++)u+="*";return e.substring(0,n)+u+e.substring(e.length-t)}function Un(e){return new URL({"/src/assets/auth-logo.png":zn,"/src/assets/certification-failed.png":nn,"/src/assets/certification-successful.png":tn,"/src/assets/logo.png":on}[`/src/assets/${e}.png`],self.location).href}const Mn={class:"form-wrap"},Fn={style:{margin:"16px"}},En=G("\u63D0\u4EA4"),qn={class:"auth-logo"},Dn=G("\u52A0\u8F7D\u5931\u8D25"),Gn={class:"content"},Hn=["innerHTML"],Ln={class:"lower-tips"},Kn=["innerHTML"],jn=G(" \u67E5\u770B "),Jn=["onClick","innerHTML"],Rn={class:"btn-group"},Qn=G("\u53D6\u6D88\u6388\u6743"),Xn=G("\u786E\u8BA4\u6388\u6743"),Yn={setup(e){const n=v(""),t=v(""),c=v(""),u=v(!1),l=v(""),h=v(!1),i=v(""),f=v(!1),r=v(!1),o=F(()=>t.value&&l.value),a=window.location.href.substring(window.location.href.indexOf("?")+1);a.includes("&")||(en.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const d=a.split("&"),p=d[0].replace(/loginToken=/g,""),g=d[1].replace(/certToken=/g,""),T=v(""),H=v(""),N=v({}),te=v(""),ae=v("");re(async()=>{let{data:w}=await An({loginToken:p,certToken:g});n.value=w.foreBackUrl,w.userStatus!==2&&(t.value=w.fullName,c.value=se(t.value,0,t.value.length-1),l.value=w.idNum,i.value=se(l.value,3,2),u.value=h.value=!0,t.value&&l.value&&(f.value=!0));let{data:m}=await Bn({certToken:g});T.value=m.beforeAuth,H.value=m.beforeProtocol,N.value=JSON.parse(m.protocols)[0]});const ke={}.VITE_SERVICE_AGREEMENT,ye=()=>{window.location.href=N.value.url||ke},oe=()=>{r.value=!1,k("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(n.value)},1e3)},_e=()=>{f.value=!0},Ce=async()=>{if(!r.value)return k("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");let{data:w}=await Nn({certToken:g,fullName:t.value,idNum:l.value});ae.value=w.certifyId,te.value=w.certifyUrl,f.value=!1,r.value=!1,we(ae.value,te.value)},we=(w,m)=>{function V(b){window.AlipayJSBridge?b&&b():document.addEventListener("AlipayJSBridgeReady",b,!1)}function W(b,$){window.AlipayJSBridge.call("startBizService",{name:"open-certify",param:JSON.stringify(b)},$)}V(function(){W({certifyId:w,url:m},async b=>{if(!b.result)oe();else{k(b.resultStatus==="9000"?"\u8BA4\u8BC1\u901A\u8FC7":"\u8BA4\u8BC1\u5931\u8D25");let{data:$}=await $n({loginToken:p,certToken:g,fullName:t.value,idNum:l.value,certifyId:b.result.certifyId});setTimeout(()=>{window.location.replace($.foreBackUrl)},1e3)}})})};return(w,m)=>{const V=x("van-field"),W=x("van-cell-group"),b=x("van-button"),$=x("van-image"),Se=x("van-form"),xe=x("van-divider"),Pe=x("van-checkbox"),Ve=x("van-action-sheet");return z(),qe(De,null,[S("div",Mn,[s(Se,{onSubmit:_e},{default:I(()=>[s(W,{inset:""},{default:I(()=>[s(V,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),u.value?(z(),L(V,{key:0,modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=y=>c.value=y),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])):(z(),L(V,{key:1,modelValue:t.value,"onUpdate:modelValue":m[1]||(m[1]=y=>t.value=y),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),h.value?(z(),L(V,{key:2,modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=y=>i.value=y),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(z(),L(V,{key:3,modelValue:l.value,"onUpdate:modelValue":m[3]||(m[3]=y=>l.value=y),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"]))]),_:1}),S("div",Fn,[s(b,{square:"",block:"",type:"primary",disabled:!le(o),"native-type":"submit"},{default:I(()=>[En]),_:1},8,["disabled"])]),S("div",qn,[s($,{src:le(Un)("auth-logo")},{error:I(()=>[Dn]),_:1},8,["src"])])]),_:1})]),s(Ve,{show:f.value,"onUpdate:show":m[6]||(m[6]=y=>f.value=y),title:"\u8BA4\u8BC1\u6388\u6743"},{default:I(()=>[S("div",Gn,[S("div",{class:"upper-tips",innerHTML:T.value},null,8,Hn),s(xe),S("div",Ln,[s(Pe,{modelValue:r.value,"onUpdate:modelValue":m[4]||(m[4]=y=>r.value=y),shape:"square"},null,8,["modelValue"]),S("p",{class:"text",onClick:m[5]||(m[5]=y=>r.value=!r.value)},[S("span",{innerHTML:H.value},null,8,Kn),jn,S("a",{class:"service-link",onClick:Ge(ye,["stop"]),innerHTML:N.value.name},null,8,Jn)])]),S("div",Rn,[s(b,{square:"",plain:"",type:"primary",class:"authorize-btn to-cancel-authorize-btn",onClick:oe},{default:I(()=>[Qn]),_:1}),s(b,{square:"",type:"primary",class:He(["to-authorize-btn","authorize-btn",{active:r.value}]),onClick:Ce},{default:I(()=>[Xn]),_:1},8,["class"])])])]),_:1},8,["show"])],64)}}};Le(Yn).use(Ke).use(je).use(Je).use(Re).use(Qe).use(un).use(Tn).use(xn).use(an).mount("#app");
