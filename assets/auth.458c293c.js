import{h as H,l as Z,j as V,ai as ee,K as J,q as M,f as t,V as te,$ as ae,I as ye,ad as ne,aj as le,R as be,x as R,y as _e,P as j,_ as oe,n as E,N as xe,O as Q,r as p,A as ke,L as we,ak as Ve,a8 as Ce,a9 as Te,a7 as Ae,al as Se,a6 as Be,ac as Ie,Q as Pe,e as C,o as K,c as ze,a as w,w as P,F as Ne,am as $,u as X,an as Ke,ao as Oe,d as L,g as He,B as Me}from"./normalize.07298e93.js";import{c as Le,a as $e,s as U}from"./index.2e83570f.js";import{p as Ee,a as Ue,P as De,u as se,b as Fe,D as Ge}from"./index.0e8fd7f3.js";import{a as qe,T as G,D as Je}from"./index.286c7249.js";import{c as Re,a as je}from"./certification-successful.526fe7c8.js";import{_ as Qe}from"./logo.9e2f423b.js";import{F as We,a as Xe,C as Ye}from"./index.8ab36336.js";import{I as Ze}from"./index.fecaba0f.js";const[et,x]=H("action-sheet"),tt=Z({},Ee,{title:String,round:V,actions:ee(),closeIcon:J("cross"),closeable:V,cancelText:String,description:String,closeOnPopstate:V,closeOnClickAction:Boolean,safeAreaInsetBottom:V}),at=[...Ue,"round","closeOnPopstate","safeAreaInsetBottom"];var nt=M({name:et,props:tt,emits:["select","cancel","update:show"],setup(e,{slots:a,emit:l}){const o=i=>l("update:show",i),v=()=>{o(!1),l("cancel")},r=()=>{if(e.title)return t("div",{class:x("header")},[e.title,e.closeable&&t(ye,{name:e.closeIcon,class:[x("close"),ne],onClick:v},null)])},y=()=>{if(a.cancel||e.cancelText)return[t("div",{class:x("gap")},null),t("button",{type:"button",class:x("cancel"),onClick:v},[a.cancel?a.cancel():e.cancelText])]},s=(i,u)=>i.loading?t(le,{class:x("loading-icon")},null):a.action?a.action({action:i,index:u}):[t("span",{class:x("name")},[i.name]),i.subname&&t("div",{class:x("subname")},[i.subname])],m=(i,u)=>{const{color:g,loading:A,callback:S,disabled:n,className:d}=i,h=()=>{n||A||(S&&S(i),e.closeOnClickAction&&o(!1),be(()=>l("select",i,u)))};return t("button",{type:"button",style:{color:g},class:[x("item",{loading:A,disabled:n}),d],onClick:h},[s(i,u)])},c=()=>{if(e.description||a.description){const i=a.description?a.description():e.description;return t("div",{class:x("description")},[i])}};return()=>t(De,te({class:x(),position:"bottom","onUpdate:show":o},ae(e,at)),{default:()=>{var i;return[r(),c(),t("div",{class:x("content")},[e.actions.map(m),(i=a.default)==null?void 0:i.call(a)]),y()]}})}});const lt=R(nt),[ce,ot]=H("checkbox-group"),st={max:E,disabled:Boolean,iconSize:E,direction:String,modelValue:ee(),checkedColor:String},ie=Symbol(ce);M({name:ce,props:st,emits:["change","update:modelValue"],setup(e,{emit:a,slots:l}){const{children:o,linkChildren:v}=_e(ie),r=s=>a("update:modelValue",s),y=(s={})=>{typeof s=="boolean"&&(s={checked:s});const{checked:m,skipDisabled:c}=s,u=o.filter(g=>g.props.bindGroup?g.props.disabled&&c?g.checked.value:m!=null?m:!g.checked.value:!1).map(g=>g.name);r(u)};return j(()=>e.modelValue,s=>a("change",s)),se({toggleAll:y}),oe(()=>e.modelValue),v({props:e,updateValue:r}),()=>{var s;return t("div",{class:ot([e.direction])},[(s=l.default)==null?void 0:s.call(l)])}}});const[ct,it]=H("checkbox"),rt=Z({},Le,{bindGroup:V});var ut=M({name:ct,props:rt,emits:["change","update:modelValue"],setup(e,{emit:a,slots:l}){const{parent:o}=xe(ie),v=s=>{const{name:m}=e,{max:c,modelValue:i}=o.props,u=i.slice();if(s)!(c&&u.length>=c)&&!u.includes(m)&&(u.push(m),e.bindGroup&&o.updateValue(u));else{const g=u.indexOf(m);g!==-1&&(u.splice(g,1),e.bindGroup&&o.updateValue(u))}},r=Q(()=>o&&e.bindGroup?o.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),y=(s=!r.value)=>{o&&e.bindGroup?v(s):a("update:modelValue",s)};return j(()=>e.modelValue,s=>a("change",s)),se({toggle:y,props:e,checked:r}),oe(()=>e.modelValue),()=>t($e,te({bem:it,role:"checkbox",parent:o,checked:r.value,onToggle:y},e),ae(l,["default","icon"]))}});const dt=R(ut),[mt,O]=H("key"),ht=t("svg",{class:O("collapse-icon"),viewBox:"0 0 30 24"},[t("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),ft=t("svg",{class:O("delete-icon"),viewBox:"0 0 32 22"},[t("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var q=M({name:mt,props:{type:String,text:E,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:a,slots:l}){const o=p(!1),v=Fe(),r=c=>{v.start(c),o.value=!0},y=c=>{v.move(c),v.direction.value&&(o.value=!1)},s=c=>{o.value&&(l.default||ke(c),o.value=!1,a("press",e.text,e.type))},m=()=>{if(e.loading)return t(le,{class:O("loading-icon")},null);const c=l.default?l.default():e.text;switch(e.type){case"delete":return c||ft;case"extra":return c||ht;default:return c}};return()=>t("div",{class:O("wrapper",{wider:e.wider}),onTouchstart:r,onTouchmove:y,onTouchend:s,onTouchcancel:s},[t("div",{role:"button",tabindex:0,class:O([e.color,{large:e.large,active:o.value,delete:e.type==="delete"}])},[m()])])}});const[vt,T]=H("number-keyboard"),gt={show:Boolean,title:String,theme:J("default"),zIndex:E,teleport:[String,Object],maxlength:we(1/0),modelValue:J(""),transition:V,blurOnClose:V,showDeleteKey:V,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:V,safeAreaInsetBottom:V,extraKey:{type:[String,Array],default:""}};function pt(e){for(let a=e.length-1;a>0;a--){const l=Math.floor(Math.random()*(a+1)),o=e[a];e[a]=e[l],e[l]=o}return e}var yt=M({name:vt,props:gt,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:a,slots:l}){const o=p(),v=()=>{const n=Array(9).fill("").map((d,h)=>({text:h+1}));return e.randomKeyOrder&&pt(n),n},r=()=>[...v(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],y=()=>{const n=v(),{extraKey:d}=e,h=Array.isArray(d)?d:[d];return h.length===1?n.push({text:0,wider:!0},{text:h[0],type:"extra"}):h.length===2&&n.push({text:h[0],type:"extra"},{text:0},{text:h[1],type:"extra"}),n},s=Q(()=>e.theme==="custom"?y():r()),m=()=>{e.show&&a("blur")},c=()=>{a("close"),e.blurOnClose&&m()},i=()=>a(e.show?"show":"hide"),u=(n,d)=>{if(n===""){d==="extra"&&m();return}const h=e.modelValue;d==="delete"?(a("delete"),a("update:modelValue",h.slice(0,h.length-1))):d==="close"?c():h.length<e.maxlength&&(a("input",n),a("update:modelValue",h+n))},g=()=>{const{title:n,theme:d,closeButtonText:h}=e,B=l["title-left"],z=h&&d==="default";if(!!(n||z||B))return t("div",{class:T("header")},[B&&t("span",{class:T("title-left")},[B()]),n&&t("h2",{class:T("title")},[n]),z&&t("button",{type:"button",class:[T("close"),ne],onClick:c},[h])])},A=()=>s.value.map(n=>{const d={};return n.type==="delete"&&(d.default=l.delete),n.type==="extra"&&(d.default=l["extra-key"]),t(q,{key:n.text,text:n.text,type:n.type,wider:n.wider,color:n.color,onPress:u},d)}),S=()=>{if(e.theme==="custom")return t("div",{class:T("sidebar")},[e.showDeleteKey&&t(q,{large:!0,text:e.deleteButtonText,type:"delete",onPress:u},{delete:l.delete}),t(q,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:u},null)])};return j(()=>e.show,n=>{e.transition||a(n?"show":"hide")}),e.hideOnClickOutside&&Ve(o,m,{eventName:"touchstart"}),()=>{const n=g(),d=t(Be,{name:e.transition?"van-slide-up":""},{default:()=>[Ce(t("div",{ref:o,style:Ae(e.zIndex),class:T({unfit:!e.safeAreaInsetBottom,"with-title":!!n}),onTouchstart:Se,onAnimationend:i,onWebkitAnimationEnd:i},[n,t("div",{class:T("body")},[t("div",{class:T("keys")},[A()]),S()])]),[[Te,e.show]])]});return e.teleport?t(Ie,{to:e.teleport},{default:()=>[d]}):d}}});const bt=R(yt);function _t(e){return U({url:"/checkIdentityInfo",method:"post",data:e})}function xt(e){return U({url:"/getBeforeAuthTips",method:"post",data:e})}function kt(e){return U({url:"/alipayAuthInit",method:"post",data:e})}function wt(e){return U({url:"/alipayAuthQuery",method:"post",data:e})}var Vt="./assets/auth-logo.cdd60c32.png";function Y(e,a,l){if(!e)return"";for(var o=e.length-a-l,v="",r=0;r<o;r++)v+="*";return e.substring(0,a)+v+e.substring(e.length-l)}function Ct(e){return new URL({"/src/assets/auth-logo.png":Vt,"/src/assets/auth-task-logo.png":qe,"/src/assets/certification-failed.png":Re,"/src/assets/certification-successful.png":je,"/src/assets/logo.png":Qe}[`/src/assets/${e}.png`],self.location).href}const Tt={class:"form-wrap"},At={style:{margin:"16px"}},St=L("\u63D0\u4EA4"),Bt={class:"auth-logo"},It=L("\u52A0\u8F7D\u5931\u8D25"),Pt={class:"content"},zt=["innerHTML"],Nt={class:"lower-tips"},Kt=["innerHTML"],Ot=L(" \u67E5\u770B "),Ht=["onClick","innerHTML"],Mt={class:"btn-group"},Lt=L("\u53D6\u6D88\u6388\u6743"),$t=L("\u786E\u8BA4\u6388\u6743"),Et={setup(e){const a=p(""),l=p(""),o=p(""),v=p(!1),r=p(""),y=p(!1),s=p(""),m=p(!1),c=p(!1),i=Q(()=>l.value&&r.value);let u=window.location.href;u.includes("&")||(Ge.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const g=u.substring(u.indexOf("?")+1),A=new URLSearchParams(g),S=A.get("loginToken")||"",n=A.get("certToken")||"",d=p(""),h=p(""),B=p({}),z=p(""),D=p("");Pe(async()=>{let{data:k}=await _t({loginToken:S,certToken:n});a.value=k.foreBackUrl,k.userStatus!==2&&(l.value=k.fullName,o.value=Y(l.value,0,l.value.length-1),r.value=k.idNum,s.value=Y(r.value,3,2),v.value=y.value=!0,l.value&&r.value&&(m.value=!0));let{data:f}=await xt({certToken:n});d.value=f.beforeAuth,h.value=f.beforeProtocol,B.value=JSON.parse(f.protocols)[0]});const re={}.VITE_SERVICE_AGREEMENT,ue=()=>{window.location.href=B.value.url||re},W=()=>{c.value=!1,G("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(a.value)},1e3)},de=()=>{m.value=!0},me=async()=>{if(!c.value)return G("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");let{data:k}=await kt({certToken:n,fullName:l.value,idNum:r.value});D.value=k.certifyId,z.value=k.certifyUrl,m.value=!1,c.value=!1,he(D.value,z.value)},he=(k,f)=>{function I(b){window.AlipayJSBridge?b&&b():document.addEventListener("AlipayJSBridgeReady",b,!1)}function F(b,N){window.AlipayJSBridge.call("startBizService",{name:"open-certify",param:JSON.stringify(b)},N)}I(function(){F({certifyId:k,url:f},async b=>{if(!b.result)W();else{G(b.resultStatus==="9000"?"\u8BA4\u8BC1\u901A\u8FC7":"\u8BA4\u8BC1\u5931\u8D25");let{data:N}=await wt({loginToken:S,certToken:n,fullName:l.value,idNum:r.value,certifyId:b.result.certifyId});setTimeout(()=>{window.location.replace(N.foreBackUrl)},1e3)}})})};return(k,f)=>{const I=C("van-field"),F=C("van-cell-group"),b=C("van-button"),N=C("van-image"),fe=C("van-form"),ve=C("van-divider"),ge=C("van-checkbox"),pe=C("van-action-sheet");return K(),ze(Ne,null,[w("div",Tt,[t(fe,{onSubmit:de},{default:P(()=>[t(F,{inset:""},{default:P(()=>[t(I,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),v.value?(K(),$(I,{key:0,modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=_=>o.value=_),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",maxlength:"18"},null,8,["modelValue"])):(K(),$(I,{key:1,modelValue:l.value,"onUpdate:modelValue":f[1]||(f[1]=_=>l.value=_),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),y.value?(K(),$(I,{key:2,modelValue:s.value,"onUpdate:modelValue":f[2]||(f[2]=_=>s.value=_),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(K(),$(I,{key:3,modelValue:r.value,"onUpdate:modelValue":f[3]||(f[3]=_=>r.value=_),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"]))]),_:1}),w("div",At,[t(b,{square:"",block:"",type:"primary",disabled:!X(i),"native-type":"submit"},{default:P(()=>[St]),_:1},8,["disabled"])]),w("div",Bt,[t(N,{src:X(Ct)("auth-logo")},{error:P(()=>[It]),_:1},8,["src"])])]),_:1})]),t(pe,{show:m.value,"onUpdate:show":f[6]||(f[6]=_=>m.value=_),title:"\u8BA4\u8BC1\u6388\u6743"},{default:P(()=>[w("div",Pt,[w("div",{class:"upper-tips",innerHTML:d.value},null,8,zt),t(ve),w("div",Nt,[t(ge,{modelValue:c.value,"onUpdate:modelValue":f[4]||(f[4]=_=>c.value=_),shape:"square"},null,8,["modelValue"]),w("p",{class:"text",onClick:f[5]||(f[5]=_=>c.value=!c.value)},[w("span",{innerHTML:h.value},null,8,Kt),Ot,w("a",{class:"service-link",onClick:Ke(ue,["stop"]),innerHTML:B.value.name},null,8,Ht)])]),w("div",Mt,[t(b,{square:"",plain:"",type:"primary",class:"authorize-btn to-cancel-authorize-btn",onClick:W},{default:P(()=>[Lt]),_:1}),t(b,{square:"",type:"primary",class:Oe(["to-authorize-btn","authorize-btn",{active:c.value}]),onClick:me},{default:P(()=>[$t]),_:1},8,["class"])])])]),_:1},8,["show"])],64)}}};He(Et).use(Me).use(We).use(Xe).use(Ye).use(bt).use(lt).use(Je).use(dt).use(Ze).mount("#app");
