import{k as K,D as ee,C as k,q as te,E as J,d as P,g as t,P as ne,Q as ae,W as Ce,J as le,L as oe,O as be,M as j,G as xe,x as Q,a8 as ue,n as H,v as _e,H as R,r as f,y as ke,A as we,aq as Ae,ai as Ve,aj as Te,ah as Fe,ar as Ee,ag as Se,am as De,N as Pe,f as A,o as N,c as Ie,a as _,w as D,F as Ne,as as O,T as Y,at as ze,e as M,h as Ke,B as Oe}from"./normalize.79b9eda6.js";import{c as He,a as Me,s as L,T as G}from"./index.cd6159f2.js";import{p as Le,c as Ue,P as $e,a as se,u as Ge,D as qe}from"./index.a935fe46.js";import{h as Z,g as Je,l as je}from"./index.2d62ddaa.js";import{F as Qe,a as Re,C as We}from"./index.b68a6d84.js";import{D as Xe}from"./index.e309cfd1.js";import{I as Ye}from"./index.a38fca42.js";import"./auth-task-logo.8dfd73fa.js";import"./certification-successful.526fe7c8.js";import"./logo.9e2f423b.js";const[Ze,x]=K("action-sheet"),et=ee({},Le,{title:String,round:k,actions:te(),closeIcon:J("cross"),closeable:k,cancelText:String,description:String,closeOnPopstate:k,closeOnClickAction:Boolean,safeAreaInsetBottom:k}),tt=[...Ue,"round","closeOnPopstate","safeAreaInsetBottom"];var nt=P({name:Ze,props:et,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:l}){const u=c=>l("update:show",c),p=()=>{u(!1),l("cancel")},r=()=>{if(e.title)return t("div",{class:x("header")},[e.title,e.closeable&&t(Ce,{name:e.closeIcon,class:[x("close"),le],onClick:p},null)])},B=()=>{if(n.cancel||e.cancelText)return[t("div",{class:x("gap")},null),t("button",{type:"button",class:x("cancel"),onClick:p},[n.cancel?n.cancel():e.cancelText])]},o=(c,d)=>c.loading?t(oe,{class:x("loading-icon")},null):n.action?n.action({action:c,index:d}):[t("span",{class:x("name")},[c.name]),c.subname&&t("div",{class:x("subname")},[c.subname])],v=(c,d)=>{const{color:g,loading:T,callback:w,disabled:a,className:i}=c,h=()=>{a||T||(w&&w(c),e.closeOnClickAction&&u(!1),be(()=>l("select",c,d)))};return t("button",{type:"button",style:{color:g},class:[x("item",{loading:T,disabled:a}),i],onClick:h},[o(c,d)])},s=()=>{if(e.description||n.description){const c=n.description?n.description():e.description;return t("div",{class:x("description")},[c])}};return()=>t($e,ne({class:x(),position:"bottom","onUpdate:show":u},ae(e,tt)),{default:()=>{var c;return[r(),s(),t("div",{class:x("content")},[e.actions.map(v),(c=n.default)==null?void 0:c.call(n)]),B()]}})}});const at=j(nt),[ce,lt]=K("checkbox-group"),ot={max:H,disabled:Boolean,iconSize:H,direction:String,modelValue:te(),checkedColor:String},ie=Symbol(ce);P({name:ce,props:ot,emits:["change","update:modelValue"],setup(e,{emit:n,slots:l}){const{children:u,linkChildren:p}=xe(ie),r=o=>n("update:modelValue",o),B=(o={})=>{typeof o=="boolean"&&(o={checked:o});const{checked:v,skipDisabled:s}=o,d=u.filter(g=>g.props.bindGroup?g.props.disabled&&s?g.checked.value:v!=null?v:!g.checked.value:!1).map(g=>g.name);r(d)};return Q(()=>e.modelValue,o=>n("change",o)),se({toggleAll:B}),ue(()=>e.modelValue),p({props:e,updateValue:r}),()=>{var o;return t("div",{class:lt([e.direction])},[(o=l.default)==null?void 0:o.call(l)])}}});const[ut,st]=K("checkbox"),ct=ee({},He,{bindGroup:k});var it=P({name:ut,props:ct,emits:["change","update:modelValue"],setup(e,{emit:n,slots:l}){const{parent:u}=_e(ie),p=o=>{const{name:v}=e,{max:s,modelValue:c}=u.props,d=c.slice();if(o)!(s&&d.length>=s)&&!d.includes(v)&&(d.push(v),e.bindGroup&&u.updateValue(d));else{const g=d.indexOf(v);g!==-1&&(d.splice(g,1),e.bindGroup&&u.updateValue(d))}},r=R(()=>u&&e.bindGroup?u.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),B=(o=!r.value)=>{u&&e.bindGroup?p(o):n("update:modelValue",o)};return Q(()=>e.modelValue,o=>n("change",o)),se({toggle:B,props:e,checked:r}),ue(()=>e.modelValue),()=>t(Me,ne({bem:st,role:"checkbox",parent:u,checked:r.value,onToggle:B},e),ae(l,["default","icon"]))}});const rt=j(it),[dt,z]=K("key"),mt=t("svg",{class:z("collapse-icon"),viewBox:"0 0 30 24"},[t("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),vt=t("svg",{class:z("delete-icon"),viewBox:"0 0 32 22"},[t("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var q=P({name:dt,props:{type:String,text:H,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:n,slots:l}){const u=f(!1),p=Ge(),r=s=>{p.start(s),u.value=!0},B=s=>{p.move(s),p.direction.value&&(u.value=!1)},o=s=>{u.value&&(l.default||ke(s),u.value=!1,n("press",e.text,e.type))},v=()=>{if(e.loading)return t(oe,{class:z("loading-icon")},null);const s=l.default?l.default():e.text;switch(e.type){case"delete":return s||vt;case"extra":return s||mt;default:return s}};return()=>t("div",{class:z("wrapper",{wider:e.wider}),onTouchstart:r,onTouchmove:B,onTouchend:o,onTouchcancel:o},[t("div",{role:"button",tabindex:0,class:z([e.color,{large:e.large,active:u.value,delete:e.type==="delete"}])},[v()])])}});const[ht,V]=K("number-keyboard"),ft={show:Boolean,title:String,theme:J("default"),zIndex:H,teleport:[String,Object],maxlength:we(1/0),modelValue:J(""),transition:k,blurOnClose:k,showDeleteKey:k,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:k,safeAreaInsetBottom:k,extraKey:{type:[String,Array],default:""}};function pt(e){for(let n=e.length-1;n>0;n--){const l=Math.floor(Math.random()*(n+1)),u=e[n];e[n]=e[l],e[l]=u}return e}var gt=P({name:ht,props:ft,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:n,slots:l}){const u=f(),p=()=>{const a=Array(9).fill("").map((i,h)=>({text:h+1}));return e.randomKeyOrder&&pt(a),a},r=()=>[...p(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],B=()=>{const a=p(),{extraKey:i}=e,h=Array.isArray(i)?i:[i];return h.length===1?a.push({text:0,wider:!0},{text:h[0],type:"extra"}):h.length===2&&a.push({text:h[0],type:"extra"},{text:0},{text:h[1],type:"extra"}),a},o=R(()=>e.theme==="custom"?B():r()),v=()=>{e.show&&n("blur")},s=()=>{n("close"),e.blurOnClose&&v()},c=()=>n(e.show?"show":"hide"),d=(a,i)=>{if(a===""){i==="extra"&&v();return}const h=e.modelValue;i==="delete"?(n("delete"),n("update:modelValue",h.slice(0,h.length-1))):i==="close"?s():h.length<e.maxlength&&(n("input",a),n("update:modelValue",h+a))},g=()=>{const{title:a,theme:i,closeButtonText:h}=e,E=l["title-left"],S=h&&i==="default";if(!!(a||S||E))return t("div",{class:V("header")},[E&&t("span",{class:V("title-left")},[E()]),a&&t("h2",{class:V("title")},[a]),S&&t("button",{type:"button",class:[V("close"),le],onClick:s},[h])])},T=()=>o.value.map(a=>{const i={};return a.type==="delete"&&(i.default=l.delete),a.type==="extra"&&(i.default=l["extra-key"]),t(q,{key:a.text,text:a.text,type:a.type,wider:a.wider,color:a.color,onPress:d},i)}),w=()=>{if(e.theme==="custom")return t("div",{class:V("sidebar")},[e.showDeleteKey&&t(q,{large:!0,text:e.deleteButtonText,type:"delete",onPress:d},{delete:l.delete}),t(q,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:d},null)])};return Q(()=>e.show,a=>{e.transition||n(a?"show":"hide")}),e.hideOnClickOutside&&Ae(u,v,{eventName:"touchstart"}),()=>{const a=g(),i=t(Se,{name:e.transition?"van-slide-up":""},{default:()=>[Ve(t("div",{ref:u,style:Fe(e.zIndex),class:V({unfit:!e.safeAreaInsetBottom,"with-title":!!a}),onTouchstart:Ee,onAnimationend:c,onWebkitAnimationEnd:c},[a,t("div",{class:V("body")},[t("div",{class:V("keys")},[T()]),w()])]),[[Te,e.show]])]});return e.teleport?t(De,{to:e.teleport},{default:()=>[i]}):i}}});const yt=j(gt);function Bt(e){return L({url:"/checkIdentityInfo",method:"post",data:e})}function Ct(e){return L({url:"/getBeforeAuthTips",method:"post",data:e})}function bt(e){return L({url:"/alipayAuthInit",method:"post",data:e})}function xt(e){return L({url:"/alipayAuthQuery",method:"post",data:e})}const _t={class:"form-wrap"},kt={style:{margin:"16px"}},wt=M("\u63D0\u4EA4"),At={class:"auth-logo"},Vt=M("\u52A0\u8F7D\u5931\u8D25"),Tt={class:"content"},Ft=["innerHTML"],Et=_("div",{class:"center-tips"},"\u672C\u6B21\u8BA4\u8BC1\u9700\u8981\u901A\u8FC7\u4EBA\u8138\u8BC6\u522B\u9A8C\u8BC1\u8EAB\u4EFD\u4FE1\u606F",-1),St={class:"lower-tips"},Dt=["innerHTML"],Pt=M(" \u67E5\u770B "),It=["onClick","innerHTML"],Nt={class:"btn-group"},zt=M("\u786E\u8BA4\u6388\u6743"),Kt=P({setup(e){const n=f(""),l=f(""),u=f(""),p=f(!1),r=f(""),B=f(!1),o=f(""),v=f(!1),s=f(!1),c=R(()=>l.value&&r.value);let d=window.location.href;d.includes("&")||(qe.alert({message:"\u8DEF\u5F84\u53C2\u6570\u6709\u9519\uFF0C\u8BF7\u91CD\u65B0\u83B7\u53D6"}),setTimeout(()=>{window.history.go(-1)},1500));const g=d.substring(d.indexOf("?")+1),T=new URLSearchParams(g),w=T.get("loginToken")||"",a=T.get("certToken")||"",i=f(0),h=f(""),E=f(""),S=f({url:"",name:""}),U=f(""),W=f("");Pe(async()=>{let{data:y}=await Bt({loginToken:w,certToken:a});i.value=y.mode,n.value=y.foreBackUrl,y.userStatus!==2&&(l.value=y.fullName,u.value=Z(l.value,0,l.value.length-1),r.value=y.idNum,o.value=Z(r.value,3,2),p.value=B.value=!0,l.value&&r.value&&(v.value=!0));let{data:m}=await Ct({certToken:a});h.value=m.beforeAuth,E.value=m.beforeProtocol,S.value=JSON.parse(m.protocols)[0]});const{VITE_SERVICE_AGREEMENT:re}=je(),de=()=>{window.location.href=S.value.url||re},me=()=>{s.value=!1,G("\u7528\u6237\u53D6\u6D88\u8BA4\u8BC1"),setTimeout(()=>{window.location.replace(n.value)},1e3)},ve=()=>{v.value=!0},he=async()=>{if(!s.value)return G("\u8BF7\u540C\u610F\u300A\u670D\u52A1\u534F\u8BAE\u300B");if([16,64].includes(i.value)){let y={loginToken:w,certToken:a,fullName:l.value,idNum:r.value,mode:i.value};X(y)}else{let{data:y}=await bt({loginToken:w,certToken:a,fullName:l.value,idNum:r.value});W.value=y.certifyId||"",U.value=y.certifyUrl||"",v.value=!1,s.value=!1,fe(W.value,U.value)}},fe=(y,m)=>{function F(C){window.AlipayJSBridge?C&&C():document.addEventListener("AlipayJSBridgeReady",C,!1)}function $(C,I){window.AlipayJSBridge.call("startBizService",{name:"open-certify",param:JSON.stringify(C)},I)}F(function(){$({certifyId:y,url:m},async C=>{if(!C.result)me();else{G(C.resultStatus==="9000"?"\u8BA4\u8BC1\u901A\u8FC7":"\u8BA4\u8BC1\u5931\u8D25");let I={loginToken:w,certToken:a,fullName:l.value,idNum:r.value,mode:i.value,certifyId:C.result.certifyId};X(I)}})})},X=async y=>{let{data:m}=await xt(y);setTimeout(()=>{window.location.replace(m.foreBackUrl)},1e3)};return(y,m)=>{const F=A("van-field"),$=A("van-cell-group"),C=A("van-button"),I=A("van-image"),pe=A("van-form"),ge=A("van-divider"),ye=A("van-checkbox"),Be=A("van-action-sheet");return N(),Ie(Ne,null,[_("div",_t,[t(pe,{onSubmit:ve},{default:D(()=>[t($,{inset:""},{default:D(()=>[t(F,{"model-value":"\u7B2C\u4E8C\u4EE3\u5C45\u6C11\u8EAB\u4EFD\u8BC1",readonly:"",name:"\u8BC1\u4EF6\u7C7B\u578B",label:"\u8BC1\u4EF6\u7C7B\u578B"}),p.value?(N(),O(F,{key:0,modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=b=>u.value=b),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",readonly:"",maxlength:"18"},null,8,["modelValue"])):(N(),O(F,{key:1,modelValue:l.value,"onUpdate:modelValue":m[1]||(m[1]=b=>l.value=b),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",clearable:"",maxlength:"18",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"])),B.value?(N(),O(F,{key:2,modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=b=>o.value=b),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",readonly:"",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801"},null,8,["modelValue"])):(N(),O(F,{key:3,modelValue:r.value,"onUpdate:modelValue":m[3]||(m[3]=b=>r.value=b),name:"\u8BC1\u4EF6\u53F7\u7801",label:"\u8BC1\u4EF6\u53F7\u7801",maxlength:"18",placeholder:"\u8BC1\u4EF6\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BC1\u4EF6\u53F7\u7801"}]},null,8,["modelValue"]))]),_:1}),_("div",kt,[t(C,{square:"",block:"",type:"primary",disabled:!Y(c),"native-type":"submit"},{default:D(()=>[wt]),_:1},8,["disabled"])]),_("div",At,[t(I,{src:Y(Je)("auth-logo")},{error:D(()=>[Vt]),_:1},8,["src"])])]),_:1})]),t(Be,{show:v.value,"onUpdate:show":m[6]||(m[6]=b=>v.value=b),title:"\u8BA4\u8BC1\u6388\u6743"},{default:D(()=>[_("div",Tt,[_("div",{class:"upper-tips",innerHTML:h.value},null,8,Ft),Et,t(ge),_("div",St,[t(ye,{modelValue:s.value,"onUpdate:modelValue":m[4]||(m[4]=b=>s.value=b),shape:"square"},null,8,["modelValue"]),_("p",{class:"text",onClick:m[5]||(m[5]=b=>s.value=!s.value)},[_("span",{innerHTML:E.value},null,8,Dt),Pt,_("a",{class:"service-link",onClick:ze(de,["stop"]),innerHTML:S.value.name},null,8,It)])]),_("div",Nt,[t(C,{block:"",square:"",type:"primary",onClick:he},{default:D(()=>[zt]),_:1})])])]),_:1},8,["show"])],64)}}});Ke(Kt).use(Oe).use(Qe).use(Re).use(We).use(yt).use(at).use(Xe).use(rt).use(Ye).mount("#app");
